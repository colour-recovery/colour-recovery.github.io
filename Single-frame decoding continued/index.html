<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="search" href="https://colour-recovery.github.io/space/opensearch" type="application/opensearchdescription+xml" title="Wikispaces Search (Colour Recovery Working Group Wiki)" />
<link rel="alternate" type="application/x-wiki" title="Edit This Page" href="/page/edit/Single-frame+decoding+continued" />
<link rel="alternate" title="Colour Recovery Working Group - All Changes" href="https://colour-recovery.github.io/wiki/xmla?v=rss_2_0" type="application/rss+xml" />
<link rel="alternate" title="colour-recovery : Single-frame decoding continued - Discussion" href="https://colour-recovery.github.io/message/xml/Single-frame+decoding+continued?v=rss_2_0" type="application/rss+xml" />
<link rel="alternate" title="colour-recovery : Single-frame decoding continued - Edits" href="https://colour-recovery.github.io/page/xml/Single-frame+decoding+continued?v=rss_2_0" type="application/rss+xml" />
<link rel="microsummary" href="/page/microsummary/Single-frame+decoding+continued/edits"/>
<link rel="microsummary" href="/page/microsummary/Single-frame+decoding+continued/messages"/>
<script type="text/javascript">
  
if (typeof ws === 'undefined') ws = {};
ws.context = {
  instance: {
    id: '1',
    url: 'wikispaces.com',
    isMain: true,
    supportsGoogleDocs: false,
    isTesClassroom: false,
  },
  user: {
    id: '',
    username: '',
    status: '',
    locale: 'en',
    imageUrlPrefix: '../ssl.wikicdn.com/i/user_none_',
    isTeacher: false,
    canAdministerWiki: false,
  },
  wiki: {
    id: '110862',
    name: 'colour-recovery',
    text: 'Colour Recovery Working Group',
    module: 'B',
    isClassroom: false,
    isTesClassroom: false
    ,defaultSpaceId: 110862
    ,isWwwWiki: false
  },
  project: {
    id: '110862',
    name: ''
  },
  space: {
    id: '110862',
    name: 'colour-recovery',
    isDefaultSpace: true,
    isDefaultTemplate: false
  },

  environment_name: 'prod',

  path: {
    object: 'page',
    method: 'view',
    page: 'Single-frame decoding continued',
    id: ''
  },

  settings: {
    main_domain: 'wikispaces.com',
    session_url: 'https://session.wikispaces.com/1/',
    asset_url_prefix: '../ssl.wikicdn.com',
    beta_features: false,
    isMobileSite: false,
    isUploadCapable: true,
    can_discuss: false,
    has_gdocs: false,
    isDialog: false,
    pwin: ''
  },
  clockSkewMillis: 1528198006916 - ((window.performance && window.performance.timing.responseStart > 0) ? window.performance.timing.responseStart : (new Date()).getTime())
}


// legacy javascript API variables, use the above instead
var wikispaces_isUserLoggedIn = !!ws.context.user.id;
var wikispaces_isMain = ws.context.instance.isMain;
var wikispaces_username = ws.context.user.username;
var wikispaces_spaceName = ws.context.space.name;
var wikispaces_projectName = ws.context.project.name;
var wikispaces_wikiName = ws.context.wiki.name;
var wikispaces_wikiText = ws.context.wiki.text;
var wikispaces_isDefaultSpace = ws.context.space.isDefaultSpace;
var wikispaces_method = ws.context.path.method;
var wikispaces_object = ws.context.path.object;
var wikispaces_page = ws.context.path.page;
var wikispaces_id = ws.context.path.id;
var wikispaces_domain = ws.context.instance.url;
var wikispaces_isUserOrganizer = false;
var wikispaces_main_domain = ws.context.settings.asset_url_prefix;
var wikispaces_asset_url_prefix = ws.context.settings.asset_url_prefix;
var wikispaces_beta_features = ws.context.settings.beta_features;
var wikispaces_isMobileSite = ws.context.settings.isMobileSite;
var wikispaces_isUploadCapable = ws.context.settings.isUploadCapable;
var wikispaces_can_discuss = ws.context.settings.can_discuss;
var wikispaces_has_gdocs = ws.context.settings.has_gdocs;

</script><title>Colour Recovery Working Group - Single-frame decoding continued</title>
<meta charset="utf-8" />
<link rel="apple-touch-icon" sizes="144x144" href="../ssl.wikicdn.com/_/z6371z4x/i/logo-144.png" />
<link rel="apple-touch-icon" sizes="114x114" href="../ssl.wikicdn.com/_/j5j77xz3/i/logo-114.png" />
<link rel="apple-touch-icon" sizes="72x72" href="../ssl.wikicdn.com/_/vq8j5432/i/logo-72.png" />
<link rel="apple-touch-icon" href="../ssl.wikicdn.com/_/38515190/i/logo-57.png" />
<link rel="shortcut icon" href="../ssl.wikicdn.com/_/55v9k02z/i/logo-16.png" />
<style type="text/css">
/*
Based on: AquaFluid, http://wpthemepark.com/
Description: WP Theme AquaFluid by Sadish
Version: 1.0
Author: Sadish Balasubramanian
*/

/* Standard theme styles */
*, *:before, *:after {
  -webkit-box-sizing: border-box;
     -moz-box-sizing: border-box;
          box-sizing: border-box;
}
body {
  font-family: arial, helvetica, sans-serif;
  font-size: 14px;
  line-height: 20px;
  margin: 0;
}
.ws-theme-header-inner,
.ws-theme-body-inner,
.ws-theme-footer-inner,
.ws-theme-content-inner,
.ws-theme-sidebar-inner {
  position: relative;
}
.ws-theme-header-inner:after,
.ws-theme-body-inner:after,
.ws-theme-footer-inner:after,
.ws-theme-content-inner:after,
.ws-theme-sidebar-inner:after,
.ws-theme-menu-inner:after {
  content: " ";
  visibility: hidden;
  display: block;
  height: 0;
  clear: both;
}
.ws-theme-content, .ws-theme-sidebar {
  overflow-x: auto;
}
.ws-theme-footer {
  text-align: right;
}
.ws-theme-footer a, .ws-theme-footer a:hover {
  text-decoration: none;
}
@media (min-width: 768px) {
  .ws-theme-container {
    width: 750px;
    margin-right: auto;
    margin-left: auto;
  }
  .ws-theme-content {
    width: 550px;
    min-height: 384px;
    float: right;
  }
  .ws-theme-sidebar {
    width: 200px;
    float: left;
  }
}
@media (min-width: 992px) {
  .ws-theme-container {
    width: 970px;
  }
  .ws-theme-content {
    width: 770px;
    min-height: 496px;
  }
}
@media (min-width: 1200px) {
  .ws-theme-container {
    width: 1170px;
  }
  .ws-theme-content {
    width: 970px;
    min-height: 600px;
  }
}
/* End standard theme styles */
</style>
<style type="text/css">
/* Theme-specific styles */
body {
  background-color: #CDE;
}

.ws-theme-container {
  margin: 0 5px;
}

.ws-theme-header .WikiSearch .WikiSearchInput,
.ws-theme-sidebar .WikiSearch .WikiSearchInput,
.ws-theme-footer .WikiSearch .WikiSearchInput {
  width: 100%;
}

.ws-theme-header,
.ws-theme-sidebar,
.ws-theme-footer {
  color: #000000;
}
.ws-theme-header a,
.ws-theme-sidebar a,
.ws-theme-footer a {
  color: #0000FF;
  text-decoration: none;
}
.ws-theme-header a:hover,
.ws-theme-sidebar a:hover,
.ws-theme-footer a:hover {
  text-decoration: underline;
}
.ws-theme-header img,
.ws-theme-sidebar img,
.ws-theme-footer img {
  border: none;
}

.ws-theme-header-inner,
.ws-theme-body-inner,
.ws-theme-footer-inner {
  border: #CCC 1px solid;
}

.ws-theme-header,
.ws-theme-sidebar {
  display: none;
}

.ws-theme-body {
  padding-top: 8px;
}
.ws-theme-body-inner {
  border-bottom: none;
  background-color: #FFF;
}

.ws-theme-content {
  overflow-x: visible;
}
.ws-theme-content-inner {
  padding: 13px 15px 26px;
}

.ws-theme-footer {
  font-size: 12px;
  text-align: center;
  padding-bottom: 8px;
}
.ws-theme-footer-inner {
  padding: 10px 15px;
  background: #FFF;
  border-top-color: #000;
}
.ws-theme-footer .WikiLicense img {
  vertical-align: text-bottom;
}

@media (min-width: 768px) {
  body {
    background: #FAFBFC url(../ssl.wikicdn.com/_/68jv1944/i/theme_aqua_blue.jpg) repeat-x top fixed;
  }

  .ws-theme-container {
    width: auto;
    margin: 0 8px;
  }

  .ws-theme-header,
  .ws-theme-sidebar {
    display: block;
  }

  .ws-theme-header {
    display: block;
    padding-top: 20px;
  }
  .ws-theme-header-inner {
    height: 125px;
    padding: 25px 20px;
    background: #483d8b url(../ssl.wikicdn.com/_/xq2j142v/i/theme_aqua_header.jpg) repeat-x bottom;
    border-bottom: none;
  }
  .ws-theme-header .ws-theme-logo {
    float: right;
  }

  .ws-theme-body {
    padding-top: 0;
  }
  .ws-theme-body-inner {
    border-top: none;
    background-color: #EEE;
  }
  .ws-theme-body-inner:before {
    content: " ";
    display: block;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 200px;
    background-color: #FFF;
    border-left: 1px solid #CCC;
  }

  .ws-theme-content {
    width: auto;
    margin-left: 200px;
    float: none;
  }
  .ws-theme-content-inner {
    float: left;
    width: 100%;
    padding: 13px 15px 26px;
  }

  .ws-theme-sidebar-inner {
    padding: 0 10px;
  }
  .ws-theme-sidebar .WikiActions {
    list-style-type: none;
    padding: 0;
    margin: 0;
  }
  .ws-theme-sidebar .WikiActions > li {
    padding: 2px;
  }
  .ws-theme-sidebar .WikiCustomNav ol {
    padding-left: 16px;
  }
  .ws-theme-sidebar .WikiCustomNav ol.includePageList {
    padding-left: 0;
  }
  .ws-theme-sidebar .WikispacesNavbar {
    margin: 0 -10px;
    padding: 0 10px;
  }
  .ws-theme-sidebar .ws-theme-nav-edit {
    color: #666;
    text-align: center;
  }
  .ws-theme-sidebar .ws-theme-nav-edit a {
    color: inherit;
  }

  .ws-theme-footer-inner {
    border-top-color: #CCC;
    background: #FFF url(../ssl.wikicdn.com/_/2z687q19/i/theme_aqua_top.gif) repeat-x top;
  }
}

/* End theme-specific styles */
</style>
<link rel="stylesheet" href="../www.wikispaces.com/stylesheet/viewi/217420326D.css" type="text/css" />
<link rel="stylesheet" href="../ssl.wikicdn.com/s/nogz/9jvvjv40-internal-bootstrap.css" type="text/css" />
<link rel="stylesheet" href="../ssl.wikicdn.com/s/nogz/vz033906-internal.css" type="text/css" />
<script src="../ssl.wikicdn.com/s/nogz/84014v41-top.min.js" type="text/javascript"></script>

<script type="text/javascript">
  var _gaq = _gaq || [];

  var wsGoogleAccount = 'UA-80504-1';
  _gaq.push(['_setAccount', wsGoogleAccount]);
  _gaq.push(['_gat._anonymizeIp']);
  _gaq.push(['_setDomainName', 'wikispaces.com']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_setCustomVar', 2, 'Authenticated', 'Guest', 2]);
  _gaq.push(['_trackPageview']);
</script></head>
<body><a href="#WikiContent" class="hidden sr-only sr-only-focusable">Skip to main content</a><div id="js-fixed-header-holder" class="fixed"><div class="WikispacesContent WikispacesBs3" role="banner">
      
    <div class="ws-main-top-nav visible-xs">
    <div class="navbar navbar-static-top" style="margin-bottom: 0;">
      <div class="container">
                <div class="navbar-header">
          <div class="visible-xs pull-left">
            <a href="/space/menu" class="WikispacesDialogLink btn navbar-btn">
              <i class="fa fa-bars"></i>
            </a>
          </div>
          <div class="visible-xs pull-right js-globalnav-popover-container">
                        <a href="../www.wikispaces.com/site/signin?goto=https%3A%2F%2Fcolour-recovery.wikispaces.com%2FSingle-frame%2520decoding%2520continued%3FresponseToken%3D355a707743b05c58e0e13c68eb256a70" class="btn navbar-btn ws-mobile-guest-username js-globalnav-popover-trigger">
              guest
            </a>
                        <div class="hidden js-globalnav-popover-content">
              <div class="WikispacesContent WikispacesBs3">
                <div class="WikiInternalHeaderNav noHide">
  <div class="WikiInternalHeaderNavMenu">
                          
                  <span class="WikiInternalHeaderNavMenuArea"><a href="../www.wikispaces.com/user/join?goto=https%3A%2F%2Fcolour-recovery.wikispaces.com%2Fspace%2Fjoin" rel="nofollow" class="WikispacesXDomainDialogLink">Join</a></span>

          <span class="divider">|</span>
        
        <span class="WikiInternalHeaderNavMenuArea"><a class="js-help-trigger" rel="nofollow" href="http://helpcenter.wikispaces.com/">Help</a></span>

        <span class="divider">|</span>
      
      <span class="WikiInternalHeaderNavMenuArea"><a href="../www.wikispaces.com/site/signin?goto=https%3A%2F%2Fcolour-recovery.wikispaces.com%2FSingle-frame%2520decoding%2520continued%3FresponseToken%3D355a707743b05c58e0e13c68eb256a70" rel="nofollow" class="WikispacesXDomainDialogLink">Sign In</a></span>
      </div>
</div>              </div>
            </div>
          </div>
          <div class="ws-navbar-middle-xs">
            <div class="navbar-brand" role="navigation">
              <a href="../www.wikispaces.com/" class="ws-logo"></a>
              <i class="fa fa-angle-right"></i>
              <a href="https://colour-recovery.github.io/">Colour Recovery Working Group</a>
                              <i class="fa fa-angle-right"></i> <a href="https://colour-recovery.github.io/home">Home</a>
              
            </div>
          </div>
                    <form action="/search/view" method="post" class="navbar-form ws-include-xs pull-left ws-navbar-search hidden-xs" role="search"><input type="hidden" name="wikispacesFormToken" value="af9705338cfac24a8117be85e14b4a6ff9cdd066"/><input type="text" class="form-control search-query" name="q" value="" placeholder="Search" /> </form>
                  </div>
      </div>
    </div>
  </div>
      <div class="hidden-xs"><div class="WikiInternalHeaderNav WikiElement floating">
  <div class="WikiInternalHeaderNavMenu">
                                    <span class="WikiInternalHeaderNavMenuArea guestUserName">guest</span><span class="slideMarker divider">|</span>
        
                  <span class="WikiInternalHeaderNavMenuArea"><a href="../www.wikispaces.com/user/join?goto=https%3A%2F%2Fcolour-recovery.wikispaces.com%2Fspace%2Fjoin" rel="nofollow" class="WikispacesXDomainDialogLink">Join</a></span>

          <span class="divider">|</span>
        
        <span class="WikiInternalHeaderNavMenuArea"><a class="js-help-trigger" rel="nofollow" href="http://helpcenter.wikispaces.com/">Help</a></span>

        <span class="divider">|</span>
      
      <span class="WikiInternalHeaderNavMenuArea"><a href="../www.wikispaces.com/site/signin?goto=https%3A%2F%2Fcolour-recovery.wikispaces.com%2FSingle-frame%2520decoding%2520continued%3FresponseToken%3D355a707743b05c58e0e13c68eb256a70" rel="nofollow" class="WikispacesXDomainDialogLink">Sign In</a></span>
      </div>
</div></div>
  </div></div><div id="js-fixed-header-offset">
<header class="ws-theme-header" role="banner">
  <div class="ws-theme-container">
    <div class="ws-theme-header-inner">
      <div class="ws-theme-logo">
        <a href="https://colour-recovery.github.io/" class="WikiLogo WikiElement"><img src="../logo.jpg" alt="Colour Recovery Working Group" /></a>      </div>
    </div>
  </div>
</header>

<div class="ws-theme-body">
  <div class="ws-theme-container">
    <div class="ws-theme-body-inner">
      <nav class="ws-theme-sidebar" role="navigation">
        <div class="ws-theme-sidebar-inner">
          <div class="ws-theme-menu">
            <div class="ws-theme-menu-inner">
              <ul class="WikiActions WikiElement WikiControls">
    <li id="WikiActionHome"><div><span class="WikiActionSupplemental" style="float: right;"></span><a href="https://colour-recovery.github.io/"><i class="fa fa-home fa-fw"></i></a><a href="https://colour-recovery.github.io/">Wiki Home</a></div></li>
    <li id="WikiActionChanges"><div><span class="WikiActionSupplemental" style="float: right;"></span><a href="/wiki/changes"><i class="fa fa-clock-o fa-fw"></i></a><a href="/wiki/changes">Recent Changes</a></div></li>
    <li id="WikiActionPagesAndFiles"><div><span class="WikiActionSupplemental" style="float: right;"></span><a href="/space/content"><i class="fa fa-file-text-o fa-fw"></i></a><a href="/space/content">Pages and Files</a></div></li>
    <li id="WikiActionMembers"><div class="js-member-link"><span class="WikiActionSupplemental" style="float: right;"></span><a href="/wiki/members"><i class="fa fa-user fa-fw"></i></a><a href="/wiki/members">Members</a></div></li>
</ul>
              <form action="/search/view" method="post" class="WikiSearch WikiElement" role="search"><input type="text" class="form-control WikiSearchInput" name="q" value="" placeholder="Search" /> </form>              <div class="WikiCustomNav WikiElement wiki"><ul><li><h3><a class="wiki_link" href="/Home">Home</a></h3>
</li><li><a class="wiki_link_ext" href="http://colour-recovery.github.io/message/list/home" rel="nofollow">General Announcements</a></li><li><a class="wiki_link" href="/Members">Members</a></li><li><a class="wiki_link" href="/An%20examination%20of%20source%20material">An examination of source material</a></li><li><a class="wiki_link" href="/Background%20information">Background information</a></li><li><a class="wiki_link" href="/Tutorials">Tutorials</a></li><li><a class="wiki_link" href="/Utilities">Utilities</a></li><li><a class="wiki_link" href="/Previous%20work">Previous work</a></li><li><a class="wiki_link" href="/Current%20work">Current work</a></li><li><a class="wiki_link" href="/Future%20work">Future work</a></li></ul></div>              <div class="ws-theme-nav-edit">
                              </div>
            </div>
          </div>
        </div>
      </nav>
      <main class="ws-theme-content" role="main">
        <div class="ws-theme-content-inner">
          <div class="contentBox"><div class="innerContentBox" id="WikiContent">

<script type="text/template" id="comment-footer-template">

<div class="commentFooter modal-footer">
  <div class="pull-left">
    <button type="button" class="btn btn-default btn-sm previous"><i class="fa fa-arrow-left"></i></button>
    <button type="button" class="btn btn-default btn-sm next"><i class="fa fa-arrow-right"></i></button>
  </div>
  <% if (ws.context.user.canAdministerWiki && !ws.comments.Manager.readOnly) { %>
  <div class="pull-right">
    <button type="button" class="btn btn-default btn-sm remove">Remove</button>
  </div>
  <% } %>
</div>

</script>

<script type="text/template" id="comment-content-template">
<div class="ws-box commentView">
  <div class="comment-close">
    <button type="button" class="closeme close" aria-hidden="true"><i class="fa fa-times"></i></button>
  </div>
  <div class="commentHeader">
    <p class="ws-stream-meta command-context">
      <a class="userLink userLinkPicture" href="<%= userCreated.url %>"><img class="userPicture" src="<%= userCreated.imageUrl %>" width="16" height="16"></a>
      <a href="<%= userCreated.url %>"><%= userCreated.username %></a>
      <% if (smartDate == '__live__') { %>
      <abbr class="timeago" title="<%= (new Date(parseInt(dateCreated, 10) * 1000)).toISOString() %>">
        <%= dateCreated %>
      </abbr>
      <% } else { %>
        <%- smartDate %>
      <% } %>
      <% if (ws.context.user.canAdministerWiki && ws.comments.Manager.readOnly) { %>
        <i class="fa fa-trash-o contextual-command delete ws-tip" title="Delete Comment"></i>
      <% } %>
    </p>
  </div>

  <div class="commentBody">
    <div class="commentContent">
      <%= description %>
    </div>

      <% for(i = 0; i < replyPages.length; i++) { %>
        <% for(var j = 0; j < replyPages[i].digests.length; j++) { %>
      <div class="commentReply" data-id="<%= replyPages[i].digests[j].id %>">
        <p class="ws-stream-meta command-context">
          <a class="userLink userLinkPicture" href="<%= replyPages[i].digests[j].userCreated.url %>"><img class="userPicture" src="<%= replyPages[i].digests[j].userCreated.imageUrl %>" width="16" height="16"></a>
          <a href="<%= replyPages[i].digests[j].userCreated.url %>"><%= replyPages[i].digests[j].userCreated.username %></a>
          <% if (smartDate == '__live__') { %>
          <abbr class="timeago" title="<%= (new Date(parseInt(replyPages[i].digests[j].dateCreated, 10) * 1000)).toISOString() %>">
            <%= new Date(parseInt(replyPages[i].digests[j].dateCreated, 10) * 1000).toLocaleString() %>
          </abbr>
          <% } else { %>
            <%- smartDate %>
          <% } %>
          <% if (ws.context.user.canAdministerWiki) { %>
          <i class="fa fa-trash-o contextual-command delete-reply ws-tip" title="Delete Reply"></i>
          <% } %>
          </p>
        <div class="commentContent"><%= replyPages[i].digests[j].body %></div>
      </div>
        <% } %>
      <% } %>

      <form class="reply commentReply">
        <div class="form-group">
          <textarea name="reply" placeholder="Reply" class="form-control" /></textarea>
        </div>
        <div class="btn-toolbar">
          <button type="submit" class="btn btn-primary btn-sm" name="go" value="1">Post</button>

          <% if (ws.context.user.id) { %>
            <% if (monitored) { %>
            <button type="button" class="btn btn-default btn-sm pull-right toggle-monitor ws-tip active" title="You are monitoring replies."><i class="fa fa-eye"></i></button>
            <% } else { %>
            <button type="button" class="btn btn-default btn-sm pull-right toggle-monitor ws-tip" title="You are not monitoring replies."><i class="fa fa-eye"></i></button>
            <% } %>
          <% } %>
          <% if (ws.context.user.canAdministerWiki) { %>
            <% if (locked) { %>
            <button type="button" class="btn btn-default btn-sm pull-right toggle-lock ws-tip active" title="Replies are not allowed."><i class="fa fa-lock"></i></button>
            <% } else { %>
            <button type="button" class="btn btn-default btn-sm pull-right toggle-lock ws-tip" title="Replies are allowed."><i class="fa fa-lock"></i></button>
            <% } %>
          <% } %>

          <i class="fa fa-spinner fa-spin spinner pull-right hidden"></i>
        </div>
      </form>
   </div>

   
<div class="commentFooter modal-footer">
  <div class="pull-left">
    <button type="button" class="btn btn-default btn-sm previous"><i class="fa fa-arrow-left"></i></button>
    <button type="button" class="btn btn-default btn-sm next"><i class="fa fa-arrow-right"></i></button>
  </div>
  <% if (ws.context.user.canAdministerWiki && !ws.comments.Manager.readOnly) { %>
  <div class="pull-right">
    <button type="button" class="btn btn-default btn-sm remove">Remove</button>
  </div>
  <% } %>
</div>

</div>
</script>

<script type="text/template" id="comment-composer-template">
<div class="ws-box commentView">
  <div class="commentComposer">
    <div class="comment-close">
      &nbsp;<button type="button" class="close closeme" aria-hidden="true"><i class="fa fa-times"></i></button>
    </div>
    <div class="commentHeader">
      <p class="ws-stream-meta command-context">
        <img class="userPicture" src="<%= userCreated.imageUrl %>" width="16" height="16">
        <a href="#" onclick="return false;"><%= userCreated.username %></a>
      </p>
    </div>
    <div class="commentBody">
      <textarea name="comment" class="compose form-control" placeholder="Comment"/></textarea><br/>
      <div class="btn-toolbar">
        <button type="button" class="btn btn-default btn-sm monitored active pull-right" style="margin-left: 6px" onclick="jQuery(this).toggleClass('active')"><i class="fa fa-eye"></i></button>
        <button type="button" class="btn btn-default btn-sm locked btn-toggle pull-right" onclick="jQuery(this).toggleClass('active')"><i class="fa fa-lock"></i></button>
        <button type="button" class="btn btn-primary btn-sm closeme">Save</button>
      </div>
    </div>
  </div>

  
<div class="commentFooter modal-footer">
  <div class="pull-left">
    <button type="button" class="btn btn-default btn-sm previous"><i class="fa fa-arrow-left"></i></button>
    <button type="button" class="btn btn-default btn-sm next"><i class="fa fa-arrow-right"></i></button>
  </div>
  <% if (ws.context.user.canAdministerWiki && !ws.comments.Manager.readOnly) { %>
  <div class="pull-right">
    <button type="button" class="btn btn-default btn-sm remove">Remove</button>
  </div>
  <% } %>
</div>

</div>
</script>

<script type="text/template" id="comment-proxy-template">
<div class="comment-proxy">
  <span class="commentUser">
  <% if (userCreated) { %>
    <img class="userPicture" src="<%= userCreated.imageUrl %>" width="16" height="16">
  <% } else { %>
    <img class="userPicture" src="<%= ws.context.user.imageUrlPrefix %>sm.jpg" width="16" height="16">
  <% } %>
  </span>
  <span class="commentReplies"><%= 1 + _(replyPages).reduce(function(memo, page){ return memo + page.digests.length; }, 0) %></span>
</div>
</script>

<div class="ws-menu-bar WikiControls WikispacesContent WikispacesBs3">
  
    <h1 class="pageTitle"><a href="/Single-frame+decoding+continued">Single-frame decoding continued</a></h1>
      <div class="btn-group pull-right">
          <span class="btn btn-default disabled tipme" title="you do not have permission to edit this page"><i class="fa fa-pencil fa-fw"></i> Edit</span>          <a class="btn btn-default tipme" title="view 39 discussion posts" href="/Single-frame+decoding+continued#discussion"><i class="fa fa-comments fa-fw"></i> 39</a>          <a class="btn btn-default tipme" title="view 57 revisions" href="/page/history/Single-frame+decoding+continued"><i class="fa fa-clock-o fa-fw"></i> 57</a>          <a class="btn btn-default ws-btn-more dropdown-toggle tipme" title="more options" href="/page/menu/Single-frame+decoding+continued"><i class="icon-height-only fa-fw"></i>&hellip;</a>        <ul class="ws-more-menu dropdown-menu dropdown-menu-right">
              <li class=" dropdown"><a class=" ws-tag-dropdown-toggle" href="/page/tags/Single-frame+decoding+continued"><span class="pull-right">0</span> <i class="fa fa-tag fa-fw"></i> Tags</a>
          <div class="dropdown-menu dropdown-menu-right ws-tag-dropdown-menu">
          



<form action="#" name="WikiTagForm" class="WikiTagForm"><input type="hidden" name="wikispacesFormToken" value="fcfd3021ebb6400563f5071746596fac67993049"/><input type="hidden" name="wikispacesFormToken" value="fcfd3021ebb6400563f5071746596fac67993049"/>
  <div class="WikiTagList">
    <i class="fa fa-tag ws-action"></i>
        <ul class="list-unstyled">
          <li>No tags</li>
        </ul>
      </div>
  </form>      </div>
    </li>
              <li class="divider"></li>
            <li class=""><a class=" WikispacesDialogLink" href="https://colour-recovery.github.io/wiki/addmonitor?monitorLink=page%3ASingle-frame%20decoding%20continued"><i class="fa fa-eye fa-fw"></i> Notify</a>
    </li>
        <li class=""><a class=" WikispacesDialogLink" href="/page/rss/Single-frame+decoding+continued"><i class="fa fa-rss fa-fw"></i> RSS</a>
    </li>
        <li class=""><a class="" href="/page/links/Single-frame+decoding+continued"><i class="fa fa-link fa-fw"></i> Backlinks</a>
    </li>
              <li class="divider"></li>
            <li class=""><a class="" href="/page/code/Single-frame+decoding+continued"><i class="fa fa-code fa-fw"></i> Source</a>
    </li>
        <li class=""><a class="" href="/Single-frame+decoding+continued?f=print"><i class="fa fa-print fa-fw"></i> Print</a>
    </li>
        <li class=""><a class="" href="/page/pdf/Single-frame+decoding+continued"><i class="fa fa-cloud-download fa-fw"></i> Export (PDF)</a>
    </li>
      </ul>  </div>
  </div>




  <textarea class="form-control" id="autosaveContent" style="display:none;" rows="1" cols="1"></textarea>
  <div id="autosavePrompt" style="display:none;"></div>

<div class="commentContainer">
  <div class="commentSubject">
  <div class="wiki wikiPage" id="content_view">
  This page is a continuation from <a class="wiki_link" href="/Algorithmic%20approaches%20-%20thoughts">Algorithmic approaches - thoughts</a><br />
<br />
<br />
Andrew Steer - 19 April 2008<br />
<br />
<strong>More improvements!</strong><br />
<br />
I'm starting a new page as it makes for easier following (and the Wiki editor seems to get flaky once the page gets too long).<br />
<br />
Last night I received the DVD from James with a 34 second clip (857 frames) as a 3.5GB HD1080 UYVY file.<br />
Today I wrote a simple module to decode single-frames from the UYVY file.<br />
<br />
I made some tiny changes to my colour-recovery program as very early steps towards improvements and speedups, and suddenly had an unexpected improvement in image-quality! The horizontal colour-banding much reduced and the U and V amplitudes became less unbalenced.<br />
The strange thing is that I don't quite understand why the improvement - I suspect it's to do with the way the C/C++ compiler manages different data-types within an expression, and by splitting the expression into two parts I've helped things.<br />
I've also realised a possible reason that might contribute to my U/V gain-offset (but Andrew Browne should not be affected).<br />
<br />
<!-- ws:start:WikiTextLocalImageRule:6:&lt;img src=&quot;../files/col36_19AprCU.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="../files/col36_19AprCU.jpg" alt="col36_19AprCU.jpg" title="col36_19AprCU.jpg" /><!-- ws:end:WikiTextLocalImageRule:6 --><br />
Latest 1:1 pixel image (of same original film-scan), now showing less colour-banding.<br />
I've also adjusted the U/V ratio fixup to compensate for algorithmic improvements.<br />
<br />
<!-- ws:start:WikiTextLocalImageRule:7:&lt;img src=&quot;../files/col36_19AprOA.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="../files/col36_19AprOA.jpg" alt="col36_19AprOA.jpg" title="col36_19AprOA.jpg" /><!-- ws:end:WikiTextLocalImageRule:7 --><br />
Another impression of the whole-image, to show progress - again from the same source file as I used on the previous page.<br />
Oops I squashed the vertical height a bit much. Should have been 360 pixels, but I typed 320. Never mind!<br />
<br />
<br />
<br />
<strong>Who'd believe it?</strong><br />
<br />
[I have a slight suspicion that the chromadots are slightly &quot;cleaner&quot; in the UYVY file than in the .BMP files James supplied before.]<br />
<br />
Here's frame 750 from the UYVY clip:<br />
<!-- ws:start:WikiTextLocalImageRule:8:&lt;img src=&quot;../files/fr750_2MHzLnotch_sat300_v10.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="../files/fr750_2MHzLnotch_sat300_v10.jpg" alt="fr750_2MHzLnotch_sat300_v10.jpg" title="fr750_2MHzLnotch_sat300_v10.jpg" /><!-- ws:end:WikiTextLocalImageRule:8 --><br />
Who would believe that this came off a piece of black-and-white 16mm film, tele-recorded 30-odd years ago? But it did.<br />
<br />
Remarkably the -U / +V trick still seems to work quite well. I have no idea what the original colours looked like though!<br />
<br />
(edit to add frame from VT - J.Wood 21/4/08)<br />
<!-- ws:start:WikiTextLocalImageRule:9:&lt;img src=&quot;../files/bp1970.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="../files/bp1970.jpg" alt="bp1970.jpg" title="bp1970.jpg" /><!-- ws:end:WikiTextLocalImageRule:9 --><br />
<br />
<br />
After a bit more tidying up (and speeding up) of my program code, maybe I can think about doing the U and V polarity properly.<br />
<br />
<br />
<br />
Maybe not relevant (yet) for this project, but I also have some ideas on how to get some of the PAL-decoding performance benefits of the BBC's James Easterbrook's &quot;Transform Decoder&quot; without doing transforms...<br />
<br />
Bedtime!<br />
<br />
<br />
<br />
Andrew Steer - 20 April 2008<br />
<br />
<strong>Analysis of what my Colour Recovery software-program is actually doing</strong><br />
<br />
<!-- ws:start:WikiTextLocalImageRule:10:&lt;img src=&quot;../files/colzoneplateSML.jpg&quot; alt=&quot;Colour-recovery on a zoneplate-image&quot; title=&quot;Colour-recovery on a zoneplate-image&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="../files/colzoneplateSML.jpg" alt="colzoneplateSML.jpg" title="colzoneplateSML.jpg" /></td></tr><tr><td class="imageCaption">Colour-recovery on a zoneplate-image</td></tr></table><!-- ws:end:WikiTextLocalImageRule:10 --><br />
The above plot shows the decoding behaviour of my present program on a zoneplate (still fixed -U,+V decoding).<br />
<br />
<ul><li>The U-blobs (greeny-yellow) appear slightly larger than the V-blobs (orange-red) owing to the slight extra gain I'm still giving U at the moment.</li><li>The magenta stripe through the orange-red region is a bit surprising, and indicates that something is probably slightly wrong. I'm not going to worry about it now, but keep an eye on it - hope it will sort itself out as I tidy up the program.</li></ul><br />
I could probably afford to reduce the vertical bandwidth of my filter (if it proved useful). Care needs to be taken in doing this as PAL is not inherently bandwidth-limited vertically, and using a narrow filter to decode it can cause &quot;cross-luma&quot; - &quot;hanging dots&quot; on horizontal-boundaries of colour. This is a big issue on modern computer-generated graphics or captions, but less of a worry for vintage material.<br />
<br />
The plot also reminds me that at the moment in my colour-recovery program I'm finding the &quot;maximum&quot; phase of U and V <em>independently of each other</em>. In reality of course they are always in quadrature (90 degrees apart). This extra constraint ought to be added to my program and would probably reduce chroma noise, and would be a useful step towards proper phase-locking.<br />
<br />
<br />
<!-- ws:start:WikiTextLocalImageRule:11:&lt;img src=&quot;../files/randombarscol.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="../files/randombarscol.jpg" alt="randombarscol.jpg" title="randombarscol.jpg" /><!-- ws:end:WikiTextLocalImageRule:11 --><br />
This image shows the effect of the colour-decoding on some white bars (aligned at angles close to the U and V axes). Shown at 50% of original size. The source-image was band-limited.<br />
In a proper phase-sensitive PAL decoder you would get both +ve and -ve U and V colours on the edges. They would typically alternate polarity as you go up and down the image (and across frames). With my present program which forces -U,+V, all the cross-colour (false colour) goes the same way. Similarly all chroma-noise is biased the same way.<br />
<br />
As an aside:<br />
With the BBC's &quot;Transform Decoder&quot; (or an idea I have for future use) you wouldn't get the cross-colour on luminance edges at all.<br />
Well-known 2D PAL decoders reduce cross-colour on vertical edges, but don't help with edges aligned at angles close to the 2D U or V axes.<br />
<br />
<br />
<strong>Details of the earlier coding error</strong><br />
<br />
I found what the earlier problem was with my code; it's an <em>extremely subtle</em> error.<br />
<br />
/ / for U-phase ie \ \ \<br />
m1[i]=(b[i]+b7[i-2]+b5[i-1]+b3[i-1]+b1[i]+b2[i+1]+b4[i+1]+b6[i+2]/2)*sine[i]/7.5;<br />
n1[i]=(b[i]+b7[i-2]+b5[i-1]+b3[i-1]+b1[i]+b2[i+1]+b4[i+1]+b6[i+2]/2)*cosine[i]/7.5;<br />
<br />
It would take a real C-geek to realise why this does not perform as expected.<br />
<br />
[Hint: the compiler gives a warning about a continuation character in the comment...]<br />
<br />
This was causing my U-phase signal to decode incorrectly, with the extent of the error depending on the absolute phase of the signal in a horizontal sense. The effect was banding over every couple of lines (seen in the closeups during last week) and an overall loss of U saturation. Correcting this code has improved things considerably, although U appears to remain slightly weaker than V for as-yet unknown reasons.<br />
<br />
<br />
One other thought (not something that's got any urgency now): but knowing that the PAL signal should be a sinewave in amplitude, in principle it ought to be possible to calibrate overall gamma distortions by studying the detailed luminance gradations of the subcarrier.<br />
Getting the gamma right would help to avoid harmonics appearing post-filtering. Although it wouldn't be hard to filter them out anyway.<br />
<br />
<br />
That's all (for today) folks!<br />
<br />
<br />
<br />
Andrew Steer - 21 April 2008<br />
<br />
<strong>On U and V polarities, and towards pulling out the other colours</strong><br />
<br />
A diagram showing UV colour space can be found on the Wikipedia article at<br />
<!-- ws:start:WikiTextUrlRule:439:http://en.wikipedia.org/wiki/YUV --><a class="wiki_link_ext" href="http://en.wikipedia.org/wiki/YUV" rel="nofollow">http://en.wikipedia.org/wiki/YUV</a><!-- ws:end:WikiTextUrlRule:439 --><br />
<br />
<!-- ws:start:WikiTextLocalImageRule:12:&lt;img src=&quot;../files/YUV_UV_planeSML.png&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="../files/YUV_UV_planeSML.png" alt="YUV_UV_planeSML.png" title="YUV_UV_planeSML.png" /><!-- ws:end:WikiTextLocalImageRule:12 --><br />
Graphic showing U/V colour axis (from Wikipedia)<br />
<br />
The -U +V quadrant is the most &quot;useful&quot; containing red-orange-yellow to olive-green, and red with a magenta tinge. Includes skin-tones.<br />
The -U -V quadrant is all greens, a bit &quot;olive-green&quot; close to the V=0 axis, and slightly turquoisy near the U=0 axis.<br />
The +U -V quadrant is blues, mostly sky-blue; a bit turquoisy near U=0, and erring slightly purply near V=0.<br />
The +U +V quadrant is magenta becoming progressively more purply-blue as you move downwards towards the V=0 axis.<br />
<br />
<!-- ws:start:WikiTextLocalImageRule:13:&lt;img src=&quot;../files/fr750_221pcColBal_selection.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="../files/fr750_221pcColBal_selection.jpg" alt="fr750_221pcColBal_selection.jpg" title="fr750_221pcColBal_selection.jpg" /><!-- ws:end:WikiTextLocalImageRule:13 --><br />
This shows the test-image rendered with all four permutations of fixed U and V polarity.<br />
<br />
Oddly, the blue shirt, blue denim, blue waistcoats haven't really come through very well on any of the renditions.<br />
This might be just because the colours are too dark and the subcarrier has got lost, or it may be that we're getting too much U-V cross coupling because I need a more selective vertical filter and/or to force the U- and V to quadrature. I'll have to look closely at the source.<br />
<br />
On inspection of the source, the chroma patterning is <em>very</em> weak on the denim. Some more powerful vertical filtering (possibly combined with inter-frame techniques) for better phase-locking would probably help - but the fact that the subcarrier is coded on top of such low luminance may point to something of a fundamental problem... After all, the subcarrier would have gone &quot;below black&quot; in the original PAL signal :-(<br />
<br />
I tried a bit of &quot;gamma correction&quot; to pull a bit more detail out of the dark colours, but it didn't help very much. You can see the coding is pretty noisy on the original scan.<br />
<br />
No real evidence this is the cause, but dark low-contrast detail is also something that might tend to get lost/corrupted in any DCT-based (HDCAM) compression.<br />
<br />
Bear in mind that we still don't fully understand the detail of the line-by-line chroma structure we're seeing - and my decoding effectively decodes as if there were chroma detail from one field only. A better understanding of what's going on (and maybe a scan with a higher vertical resolution) might help pull more chroma data out of the noise. That said, I suspect dark blues are always likely to be tricky with this kind of colour-recovery approach.<br />
<br />
In the shorter term, proper phase-locking may help, but it's still going to be a tall order!<br />
<br />
<br />
<!-- ws:start:WikiTextLocalImageRule:14:&lt;img src=&quot;../files/fr750_221pcColBal_mergedcol.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="../files/fr750_221pcColBal_mergedcol.jpg" alt="fr750_221pcColBal_mergedcol.jpg" title="fr750_221pcColBal_mergedcol.jpg" /><!-- ws:end:WikiTextLocalImageRule:14 --><br />
This is an experiment - the basic -U/+V image, but with key denim blue areas manually pasted in from +U/-V image.<br />
The blue frame doesn't look much, but when set against the red/yellow, it might be passable.<br />
Do bear in mind this is cheating somewhat because the random noise will have gained a blue bias in the &quot;blue&quot; corner anyway.<br />
It might mean there's some hope though.<br />
I've also tried applying a bit of gamma-correction to brighten the image overall.<br />
<br />
I guess in processing a movie sequence it would theoretically be possible to use data from adjacent frames in a &quot;3D&quot; filter to pull more signal out of the noise. As a matter of principle I'd prefer to treat the frames in isolation as far as possible though.<br />
<br />
<br />
Goodnight.<br />
<br />
<br />
<br />
<br />
Andrew Steer - 24 April 2008<br />
<br />
<strong>Thoughts on the detail of the chroma and line-structure</strong><br />
<br />
Within a single <em>field</em>, the chroma phase (for arbitrary U and V magnitudes) has a complete periodicity of 4 lines. This is equivalent to 15 lines in the HD1080 scan. Chroma sampling with the 1080 line structure will therefore result in a beat frequency of 15 lines. Now the interlaced field similarly has a periodicity of 4 lines (within its field), but is 180 degrees offset. This will create a second beat structure offset by around 7.5 lines from that resulting from the first frame.<br />
Result: a beat structure with 7.5-line periodicity for arbitrary U and V magnitudes.<br />
For U-only or V-only colours different symmetries result in these beats dropping out (we see these &quot;cleaner&quot; colour structures on some of the frames from the UYVY file).<br />
<br />
I had previously worried that the 180 degree chroma-phase-offset of the interlaced field ought to have the net effect of cancelling the chroma if two fields are integrated equally. The fact that my method works at all is proof that some element of this assumption is wrong. Playing around in Excel it soon becomes apparent that although the fields partially-cancel, analysing vertically the phases are not 180 degrees out of phase, but 180<strong>+45</strong> degrees because of the physical displacement of the interleave (maybe 180-45 degrees; I've not been totally rigorous). The sum of two sinewaves with 180+45 degrees offset is another sinewave still with significant amplitude (actually 1/sqrt(2) times the original amplitude). So the fact that the colour from interlaced fields <em>can</em> be decoded crudely by treating the combined image as if a single-field should not be surprising.<br />
This method though, as previously suggested, will worsen the chroma noise - and markedly worsen cross-colour when compared to a smarter approach. Because the vertically-filtered (i.e. vertically-smoothed/averaged) chroma-signal will have phase errors with respect to any individual scanline, the 2D filter (while useful for recovering chroma) would not recover the luminance cleanly. At the moment I'm only using a simple 1D filter to recover luminance - and this looses more sharpness than an ideal 2D filter (and/or Transform decoding) might.<br />
<br />
Although a telecine with higher vertical resolution (e.g. around 1500 lines) would be nice, I am clarifying my ideas for some clever signal-processing tricks we can do with what we've got... for reducing cross-colour (and perhaps for recovering more of the line structure).<br />
<br />
The apparent darkening of some post-processed high-chroma-strength lines which I observed on the previous page are probably due to systematic gamma-errors in the telerecording and telecine process. This is reasonable considering that the post-processed images have come out too dark overall.<br />
<br />
The interlaced line-structure in the low-chroma areas cannot be explained by the previous argument. Among photographers, it is known that film can be pre-sensitised by one exposure, making it more sensitive to a future exposure. I wonder whether this kind of effect might explain the visibility of line-structure in low-chroma areas? Where the first field (somewhat blurred by the spot-wobble) presensitises the film in advance of the second field, making the latter structure more dominant?<br />
Would any film-expert like to comment?<br />
In coloured areas where the chroma from adjacent scanlines in mis-aligned this effect may reasonably be expected to be less significant.<br />
<br />
<br />
Nothing especially new or clever, but here's a couple more recent images, after processing with tighter bandwidth filters to improve sharpness and reduce cross-colour. On the Blodwyn image I've applied a 1.3 gamma correction before processing. The Jimmy image has a 1.15 gamma correction.<br />
<br />
<!-- ws:start:WikiTextLocalImageRule:15:&lt;img src=&quot;../files/jimmy_15line1MHz_24Apr.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="../files/jimmy_15line1MHz_24Apr.jpg" alt="jimmy_15line1MHz_24Apr.jpg" title="jimmy_15line1MHz_24Apr.jpg" /><!-- ws:end:WikiTextLocalImageRule:15 --><br />
<br />
<br />
<!-- ws:start:WikiTextLocalImageRule:16:&lt;img src=&quot;../files/blodwyn_15line1MHz_24Apr.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="../files/blodwyn_15line1MHz_24Apr.jpg" alt="blodwyn_15line1MHz_24Apr.jpg" title="blodwyn_15line1MHz_24Apr.jpg" /><!-- ws:end:WikiTextLocalImageRule:16 --><br />
Both images still with forced -U / +V. Other colours to follow ... all in good time!<br />
<br />
That's it for now.<br />
<br />
<br />
Andrew Steer - 25 April 2008<br />
<br />
<strong>Small tweaks</strong><br />
<br />
The mission is now to work towards a video-demo (albeit only with -U/+V colours for now).<br />
I've implemented the gamma-adjustment in my software, since I can't be messing with PaintShopPro manually for 800+ frames!<br />
I've also re-remembered of course that digital video has luminance between digital counts of 16 (nominal black) and 235 (nominal white), so played around with the gamma and colour saturation etc so that when I expand the final image from 16-235 to 0-255 for PC display, everything is sweet.<br />
<br />
I had been bothered that while my improved colour filter (yesterday) appeared to have cleaned things up in general, it had also reintroduced some alternate-line hue variations... and today found a little typo in my code which was responsible, and have fixed it.<br />
<br />
Next steps (tomorrow) are:<br />
to better modularise the code so I can open frames programmatically<br />
introduce new frame-buffers so I can store the decoded image natively in UYVY, rather than purely in RGB.<br />
write a routine to save (append) the frame back to a very big file<br />
write a simple loop to step through 857 frames, opening/decoding/saving.<br />
<br />
It's all fairly straightforward.<br />
<br />
<!-- ws:start:WikiTextLocalImageRule:17:&lt;img src=&quot;../files/colzoneplate_1p5MHzBW_15lin.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="../files/colzoneplate_1p5MHzBW_15lin.jpg" alt="colzoneplate_1p5MHzBW_15lin.jpg" title="colzoneplate_1p5MHzBW_15lin.jpg" /><!-- ws:end:WikiTextLocalImageRule:17 --><br />
For reference: latest chroma-filter characteristics.<br />
<br />
<br />
Andrew Steer - 26 April 2008<br />
<br />
<strong>Processing 32-second movie-sequence</strong><br />
<br />
Software prepared for batch-processing of frames into a 1080HD UYVY format. Various tests performed.<br />
<br />
Bulk-processing of frames 5-200 began at 17:47<br />
It is currently taking approx. 30 seconds per frame.<br />
I haven't yet made any significant speedups to the program!<br />
<br />
Having watched the first few frames go by, there is evidence that some frames are displaced by a line or so.<br />
This is not too surprising considering the fast-pull-down film feed... but will add some extra complexity to methods to recover the U and V phases to yeild the full colour gamut...<br />
<br />
Time to go and prepare dinner. While colourising, my computer is too sluggish to use for anything much else anyway!<br />
<br />
22:23 - got to frame 370<br />
<br />
<br />
Andrew Steer - 27 April<br />
<br />
Update: apparently the computer finished at 04:18 this morning!<br />
<br />
On a newer PC the program runs in 2/3rd the time despite a slightly slower processor speed.<br />
&quot;Early indications show&quot; that on a dual-core processor you can run two copies of my program simultaneously with near-full performance of both instances.<br />
<br />
A colour-recovered UYVY file has been supplied to James. Assuming it all reads back okay, Jonathan will get to see it later in the week.<br />
I look forward to your feedback.<br />
<br />
Agreed the next technical step is phase-sensitive decoding - ie full-gamut. Bring out those blues, purples, bright greens, etc.!<br />
<br />
<br />
Andrew Steer - 28 April 2008<br />
<br />
<strong>Wow ... amazing ... awesome ... incredible!</strong><br />
<br />
James and the good folks at BBC R&amp;D Kingswood Warren have just returned to me a standard-definition DVD version of my colour-recovered clip. I'm really pleased with it!<br />
I've played it on my computer. I've played it on a domestic (CRT) television and DVD player.<br />
I've watched all 34 seconds over and over :-)<br />
<br />
As an engineer and a perfectionist, there's always room for improvement. Apart from getting the rest of the colours back, the only real issue seems to be the frame-to-frame fluctuation in the saturation of the orangey-reds (the green is rock-steady), and a lesser weak pink/green fluctuation on the skin-tones. This is no worse than many VHS video-recordings I've seen - and the sharpness and other aspects of the picture are vastly superior to that.<br />
<br />
I have one idea how we might improve this saturation-fluctuation fundamentally (tweak the vertical chrominance filter - I suspect with the present implementation there's some U/V mixing which (thanks partly to the limited vertical resolution of the HD scan) depends on the stage of the PAL frame-sequencing - it may also sort itself out with phase-sensitive decoding, or just with forced <em>quadrature</em> decoding), although the fudge would be just to use some inter-frame chroma-smoothing.<br />
<br />
Overall, <em>extremely</em> encouraging though.<br />
<br />
I saw some odd white flecks in Jimmy's clothing and wondered what was going on ... then realised they were chroma (or luma?) keying artifacts on the original programme material!<br />
<br />
If we just ironed out the overall vertical jitter, you'd never guess it had come off film - let alone <em>black and white</em> film! Of course the recovered colours are electronic (TV) colours rather than &quot;film&quot; colours too.<br />
<br />
Shall sleep well.<br />
<br />
<br />
Andrew Steer - 29 April 2008<br />
<br />
<strong>Competition!</strong><br />
<br />
Looks like I have some competition from Richard Russell !<br />
<br />
Some of my earlier comments on &quot;forced quadrature&quot; decoding are probably a bit misleading. Given the resampling the in vertical direction, the U and V will <em>not</em> be in quadrature for arbitrary HD scanlines. What I do probably mean is more of a low-pass (substantially sub-1MHz bandwidth) &quot;flywheel&quot; on the U and V phasing - and then do phase-sensitive decoding wrt that reference.<br />
<br />
Very confident that we can use the PAL information to <strong>perfectly</strong> measure and correct for film weave and jitter... in <em>most cases</em>. In the absence of suitable chroma (reasonably strong mixed U/V colours) we might have to fall back to a less precise luminance-based approach (which is also susceptable to interference from camera pan). Correcting for weave and jitter would cosmetically help the material look more &quot;video&quot; and less &quot;film&quot; ... but would also be the gateway to inter-frame awareness or adaptation.<br />
<br />
I can think of lots of steps towards doing a really nice technically perfect job towards getting the full gamut back and curing many other ills in the process. What would be good though is a simple hack... a shortcut.<br />
<br />
<em>Some</em> of what-should-be-blue is markedly out-of-gamut when decoded in -U/+V. This depends though on the colour, and the luminance, and of course the noise - which is poor for dark colours. It would probably be possible to use this information to <em>assist</em> phase-determinations, but whether it is robust enough to use without much manual intervention remains to be seen.<br />
<br />
Simple hack to highlight out-of-gamut (-ve blue):<br />
<br />
<!-- ws:start:WikiTextLocalImageRule:18:&lt;img src=&quot;../files/blodwyn_gamut.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="../files/blodwyn_gamut.jpg" alt="blodwyn_gamut.jpg" title="blodwyn_gamut.jpg" /><!-- ws:end:WikiTextLocalImageRule:18 --><br />
In this image I've simply highlighted the colours which decode to negative-blue components when interpreted as -U/+V.<br />
<br />
This shows marginal detection on the denim, but a strong reading on the purples in the mirrors at the extreme right/top of the image.<br />
<br />
The highlighting doesn't tell you which quadrant the colours should be, but does give an indication of where the -U/+V assumption looks particularly poor. A more careful measure of gamut may help inform an auto-phase-tracking algorithm for the U and V carriers - although I would prefer a more fundamental approach if possible. Where the existing red/orange butts up to the blue jeans it should be possible to track the phase-changes anyway - provided the signal-to-noise is good enough.<br />
<br />
<br />
Question for Jonathan and/or James.<br />
The file you supplied from the VT begins with colour-bars (I need to write a small program to open the file properly so I can browse the rest of it). <strong>Do the film telerecordings include these initial colour-bars?</strong> If they do, those colour-bars would form a very useful calibration screen. Otherwise we will have to build up a calibration from the real imagery.<br />
<br />
<br />
For Richard's benefit, here's a closeup 1:1 crop of the Jimmy image processed as per my movie demo (native 16...235 luminance):<br />
<br />
<!-- ws:start:WikiTextLocalImageRule:19:&lt;img src=&quot;../files/jimmy_15lineCORRECT_1MHz5.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="../files/jimmy_15lineCORRECT_1MHz5.jpg" alt="jimmy_15lineCORRECT_1MHz5.jpg" title="jimmy_15lineCORRECT_1MHz5.jpg" /><!-- ws:end:WikiTextLocalImageRule:19 --><br />
<br />
<br />
Andrew Steer - 30 April 2008<br />
<br />
Thinking about the colours which &quot;flicker&quot; in saturation in the movie. They are mostly the orangey colours which are mixed U and V, with the V component markedly stronger than the U (in terms of subcarrier amplitude, at least). I had suspected, and proved today (details another time) that some of the V is cross-coupling into the U filter. A better vertical filter characteristic may help slightly. I wonder whether some ratios of U and V lead to particularly challenging beats with the vertical HD scanning...? On the other hand, it is curious that the whole area of colour seems to flash (in saturation) in time with itself, rather than vertical bands which flash in anti-phase. So maybe it's not related to the telecine sampling?<br />
<br />
Is there any chance that the source VT has been through two cascaded PAL codings? I'll have to check whether there's any instability on the VT reference. It is possible that the non-phase-aware decoding emphasises any latent coding errors? I tried to check whether the instability is at all periodic with the 4-frame PAL sequence, but so far the results are inconclusive.<br />
If all else fails, it could be brute-force smoothed across frames in post-processing anyway.<br />
<br />
<br />
Also looking at ideas for calibrating the absolute phase, in order to recover the full gamut. It's not going to be easy!<br />
Unless we can pull out a few frames with very large area saturated colour, I'm probably going to need to develop rather better chroma/luma separating filters. At present, sufficient diagonal (U/V aligned) luma transitions still &quot;bang&quot; the filter enough to cause massive local phase-errors!<br />
<br />
<br />
Andrew Steer - 1st May 2008<br />
<br />
<strong>Phase analysis</strong><br />
<br />
No new work today. Other things cropped up.<br />
Instead you get a picture of things I was visuallising yesterday...<br />
<br />
<!-- ws:start:WikiTextLocalImageRule:20:&lt;img src=&quot;../files/frame50_V.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="../files/frame50_V.jpg" alt="frame50_V.jpg" title="frame50_V.jpg" /><!-- ws:end:WikiTextLocalImageRule:20 --><br />
Image showing the filtered V carrier, from a Jimmy image. The original luminance is overlaid faintly in blue for reference.<br />
Easy on the solid orange block, but it'll take some more work to establish the colour phasing from the whole area of the picture from a mix of typical image-content... note also how the filter is &quot;banged&quot; by luminance edges. :-)<br />
<br />
<!-- ws:start:WikiTextLocalImageRule:21:&lt;img src=&quot;../files/frame50_U.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="../files/frame50_U.jpg" alt="frame50_U.jpg" title="frame50_U.jpg" /><!-- ws:end:WikiTextLocalImageRule:21 --><br />
Image showing U-filter (1:2 scale).<br />
<br />
In general, there will be gaps and glitches to smooth over. If the opposite phase colours crop up then an antiphase signal will appear. Owing to cross-colour artificial / false patterns also appear.<br />
Some pairs of frames align well enough to subtract out the luminance (assuming no movement), but often the film-judder is an issue.<br />
I have more ideas though. Watch this (Wiki)space!<br />
<br />
<br />
<br />
Andrew Steer - 3 May 2008<br />
<br />
<strong>Anti-Cross-Colour</strong> (WAS-ACC)<br />
<br />
Just a brief experiment to test an idea...<br />
<br />
<!-- ws:start:WikiTextLocalImageRule:22:&lt;img src=&quot;../files/frame50_U_th1p5_special.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="../files/frame50_U_th1p5_special.jpg" alt="frame50_U_th1p5_special.jpg" title="frame50_U_th1p5_special.jpg" /><!-- ws:end:WikiTextLocalImageRule:22 --><br />
<br />
Yes. It's a crude implementation, but I've verified that my previously-alluded-to anti-cross-colour idea basically works.<br />
With a bit of refinement, I'm hoping I can get similar results to the Transform Decoder ... without infringing the patent ;-)<br />
<br />
<!-- ws:start:WikiTextLocalImageRule:23:&lt;img src=&quot;../files/jimmy_15lineCORRECT_1MHz5_a.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="../files/jimmy_15lineCORRECT_1MHz5_a.jpg" alt="jimmy_15lineCORRECT_1MHz5_a.jpg" title="jimmy_15lineCORRECT_1MHz5_a.jpg" /><!-- ws:end:WikiTextLocalImageRule:23 --><br />
Jimmy, with my new anti-cross-colour (ACC) beta. Compare with the ordinarily filtered image earlier on this page. :-)<br />
<br />
<!-- ws:start:WikiTextLocalImageRule:24:&lt;img src=&quot;../files/jimmy_15LV_1MHz5_antiCC.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="../files/jimmy_15LV_1MHz5_antiCC.jpg" alt="jimmy_15LV_1MHz5_antiCC.jpg" title="jimmy_15LV_1MHz5_antiCC.jpg" /><!-- ws:end:WikiTextLocalImageRule:24 --><br />
Crop from 768x576 rescaled Jimmy, with ACC. It's still quite a crude version of my intended algorithm, but quite effective nonetheless.<br />
I can't really optimise it further until I've made the implementation more rigorous.<br />
This is still processed as a stand-alone frame.<br />
<br />
To clarify: at the moment the luma is still decoded with a simple 1D 4.43MHz notch filter. The chroma is being decoded with a 2D filter, and the anti-cross-colour is only in the chroma path. In principle, with a proper PAL signal symmetrical paths could be used for both - but this is not realistic for the film colour-recovery (at least not at the present scanning resolution) where the chroma data from two fields is beating and aliassed.<br />
<br />
<br />
Normal version for comparison:<br />
<!-- ws:start:WikiTextLocalImageRule:25:&lt;img src=&quot;../files/jimmy_15LV_1MHz5_norm.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="../files/jimmy_15LV_1MHz5_norm.jpg" alt="jimmy_15LV_1MHz5_norm.jpg" title="jimmy_15LV_1MHz5_norm.jpg" /><!-- ws:end:WikiTextLocalImageRule:25 --><br />
As previous image, but without anti-cross-colour processing. The image processing should be identical in all other respects (they're both nominally the same c. 1.5MHz bandwidth colour filters).<br />
<br />
<br />
That's an interesting diversion, and one I'd been meaning to try for a very long time.<br />
<br />
<br />
Then again, I still think it's a long stretch to get to phase-calibration (full-gamut) from arbitrary images.<br />
There's got to be an easier way...?<br />
<br />
Can we just scan through a whole programme and hope we can pick out a handful of frames which are very rich in relatively constant colours?<br />
Have a separate applet for doing the calibration, possibly with some kind of human-guidance...?<br />
<br />
<br />
<em>Need to work on a crack for the colour gamut!</em><br />
Think I should go to Brighton tomorrow for some inspiration from the sea...<br />
<br />
<br />
Andrew Steer - 4 May 2008<br />
<br />
<strong>Thoughts on Harmonic distortion</strong><br />
<br />
I've been continuing to ponder on why the orange square doesn't come out the right colour, and that it's luminance doesn't decode cleanly with my simple horizontal notch filter.<br />
Jonathan Wood helpfully commented (private correspondence) on a correlation between the chroma saturation fluctuation and large net picture luminance changes.<br />
<br />
I have noted before on the wiki that the only reason for the luminance not filtering properly would be distortion of the chroma subcarrier sine waveform, and that this would be caused by net gamma errors or -more seriously- by black-level clipping.<br />
<br />
Thanks to Jonathan's comment, a penny has just dropped.<br />
It is reasonable (given my experience of analog video systems and monitors) to suppose that although the net picture brightness is fairly stable, there may be momentary black-level fluctuations resulting from large-area luma changes.<br />
This would change the chroma distortion - and hence decoded saturation.<br />
<br />
I think it would be very much worth my while analysing for subcarrier harmonic distortion products and subtracting them out of the picture before decoding. This may allow us to recover &quot;below black&quot; levels of subcarrier ;-) and may fix several issues.<br />
<br />
I will also try and improve my U and V vertical filters as I know there are still some spurious responses which could cause a degree of U/V mixing.<br />
<br />
<br />
As another aside, I really need to write a quick program to open and display the VT reference material. This would probably provide further hints too.<br />
<br />
<br />
Andrew Steer - 5 May 2008<br />
<br />
<strong>Sorry - another distraction</strong> :-)<br />
<br />
When looking at the ACC images, I couldn't help but get annoyed by the luminance filter ringing, causing the &quot;shadowing&quot; around Jimmy's sleeve, Jimmy's hair, and on the &quot;Edison Lighthouse&quot; lettering. So I copied and pasted and modified the ACC code to do much the same trick with the luminance. Voila:<br />
<br />
<!-- ws:start:WikiTextLocalImageRule:26:&lt;img src=&quot;../files/jimmy_15LV_1MHz5_antiCCLR.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="../files/jimmy_15LV_1MHz5_antiCCLR.jpg" alt="jimmy_15LV_1MHz5_antiCCLR.jpg" title="jimmy_15LV_1MHz5_antiCCLR.jpg" /><!-- ws:end:WikiTextLocalImageRule:26 --><br />
<br />
This is still a simplified version of the idea, but (IMHO) it looks rather good.<br />
<br />
<!-- ws:start:WikiTextLocalImageRule:27:&lt;img src=&quot;../files/jimmy_15LV_antiCCLR_sml.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="../files/jimmy_15LV_antiCCLR_sml.jpg" alt="jimmy_15LV_antiCCLR_sml.jpg" title="jimmy_15LV_antiCCLR_sml.jpg" /><!-- ws:end:WikiTextLocalImageRule:27 --><br />
Here's a 768x576 scaled copy of the whole frame. This is the raw output from todays version of my code, apart from a final pre-resize vertical filter to tame the raster structure.<br />
<br />
Further good news: the new processing is computationally fairly lightweight, and hasn't affected the runtime too adversely.<br />
Has made the code a bit longer, and harder to follow though.<br />
<br />
Possibly a bit too &quot;beta&quot; to let loose on the next movie sequence (particularly the luma processing for which any artifacts will be more noticeable). Definitely verifies the general principle though.<br />
<br />
<br />
<em>Need</em> to get back to the problem of absolute-phase and full-gamut.<br />
Am I procrastinating?<br />
<br />
<br />
[Insert from Jonathan Wood]<br />
<strong>Comparison of graded recovered colour</strong> (before the last few enhancements) :-<br />
<!-- ws:start:WikiTextLocalImageRule:28:&lt;img src=&quot;../files/VTfilmcomp.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="../files/VTfilmcomp.jpg" alt="VTfilmcomp.jpg" title="VTfilmcomp.jpg" /><!-- ws:end:WikiTextLocalImageRule:28 --><br />
<br />
Jonathan Wood - 5 May 2008<br />
<br />
(might be time to start a new page!)<br />
<br />
<br />
Hint taken.<br />
<br />
This page is now continued on <a class="wiki_link" href="/Towards%20full-gamut">Towards full-gamut</a> ...
  </div>

<div id="pageEditor" class="editorWrapper editorLayer">
  <iframe id="target_editor" name="target_editor" src="/s/blank.html" style="width:0px;height:0px;border:0"></iframe>
    <form action="/page/edit/Single-frame+decoding+continued" method="post" class="editorForm" id="editorForm"><input type="hidden" name="wikispacesFormToken" value="1b92f9c1904153d3de106d8a1a5d184e86ae566b"/><div class="movkp"><input type="text" class="form-control" name="wikispaces_user_id" value="user-1528198006"/></div><div class="mimw"><input type="text" class="form-control" name="goto" autocomplete = "off"/></div><div class="jowic"><input type="text" class="form-control" name="mode" autocomplete = "off"/></div><div class="jowic"><input type="text" class="form-control" name="version" autocomplete = "off"/></div><div class="movkp"><input type="text" class="form-control" name="pageComments" autocomplete = "off"/></div><div class="jovise"><input type="text" class="form-control" name="saveAndContinue" autocomplete = "off"/></div><div class="wsh"><input type="text" class="form-control" name="comment" autocomplete = "off"/></div><div class="movkp"><input type="text" class="form-control" name="commentsDisabled" autocomplete = "off"/></div><div class="mimw"><input type="text" class="form-control" name="contentPresent" autocomplete = "off"/></div><div class="jowic"><input type="text" class="form-control" name="editorCleanup" autocomplete = "off"/></div><div class="jovise"><input type="text" class="form-control" name="WikispacesEditorContent" autocomplete = "off"/></div><input type="hidden" name="wikispacesASFormToken" value="9c8c7d523cc1ea231f7cf6145952c253d048d514"/>
    <input type="hidden" title="goto" name="2c8ef3346549481458b1cfc954a7a9c3a490b851" value=""/>
    <input type="hidden" title="mode" name="b10df50dd342fe41f643e8d7b41cef02bbdcddfe" autocomplete="off" value="visual"/>
    <input type="hidden" title="version" name="02a7879fb7894e3db5695de66d3276112347a466" autocomplete="off" value="23500363"/>
    <input type="hidden" title="pageComments" name="79d200671029c7252a6be4b9dcec62f3fbf2ed3c" autocomplete="off" value=""/>
    <input type="hidden" title="saveAndContinue" name="fb00c01e64bd58c4fe2609987934f4281d0eebec" value="0"/>
    <input type="hidden" title="comment" name="acd1a775a0edee1efe41c9e58340d5ab5a372cbc" value=""/>
    <input type="hidden" title="commentsDisabled" name="53aec30e6c6fad4cd7276b676267ace6c1f592f8" autocomplete="off" value=""/>
    <input type="hidden" title="contentPresent" name="40881837575ac5971e9cf48885e2142cb88db43e" autocomplete="off" value=""/>
    <input type="hidden" title="editorCleanup" name="1c6bb902ce049947d9c22b97799289b0e4050aa7" autocomplete="off" value=""/>

    <textarea id="wsMainEditor" title="content" class="noContentHide" name="ff0114b38b194272befbc49823816a29ceab7612" style="width: 100%; position: absolute; top: -50000px; left: -50000px;" autocomplete="off"></textarea>

  <noscript>
    <h2>Javascript Required</h2>
    <p>You need to enable Javascript in your browser to edit pages.</p>
  </noscript>

  </form>
  
  
  <div id="plainTextEditor" style="position:relative;display:none" class="editorLayer" >
    <textarea id="textEditor" class="autogrow"></textarea>
    <p style="clear:both;" align="right"><a href="http://helpcenter.wikispaces.com/customer/portal/articles/1959131-wikitext">help on how to format text</a></p>
  </div>
</div>




  </div>
  <div class="commentColumn WikispacesStream"><div class="WikispacesContent WikispacesBs3"><div class="commentList"></div></div></div>
</div>

  




<script type="text/template" id="js-event-template">
  <small>
    <%- startDateShortFormat %>
    <a href="<%- ws.common.pathFor('event', 'view', id) %>" class="WikispacesDialogLink">
      <%- ws.common.truncate(title, 15) %>
    </a>
  </small>
</script>

<script type="text/template" id="js-reply-template">
  <div class="tc-timeline-comment media">

    <a class="pull-left userLink" href="<%- userCreated.url %>">
      <img src="<%- userCreated.imageUrl %>" width="30" height="30" class="author-avatar" alt="" />
    </a>
    <div class="media-body" data-id="<%= id %>">
      <% if (ws.context.user.canAdministerWiki) { %>
        <i class="tc-delete-comment fa fa-trash-o contextual-command destroy-message ws-tip" title="Delete reply"></i>
      <% } %>
      <div class="tc-box-name-date">
        <span class="tc-commenter"><a href="<%- userCreated.url %>"><%- userCreated.username %></a></span>
        <% if (smartDate == '__live__') { %>
        <abbr style="border-bottom-style: none;" class="timeago tc-comment-date" title="<%- (new Date(parseInt(dateCreated) * 1000)).toISOString() %>">
          <%- (new Date(parseInt(dateCreated) * 1000)).toDateString() %>
        </abbr>
        <% } else { %>
          <abbr style="border-bottom-style: none;" class="tc-comment-date"><%- smartDate %></abbr>
        <% } %>
      </div>
      <% if (body) { %>
      <p>
        <%= body %>
      </p>
      <% } %>
    </div>
  </div>
</script>

<script type="text/template" id="js-share-template">
  <div class="tc-timeline-block tc-<%= ws.stream.typeToBlockType(sharedType) %>-block" <%= (ws.stream.hideTimeline ? 'style="padding-left: 0px;"' : '') %>>

    <% if (!ws.stream.hideTimeline) { %>
      <div class="tc-timeline-icon">
        <i class="fa fa-<%= ws.stream.typeToIcon(sharedType) %>"></i>
      </div>
      <div class="tc-timeline-triangle-man"></div>
    <% } %>

    <div class="tc-timeline-box" data-id="<%= id %>">
      <div class="media">
        <a class="pull-left userLink" href="<%- userCreated.url %>">
          <img src="<%- userCreated.imageUrl %>" width="48" height="48" class="author-avatar media-object" alt="" />
        </a>

        <div class="media-body">

          <div class="tc-stream-dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
              <i class="fa fa-chevron-down"></i>
            </a>
            <ul class="dropdown-menu dropdown-menu-right" role="menu">
              <% if (ws.context.user.id) { %>
              <li>
                <a class="js-toggle-monitor" tabindex="-1" href="#">
                  <i class="fa-fw fa fa-eye"></i>
                  <span><%= monitored ? 'Start Monitoring' : 'Stop Monitoring' %></span>
                </a>
              </li>
              <% } %>

              <% if (ws.context.user.canAdministerWiki) { %>
              <li>
                <a class="js-toggle-lock" tabindex="-1" href="#">
                  <i class="fa-fw fa fa-lock"></i>
                  <span><%= locked ? 'Unlock Replies' : 'Lock Replies' %></span>
                </a>
              </li>
              <% if (sharedType == 'discussion' || sharedType == 'comment' || sharedType == 'event') { %>
              <li>
                <a class="js-destroy-share" tabindex="-1" href="#">
                  <i class="fa-fw fa fa-trash-o"></i>
                  Delete <%= ws.stream.typeToName(sharedType) %>
                </a>
              </li>
              <% } %>
              <% } %>
            </ul>
          </div>

          <div class="tc-timeline-box-header ws-reveal media-heading">
              <h3 class="tc-box-title">
              <% if (typeof adminLink !== 'undefined' && adminLink && ws.context.user.canAdministerWiki) { %>
                <a href="<%- adminLink %>"><%- title %></a>
              <% } else { %>
                <%- title %>
              <% } %>
              <% if (typeof startDate !== 'undefined' && startDate) { %> - <%= startDateShortFormat %> <%= ws.stream.getYearFromStartDate(startDate) %><% } %>
              </h3>
              <div class="tc-box-name-date">
                <% if (ws.context.instance.isTesClassroom) { %>
                  <%- userCreated.username %>
                <% } else { %>
                  <a class="author-name" href="<%- userCreated.url %>"><%- userCreated.username %></a>
                <% } %>
                <% if (typeof recipients !== 'undefined' && recipients) { %>
                  <i class="fa fa-angle-right"></i>
                  <% if (typeof recipientsLink !== 'undefined') { %>
                    <a href="<%- recipientsLink %>"><%- recipients %></a>
                  <% } else { %>
                    <span class="recipients"><%- recipients %></span>
                  <% } %>
                <% } %>
                <% if (smartDate == '__live__') { %>
                  <abbr style="border-bottom-style: none;" class="timeago tc-block-date" title="<%= (new Date(parseInt(dateCreated) * 1000)).toISOString() %>">
                    <%= (new Date(parseInt(dateCreated) * 1000)).toDateString() %>
                  </abbr>
                <% } else { %>
                  <abbr style="border-bottom-style: none;" class="tc-block-date"><%- smartDate %></abbr>
                <% } %>
              </div>
          </div>

          <div class="<%= sharedType == 'comment' && !orphaned && !ws.stream.noCollapse ? 'hidden ' : '' %>tc-block-content">
            <div class="clearfix">
              <% if (typeof rangeActions !== 'undefined') { %>
                <div class="tc-range-actions">
                  <% for(var i = 0; i < rangeActions.length; i++) { %>
                  <%= ws.stream.rangeActionTemplate(rangeActions[i]) %>
                  <% } %>
                </div>
              <% } %>
              <% if (description) { %>
                <p><%= description %></p>
              <% } %>
            </div>
          </div>

          <% if (replyPages.length > 0 && !(replyPages.length === 1 && replyPages[0].digests.length === 0)) { %>
            <div class="tc-timeline-comments">
            <% for (var i = 0; i < replyPages.length; i++) { %>
              <% if (i == 0 && replyPages[i].more) { %>
                <a href="#" class="tc-show-more" onclick="ws.stream.pageReplies(<%= id %>, <%= replyPages[i].page + 1 %>); return false">Show more replies (<%= replyPages[i].more %> hidden) </a>
              <% } else { %>
                <div></div>
              <% } %>
              <% for (var j = 0; j < replyPages[i].digests.length; j++) { %>
                <%= ws.stream.replyTemplate(replyPages[i].digests[j]) %>
              <% } %>
            <% } %>
            </div>
          <% } %>

          <% if ((ws.stream.userCanPostMessage && !locked) || ws.context.user.canAdministerWiki) { %>
          <div class="tc-add-comment media <%= ws.stream.noCollapse ? 'add-active' : ''%>">
            <img src="<%- ws.context.user.imageUrlPrefix %>lg.jpg" width="30" height="30" class="pull-left author-avatar" alt="" />
            <div class="media-body">
              <textarea name="reply" placeholder="Comment" class="form-control form-control-tc ws-reveal <%= !ws.stream.noCollapse ? 'ws-unrevealed' : ''%> reply" /></textarea>
              <button type="button" class="btn-tc btn-info-tc btn-sm-tc add-reply">Post</button>
            </div>
          </div>
          <% } %>
        </div>

      </div>
    </div>
  </div>
</script>

<script type="text/template" id="js-range-action-template">
  <div>
    <strong><%- name %></strong>
    <% if (typeof(diffUrl) !== 'undefined') { %>
      <a href="<%- diffUrl %>">
    <% } %>
    <%= new Date(dateCreated * 1000).toLocaleString() %>
    <% if (typeof(diffUrl) !== 'undefined') { %>
      </a>
    <% } %>
    <% if (typeof(rangeText) !== 'undefined') { %>
      <div>
        <span class="commentExtent">
        <% if (typeof(diffUrl) !== 'undefined') { %>
          <a href="<%- diffUrl %>">
        <% } %>
        <%= rangeText %>
        <% if (typeof(diffUrl) !== 'undefined') { %>
          </a>
        <% } %>
        </span>
      </div>
    <% } %>
  </div>
</script>

<script type="text/template" id="js-stream-end-template">
  <div class="tc-timeline-block tc-end-block">
    <div class="tc-timeline-icon" style="margin-top: -10px;" />
    <div class="tc-timeline-box" style="visibility: hidden;">
      <p class="tc-box-title"></p>
    </div>
  </div>
</script>

<a name="discussion"></a>
<div class="timeline WikispacesBs3 tc-timeline-embedded show-border">
  <div class="timeline-line"></div>
    <div id="js-share-list">
    <div class="spinner hidden"><i class="fa fa-spinner fa-spin"></i></div>
  </div>
</div></div></div><div id="sentinel" style="clear:both"></div>        </div>
      </main>
    </div>
  </div>
</div>

<footer class="ws-theme-footer" role="contentinfo">
  <div class="ws-theme-container">
    <div class="ws-theme-footer-inner">
      <div class="WikiFooterNav WikiElement">
<a href="http://helpcenter.wikispaces.com/" rel="nofollow" class="js-help-trigger">Help</a> &middot;
<a href="../www.wikispaces.com/about">About</a> &middot;
<a href="../www.wikispaces.com/content/pricing" rel="nofollow">Pricing</a> &middot;
<a href="../www.wikispaces.com/privacy" rel="nofollow">Privacy</a> &middot;
<a href="../www.wikispaces.com/terms" rel="nofollow">Terms</a> &middot;
<a href="../www.wikispaces.com/site/help?url=https%3A%2F%2Fcolour-recovery.wikispaces.com%2FSingle-frame%2520decoding%2520continued%3FresponseToken%3D355a707743b05c58e0e13c68eb256a70" rel="nofollow"><strong>Support</strong></a> &middot;
<a href="/space/subscribe/upgrade"><strong>Upgrade</strong></a>
</div>      <div class="WikiLicense WikiElement">Contributions to https://colour-recovery.github.io/ are licensed under a <a rel="license" href="http://www.creativecommons.org/licenses/by-sa/2.5">Creative Commons Attribution Share-Alike 2.5 License</a>. <a rel="license" href="http://www.creativecommons.org/licenses/by-sa/2.5"><img src="../ssl.wikicdn.com/i/creativecommons/by-sa_2.5_80x15.png" width="85" height="15" alt="Creative Commons Attribution Share-Alike 2.5 License"/></a><br />Portions not contributed by visitors are Copyright 2018 Tangient LLC<br /><a href="https://www.tes.com/us/?utm_source=wikispaces&utm_medium=link&utm_campaign=US-52-footer">TES: The largest network of teachers in the world</a></div>    </div>
  </div>
</footer>


<script type="text/template" id="dialog-template">
<div class="modal fade" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-times"></i></button>
        <h4 class="modal-title"><%= header %></h4>
      </div>
      <div class="modal-body">
        <%= body %>
      </div>
    </div>
  </div>
</div>
</script>


<div id="js-help-template" class="hidden">
  <div class="ws-help">
    <div class="js-help-controls WikispacesContent WikispacesBs3">
      <a href="../www.wikispaces.com/site/gettingstarted/off" class="btn btn-default hidden js-getting-started-off pull-right">Turn off "Getting Started"</a>
      <ol class="breadcrumb">
        <li class="js-special-breadcrumb active">
          <a href="http://helpcenter.wikispaces.com/" data-breadcrumb="0">Home</a>
        </li>
        <li class="js-ellipsis hidden js-special-breadcrumb">
          ...
        </li>
        <li class="js-spinner hidden js-special-breadcrumb"><i class="fa fa-spinner fa-spin"></i></li>
      </ol>
    </div>
    <div class="ws-help-content wiki">Loading...</div>
  </div>
</div>
</div>
<script src="../ssl.wikicdn.com/s/nogz/6q86j8zz-common.min.js" type="text/javascript"></script>
<script src="../ssl.wikicdn.com/s/nogz/70163536-editorc.min.js" type="text/javascript"></script>
<script src="../ssl.wikicdn.com/s/nogz/85k7018k-stream.min.js" type="text/javascript"></script>
<script src="../ssl.wikicdn.com/s/nogz/91k8z207-contentbar.min.js" type="text/javascript"></script>
<script src="../ssl.wikicdn.com/s/nogz/395j1vq7-component.stream-vo.min.js" type="text/javascript"></script>
<script type="text/javascript">
<!--
ws.namespace('ws.attributes');
ws.namespace('ws.stream');
ws.attributes.DISCUSSION_COUNT = 39;
ws.attributes.pageId = 4056769;
ws.attributes.version = 23500363;
ws.attributes.showEditor = true;
ws.attributes.editUrl = "https:\/\/colour-recovery.wikispaces.com\/page\/edit\/Single-frame+decoding+continued?goto=https%3A%2F%2Fcolour-recovery.wikispaces.com%2FSingle-frame%2520decoding%2520continued";
ws.attributes.userCanEdit = false;
ws.stream.userCanPostMessage = false;
ws.stream.hideTimeline = true;
ws.stream.shareSource = "https:\/\/colour-recovery.wikispaces.com\/page\/shares\/Single-frame+decoding+continued";

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

jQuery(document).ready(function() {
  ws.common.addJsonNotices({"warning":[],"error":[],"info":[],"success":[]});
});

jQuery(document).ready(function() {
  ws.common.addNotice("<script type=\"text\/javascript\">function wsDismissBanner() { ws.common.removeNotice();  ws.cookie.set(\"wsFirstPartShutdown\", 1, {expires: 365 * 86400, domain: \".wikispaces.com\"}); return false;}$(\".ui-pnotify-closer\").remove();<\/script><i class=\"fa fa-times fa-fw ws-close\" onclick=\"wsDismissBanner();\"><\/i>It\u2019s time for us to say farewell\u2026 Classroom and Free Wikis are closing Soon!<br\/>Find out more about the full Wikispaces Site Closure <a href='http:\/\/blog.wikispaces.com' target='_top'>HERE<a\/>", "warning");
});

jQuery(document).ready(function($) {
  
  function tipPlacement() {
    return this.$element.closest('.ws-menu-bar .btn-group').is('.open') ? 'top' : 'bottom';
  }

  

  $('.ws-menu-bar').each(function() {
    var $menuBar = $(this);
    var $tagDropdown = $menuBar.find('.ws-tag-dropdown-menu');
    $menuBar.find('.tipme').tooltip({placement: tipPlacement, container: '.ws-menu-bar'});

    
    $menuBar.find('.ws-btn-more').click(ws.common.makeLinkClickFunction(function(e) {
      if ($(this).closest('.ws-menu-bar .btn-group').is('.open')) {
        ws.common.hideMorePageBar();
      } else {
        ws.common.showMorePageBar();
      }
    }));

    $menuBar.on('click', '.ws-tag-dropdown-toggle', ws.common.makeLinkClickFunction(function(e) {
      if ($(this).closest('.ws-menu-bar .dropdown').is('.open')) {
        ws.common.hideTagDropdown();
      } else {
        ws.common.showTagDropdown();
      }
    }));

    $(document.body).click(function(e) {
      var $target = $(e.target);
      if (!$target.closest('.ws-more-menu').closest('.ws-menu-bar').is($menuBar)
          || $target.closest('a').is('.WikispacesDialogLink')) {
        ws.common.hideMorePageBar();
      }
      if ($tagDropdown.length && !$target.closest('.ws-tag-dropdown-menu').is($tagDropdown)) {
        ws.common.hideTagDropdown();
      }
    });
    
  });
});


jQuery(document).ready(function($) {
  $('.ws-more-menu').on('click', 'a', function(e) {
    if ($(this).is('.disabled')) {
      e.preventDefault();
    }
  });
});


jQuery(document).ready(function() {
  ws.editor.canEdit = false;
  var editUrl = 'https://colour-recovery.github.io/page/edit/Single-frame+decoding+continued?goto=https%3A%2F%2Fcolour-recovery.wikispaces.com%2FSingle-frame%2520decoding%2520continued';

  jQuery('#js-edit-from-template').change(function() {
    window.location = ws.common.addUriParams(editUrl, [['template', jQuery(this).val()]]);
  });
});


jQuery(document).ready(function() {
  ws.editor.loadEditorLibs('../www.wikispaces.com/site/editorlibs/en/11kk95v9.js');
});


ws.editor.startEditor = function (moreCoreOptions, moreMainOptions) {
  ws.editor.canEdit = true;

  var coreOptions = {
    'content_css': ['../www.wikispaces.com/stylesheet/editori/217420326D.css']
  };

  // The stylesheet is passed in as a string, turn it into an array
  // Add bootstrap styles to the editor, if we are in a theme that has full screen bootstrap
  if (jQuery('body').is('.WikispacesBs3')) {
    coreOptions.content_css.push('../www.wikispaces.com//s/internal-bootstrap-body.css');
  }

  var mainOptions = {
    'wssave_cancel_url': '/Single-frame+decoding+continued',
    'wsimage_upload_url': 'https://colour-recovery.github.io/file/multiupload',
    'wsimage_max_file_size_mb': '50',
    'wsimage_page_view_group': ''
  };

  ws.editor.loadEditor(jQuery.extend(coreOptions, moreCoreOptions), jQuery.extend(mainOptions, moreMainOptions));
};

  var wikispaces_page_version = '23500363';

  jQuery(document).ready(function() {
    ws.editor.enableButtons();
  });



--></script><!-- w20 264 wki:80:82(3) tot:264:264(1) mem:4:41(81) dql:15:24(7) mog:4:4(1) -->

</body>
</html>