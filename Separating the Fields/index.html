<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="search" href="https://colour-recovery.github.io/space/opensearch" type="application/opensearchdescription+xml" title="Wikispaces Search (Colour Recovery Working Group Wiki)" />
<link rel="alternate" type="application/x-wiki" title="Edit This Page" href="/page/edit/Separating+the+Fields" />
<link rel="alternate" title="Colour Recovery Working Group - All Changes" href="https://colour-recovery.github.io/wiki/xmla?v=rss_2_0" type="application/rss+xml" />
<link rel="alternate" title="colour-recovery : Separating the Fields - Discussion" href="https://colour-recovery.github.io/message/xml/Separating+the+Fields?v=rss_2_0" type="application/rss+xml" />
<link rel="alternate" title="colour-recovery : Separating the Fields - Edits" href="https://colour-recovery.github.io/page/xml/Separating+the+Fields?v=rss_2_0" type="application/rss+xml" />
<link rel="microsummary" href="/page/microsummary/Separating+the+Fields/edits"/>
<link rel="microsummary" href="/page/microsummary/Separating+the+Fields/messages"/>
<script type="text/javascript">
  
if (typeof ws === 'undefined') ws = {};
ws.context = {
  instance: {
    id: '1',
    url: 'wikispaces.com',
    isMain: true,
    supportsGoogleDocs: false,
    isTesClassroom: false,
  },
  user: {
    id: '',
    username: '',
    status: '',
    locale: 'en',
    imageUrlPrefix: '../ssl.wikicdn.com/i/user_none_',
    isTeacher: false,
    canAdministerWiki: false,
  },
  wiki: {
    id: '110862',
    name: 'colour-recovery',
    text: 'Colour Recovery Working Group',
    module: 'B',
    isClassroom: false,
    isTesClassroom: false
    ,defaultSpaceId: 110862
    ,isWwwWiki: false
  },
  project: {
    id: '110862',
    name: ''
  },
  space: {
    id: '110862',
    name: 'colour-recovery',
    isDefaultSpace: true,
    isDefaultTemplate: false
  },

  environment_name: 'prod',

  path: {
    object: 'page',
    method: 'view',
    page: 'Separating the Fields',
    id: ''
  },

  settings: {
    main_domain: 'wikispaces.com',
    session_url: 'https://session.wikispaces.com/1/',
    asset_url_prefix: '../ssl.wikicdn.com',
    beta_features: false,
    isMobileSite: false,
    isUploadCapable: true,
    can_discuss: false,
    has_gdocs: false,
    isDialog: false,
    pwin: ''
  },
  clockSkewMillis: 1528197994050 - ((window.performance && window.performance.timing.responseStart > 0) ? window.performance.timing.responseStart : (new Date()).getTime())
}


// legacy javascript API variables, use the above instead
var wikispaces_isUserLoggedIn = !!ws.context.user.id;
var wikispaces_isMain = ws.context.instance.isMain;
var wikispaces_username = ws.context.user.username;
var wikispaces_spaceName = ws.context.space.name;
var wikispaces_projectName = ws.context.project.name;
var wikispaces_wikiName = ws.context.wiki.name;
var wikispaces_wikiText = ws.context.wiki.text;
var wikispaces_isDefaultSpace = ws.context.space.isDefaultSpace;
var wikispaces_method = ws.context.path.method;
var wikispaces_object = ws.context.path.object;
var wikispaces_page = ws.context.path.page;
var wikispaces_id = ws.context.path.id;
var wikispaces_domain = ws.context.instance.url;
var wikispaces_isUserOrganizer = false;
var wikispaces_main_domain = ws.context.settings.asset_url_prefix;
var wikispaces_asset_url_prefix = ws.context.settings.asset_url_prefix;
var wikispaces_beta_features = ws.context.settings.beta_features;
var wikispaces_isMobileSite = ws.context.settings.isMobileSite;
var wikispaces_isUploadCapable = ws.context.settings.isUploadCapable;
var wikispaces_can_discuss = ws.context.settings.can_discuss;
var wikispaces_has_gdocs = ws.context.settings.has_gdocs;

</script><title>Colour Recovery Working Group - Separating the Fields</title>
<meta charset="utf-8" />
<link rel="apple-touch-icon" sizes="144x144" href="../ssl.wikicdn.com/_/z6371z4x/i/logo-144.png" />
<link rel="apple-touch-icon" sizes="114x114" href="../ssl.wikicdn.com/_/j5j77xz3/i/logo-114.png" />
<link rel="apple-touch-icon" sizes="72x72" href="../ssl.wikicdn.com/_/vq8j5432/i/logo-72.png" />
<link rel="apple-touch-icon" href="../ssl.wikicdn.com/_/38515190/i/logo-57.png" />
<link rel="shortcut icon" href="../ssl.wikicdn.com/_/55v9k02z/i/logo-16.png" />
<style type="text/css">
/*
Based on: AquaFluid, http://wpthemepark.com/
Description: WP Theme AquaFluid by Sadish
Version: 1.0
Author: Sadish Balasubramanian
*/

/* Standard theme styles */
*, *:before, *:after {
  -webkit-box-sizing: border-box;
     -moz-box-sizing: border-box;
          box-sizing: border-box;
}
body {
  font-family: arial, helvetica, sans-serif;
  font-size: 14px;
  line-height: 20px;
  margin: 0;
}
.ws-theme-header-inner,
.ws-theme-body-inner,
.ws-theme-footer-inner,
.ws-theme-content-inner,
.ws-theme-sidebar-inner {
  position: relative;
}
.ws-theme-header-inner:after,
.ws-theme-body-inner:after,
.ws-theme-footer-inner:after,
.ws-theme-content-inner:after,
.ws-theme-sidebar-inner:after,
.ws-theme-menu-inner:after {
  content: " ";
  visibility: hidden;
  display: block;
  height: 0;
  clear: both;
}
.ws-theme-content, .ws-theme-sidebar {
  overflow-x: auto;
}
.ws-theme-footer {
  text-align: right;
}
.ws-theme-footer a, .ws-theme-footer a:hover {
  text-decoration: none;
}
@media (min-width: 768px) {
  .ws-theme-container {
    width: 750px;
    margin-right: auto;
    margin-left: auto;
  }
  .ws-theme-content {
    width: 550px;
    min-height: 384px;
    float: right;
  }
  .ws-theme-sidebar {
    width: 200px;
    float: left;
  }
}
@media (min-width: 992px) {
  .ws-theme-container {
    width: 970px;
  }
  .ws-theme-content {
    width: 770px;
    min-height: 496px;
  }
}
@media (min-width: 1200px) {
  .ws-theme-container {
    width: 1170px;
  }
  .ws-theme-content {
    width: 970px;
    min-height: 600px;
  }
}
/* End standard theme styles */
</style>
<style type="text/css">
/* Theme-specific styles */
body {
  background-color: #CDE;
}

.ws-theme-container {
  margin: 0 5px;
}

.ws-theme-header .WikiSearch .WikiSearchInput,
.ws-theme-sidebar .WikiSearch .WikiSearchInput,
.ws-theme-footer .WikiSearch .WikiSearchInput {
  width: 100%;
}

.ws-theme-header,
.ws-theme-sidebar,
.ws-theme-footer {
  color: #000000;
}
.ws-theme-header a,
.ws-theme-sidebar a,
.ws-theme-footer a {
  color: #0000FF;
  text-decoration: none;
}
.ws-theme-header a:hover,
.ws-theme-sidebar a:hover,
.ws-theme-footer a:hover {
  text-decoration: underline;
}
.ws-theme-header img,
.ws-theme-sidebar img,
.ws-theme-footer img {
  border: none;
}

.ws-theme-header-inner,
.ws-theme-body-inner,
.ws-theme-footer-inner {
  border: #CCC 1px solid;
}

.ws-theme-header,
.ws-theme-sidebar {
  display: none;
}

.ws-theme-body {
  padding-top: 8px;
}
.ws-theme-body-inner {
  border-bottom: none;
  background-color: #FFF;
}

.ws-theme-content {
  overflow-x: visible;
}
.ws-theme-content-inner {
  padding: 13px 15px 26px;
}

.ws-theme-footer {
  font-size: 12px;
  text-align: center;
  padding-bottom: 8px;
}
.ws-theme-footer-inner {
  padding: 10px 15px;
  background: #FFF;
  border-top-color: #000;
}
.ws-theme-footer .WikiLicense img {
  vertical-align: text-bottom;
}

@media (min-width: 768px) {
  body {
    background: #FAFBFC url(../ssl.wikicdn.com/_/68jv1944/i/theme_aqua_blue.jpg) repeat-x top fixed;
  }

  .ws-theme-container {
    width: auto;
    margin: 0 8px;
  }

  .ws-theme-header,
  .ws-theme-sidebar {
    display: block;
  }

  .ws-theme-header {
    display: block;
    padding-top: 20px;
  }
  .ws-theme-header-inner {
    height: 125px;
    padding: 25px 20px;
    background: #483d8b url(../ssl.wikicdn.com/_/xq2j142v/i/theme_aqua_header.jpg) repeat-x bottom;
    border-bottom: none;
  }
  .ws-theme-header .ws-theme-logo {
    float: right;
  }

  .ws-theme-body {
    padding-top: 0;
  }
  .ws-theme-body-inner {
    border-top: none;
    background-color: #EEE;
  }
  .ws-theme-body-inner:before {
    content: " ";
    display: block;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 200px;
    background-color: #FFF;
    border-left: 1px solid #CCC;
  }

  .ws-theme-content {
    width: auto;
    margin-left: 200px;
    float: none;
  }
  .ws-theme-content-inner {
    float: left;
    width: 100%;
    padding: 13px 15px 26px;
  }

  .ws-theme-sidebar-inner {
    padding: 0 10px;
  }
  .ws-theme-sidebar .WikiActions {
    list-style-type: none;
    padding: 0;
    margin: 0;
  }
  .ws-theme-sidebar .WikiActions > li {
    padding: 2px;
  }
  .ws-theme-sidebar .WikiCustomNav ol {
    padding-left: 16px;
  }
  .ws-theme-sidebar .WikiCustomNav ol.includePageList {
    padding-left: 0;
  }
  .ws-theme-sidebar .WikispacesNavbar {
    margin: 0 -10px;
    padding: 0 10px;
  }
  .ws-theme-sidebar .ws-theme-nav-edit {
    color: #666;
    text-align: center;
  }
  .ws-theme-sidebar .ws-theme-nav-edit a {
    color: inherit;
  }

  .ws-theme-footer-inner {
    border-top-color: #CCC;
    background: #FFF url(../ssl.wikicdn.com/_/2z687q19/i/theme_aqua_top.gif) repeat-x top;
  }
}

/* End theme-specific styles */
</style>
<link rel="stylesheet" href="../www.wikispaces.com/stylesheet/viewi/217420326D.css" type="text/css" />
<link rel="stylesheet" href="../ssl.wikicdn.com/s/nogz/9jvvjv40-internal-bootstrap.css" type="text/css" />
<link rel="stylesheet" href="../ssl.wikicdn.com/s/nogz/vz033906-internal.css" type="text/css" />
<script src="../ssl.wikicdn.com/s/nogz/84014v41-top.min.js" type="text/javascript"></script>

<script type="text/javascript">
  var _gaq = _gaq || [];

  var wsGoogleAccount = 'UA-80504-1';
  _gaq.push(['_setAccount', wsGoogleAccount]);
  _gaq.push(['_gat._anonymizeIp']);
  _gaq.push(['_setDomainName', 'wikispaces.com']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_setCustomVar', 2, 'Authenticated', 'Guest', 2]);
  _gaq.push(['_trackPageview']);
</script></head>
<body><a href="#WikiContent" class="hidden sr-only sr-only-focusable">Skip to main content</a><div id="js-fixed-header-holder" class="fixed"><div class="WikispacesContent WikispacesBs3" role="banner">
      
    <div class="ws-main-top-nav visible-xs">
    <div class="navbar navbar-static-top" style="margin-bottom: 0;">
      <div class="container">
                <div class="navbar-header">
          <div class="visible-xs pull-left">
            <a href="/space/menu" class="WikispacesDialogLink btn navbar-btn">
              <i class="fa fa-bars"></i>
            </a>
          </div>
          <div class="visible-xs pull-right js-globalnav-popover-container">
                        <a href="../www.wikispaces.com/site/signin?goto=https%3A%2F%2Fcolour-recovery.wikispaces.com%2FSeparating%2520the%2520Fields%3FresponseToken%3D6aed8731ecd80dae97b2d3d852d42b56" class="btn navbar-btn ws-mobile-guest-username js-globalnav-popover-trigger">
              guest
            </a>
                        <div class="hidden js-globalnav-popover-content">
              <div class="WikispacesContent WikispacesBs3">
                <div class="WikiInternalHeaderNav noHide">
  <div class="WikiInternalHeaderNavMenu">
                          
                  <span class="WikiInternalHeaderNavMenuArea"><a href="../www.wikispaces.com/user/join?goto=https%3A%2F%2Fcolour-recovery.wikispaces.com%2Fspace%2Fjoin" rel="nofollow" class="WikispacesXDomainDialogLink">Join</a></span>

          <span class="divider">|</span>
        
        <span class="WikiInternalHeaderNavMenuArea"><a class="js-help-trigger" rel="nofollow" href="http://helpcenter.wikispaces.com/">Help</a></span>

        <span class="divider">|</span>
      
      <span class="WikiInternalHeaderNavMenuArea"><a href="../www.wikispaces.com/site/signin?goto=https%3A%2F%2Fcolour-recovery.wikispaces.com%2FSeparating%2520the%2520Fields%3FresponseToken%3D6aed8731ecd80dae97b2d3d852d42b56" rel="nofollow" class="WikispacesXDomainDialogLink">Sign In</a></span>
      </div>
</div>              </div>
            </div>
          </div>
          <div class="ws-navbar-middle-xs">
            <div class="navbar-brand" role="navigation">
              <a href="../www.wikispaces.com/" class="ws-logo"></a>
              <i class="fa fa-angle-right"></i>
              <a href="https://colour-recovery.github.io/">Colour Recovery Working Group</a>
                              <i class="fa fa-angle-right"></i> <a href="https://colour-recovery.github.io/home">Home</a>
              
            </div>
          </div>
                    <form action="/search/view" method="post" class="navbar-form ws-include-xs pull-left ws-navbar-search hidden-xs" role="search"><input type="hidden" name="wikispacesFormToken" value="d3d38a5272af1b9556e4941596c14178d8cd8cd2"/><input type="text" class="form-control search-query" name="q" value="" placeholder="Search" /> </form>
                  </div>
      </div>
    </div>
  </div>
      <div class="hidden-xs"><div class="WikiInternalHeaderNav WikiElement floating">
  <div class="WikiInternalHeaderNavMenu">
                                    <span class="WikiInternalHeaderNavMenuArea guestUserName">guest</span><span class="slideMarker divider">|</span>
        
                  <span class="WikiInternalHeaderNavMenuArea"><a href="../www.wikispaces.com/user/join?goto=https%3A%2F%2Fcolour-recovery.wikispaces.com%2Fspace%2Fjoin" rel="nofollow" class="WikispacesXDomainDialogLink">Join</a></span>

          <span class="divider">|</span>
        
        <span class="WikiInternalHeaderNavMenuArea"><a class="js-help-trigger" rel="nofollow" href="http://helpcenter.wikispaces.com/">Help</a></span>

        <span class="divider">|</span>
      
      <span class="WikiInternalHeaderNavMenuArea"><a href="../www.wikispaces.com/site/signin?goto=https%3A%2F%2Fcolour-recovery.wikispaces.com%2FSeparating%2520the%2520Fields%3FresponseToken%3D6aed8731ecd80dae97b2d3d852d42b56" rel="nofollow" class="WikispacesXDomainDialogLink">Sign In</a></span>
      </div>
</div></div>
  </div></div><div id="js-fixed-header-offset">
<header class="ws-theme-header" role="banner">
  <div class="ws-theme-container">
    <div class="ws-theme-header-inner">
      <div class="ws-theme-logo">
        <a href="https://colour-recovery.github.io/" class="WikiLogo WikiElement"><img src="../logo.jpg" alt="Colour Recovery Working Group" /></a>      </div>
    </div>
  </div>
</header>

<div class="ws-theme-body">
  <div class="ws-theme-container">
    <div class="ws-theme-body-inner">
      <nav class="ws-theme-sidebar" role="navigation">
        <div class="ws-theme-sidebar-inner">
          <div class="ws-theme-menu">
            <div class="ws-theme-menu-inner">
              <ul class="WikiActions WikiElement WikiControls">
    <li id="WikiActionHome"><div><span class="WikiActionSupplemental" style="float: right;"></span><a href="https://colour-recovery.github.io/"><i class="fa fa-home fa-fw"></i></a><a href="https://colour-recovery.github.io/">Wiki Home</a></div></li>
    <li id="WikiActionChanges"><div><span class="WikiActionSupplemental" style="float: right;"></span><a href="/wiki/changes"><i class="fa fa-clock-o fa-fw"></i></a><a href="/wiki/changes">Recent Changes</a></div></li>
    <li id="WikiActionPagesAndFiles"><div><span class="WikiActionSupplemental" style="float: right;"></span><a href="/space/content"><i class="fa fa-file-text-o fa-fw"></i></a><a href="/space/content">Pages and Files</a></div></li>
    <li id="WikiActionMembers"><div class="js-member-link"><span class="WikiActionSupplemental" style="float: right;"></span><a href="/wiki/members"><i class="fa fa-user fa-fw"></i></a><a href="/wiki/members">Members</a></div></li>
</ul>
              <form action="/search/view" method="post" class="WikiSearch WikiElement" role="search"><input type="text" class="form-control WikiSearchInput" name="q" value="" placeholder="Search" /> </form>              <div class="WikiCustomNav WikiElement wiki"><ul><li><h3><a class="wiki_link" href="/Home">Home</a></h3>
</li><li><a class="wiki_link_ext" href="http://colour-recovery.github.io/message/list/home" rel="nofollow">General Announcements</a></li><li><a class="wiki_link" href="/Members">Members</a></li><li><a class="wiki_link" href="/An%20examination%20of%20source%20material">An examination of source material</a></li><li><a class="wiki_link" href="/Background%20information">Background information</a></li><li><a class="wiki_link" href="/Tutorials">Tutorials</a></li><li><a class="wiki_link" href="/Utilities">Utilities</a></li><li><a class="wiki_link" href="/Previous%20work">Previous work</a></li><li><a class="wiki_link" href="/Current%20work">Current work</a></li><li><a class="wiki_link" href="/Future%20work">Future work</a></li></ul></div>              <div class="ws-theme-nav-edit">
                              </div>
            </div>
          </div>
        </div>
      </nav>
      <main class="ws-theme-content" role="main">
        <div class="ws-theme-content-inner">
          <div class="contentBox"><div class="innerContentBox" id="WikiContent">

<script type="text/template" id="comment-footer-template">

<div class="commentFooter modal-footer">
  <div class="pull-left">
    <button type="button" class="btn btn-default btn-sm previous"><i class="fa fa-arrow-left"></i></button>
    <button type="button" class="btn btn-default btn-sm next"><i class="fa fa-arrow-right"></i></button>
  </div>
  <% if (ws.context.user.canAdministerWiki && !ws.comments.Manager.readOnly) { %>
  <div class="pull-right">
    <button type="button" class="btn btn-default btn-sm remove">Remove</button>
  </div>
  <% } %>
</div>

</script>

<script type="text/template" id="comment-content-template">
<div class="ws-box commentView">
  <div class="comment-close">
    <button type="button" class="closeme close" aria-hidden="true"><i class="fa fa-times"></i></button>
  </div>
  <div class="commentHeader">
    <p class="ws-stream-meta command-context">
      <a class="userLink userLinkPicture" href="<%= userCreated.url %>"><img class="userPicture" src="<%= userCreated.imageUrl %>" width="16" height="16"></a>
      <a href="<%= userCreated.url %>"><%= userCreated.username %></a>
      <% if (smartDate == '__live__') { %>
      <abbr class="timeago" title="<%= (new Date(parseInt(dateCreated, 10) * 1000)).toISOString() %>">
        <%= dateCreated %>
      </abbr>
      <% } else { %>
        <%- smartDate %>
      <% } %>
      <% if (ws.context.user.canAdministerWiki && ws.comments.Manager.readOnly) { %>
        <i class="fa fa-trash-o contextual-command delete ws-tip" title="Delete Comment"></i>
      <% } %>
    </p>
  </div>

  <div class="commentBody">
    <div class="commentContent">
      <%= description %>
    </div>

      <% for(i = 0; i < replyPages.length; i++) { %>
        <% for(var j = 0; j < replyPages[i].digests.length; j++) { %>
      <div class="commentReply" data-id="<%= replyPages[i].digests[j].id %>">
        <p class="ws-stream-meta command-context">
          <a class="userLink userLinkPicture" href="<%= replyPages[i].digests[j].userCreated.url %>"><img class="userPicture" src="<%= replyPages[i].digests[j].userCreated.imageUrl %>" width="16" height="16"></a>
          <a href="<%= replyPages[i].digests[j].userCreated.url %>"><%= replyPages[i].digests[j].userCreated.username %></a>
          <% if (smartDate == '__live__') { %>
          <abbr class="timeago" title="<%= (new Date(parseInt(replyPages[i].digests[j].dateCreated, 10) * 1000)).toISOString() %>">
            <%= new Date(parseInt(replyPages[i].digests[j].dateCreated, 10) * 1000).toLocaleString() %>
          </abbr>
          <% } else { %>
            <%- smartDate %>
          <% } %>
          <% if (ws.context.user.canAdministerWiki) { %>
          <i class="fa fa-trash-o contextual-command delete-reply ws-tip" title="Delete Reply"></i>
          <% } %>
          </p>
        <div class="commentContent"><%= replyPages[i].digests[j].body %></div>
      </div>
        <% } %>
      <% } %>

      <form class="reply commentReply">
        <div class="form-group">
          <textarea name="reply" placeholder="Reply" class="form-control" /></textarea>
        </div>
        <div class="btn-toolbar">
          <button type="submit" class="btn btn-primary btn-sm" name="go" value="1">Post</button>

          <% if (ws.context.user.id) { %>
            <% if (monitored) { %>
            <button type="button" class="btn btn-default btn-sm pull-right toggle-monitor ws-tip active" title="You are monitoring replies."><i class="fa fa-eye"></i></button>
            <% } else { %>
            <button type="button" class="btn btn-default btn-sm pull-right toggle-monitor ws-tip" title="You are not monitoring replies."><i class="fa fa-eye"></i></button>
            <% } %>
          <% } %>
          <% if (ws.context.user.canAdministerWiki) { %>
            <% if (locked) { %>
            <button type="button" class="btn btn-default btn-sm pull-right toggle-lock ws-tip active" title="Replies are not allowed."><i class="fa fa-lock"></i></button>
            <% } else { %>
            <button type="button" class="btn btn-default btn-sm pull-right toggle-lock ws-tip" title="Replies are allowed."><i class="fa fa-lock"></i></button>
            <% } %>
          <% } %>

          <i class="fa fa-spinner fa-spin spinner pull-right hidden"></i>
        </div>
      </form>
   </div>

   
<div class="commentFooter modal-footer">
  <div class="pull-left">
    <button type="button" class="btn btn-default btn-sm previous"><i class="fa fa-arrow-left"></i></button>
    <button type="button" class="btn btn-default btn-sm next"><i class="fa fa-arrow-right"></i></button>
  </div>
  <% if (ws.context.user.canAdministerWiki && !ws.comments.Manager.readOnly) { %>
  <div class="pull-right">
    <button type="button" class="btn btn-default btn-sm remove">Remove</button>
  </div>
  <% } %>
</div>

</div>
</script>

<script type="text/template" id="comment-composer-template">
<div class="ws-box commentView">
  <div class="commentComposer">
    <div class="comment-close">
      &nbsp;<button type="button" class="close closeme" aria-hidden="true"><i class="fa fa-times"></i></button>
    </div>
    <div class="commentHeader">
      <p class="ws-stream-meta command-context">
        <img class="userPicture" src="<%= userCreated.imageUrl %>" width="16" height="16">
        <a href="#" onclick="return false;"><%= userCreated.username %></a>
      </p>
    </div>
    <div class="commentBody">
      <textarea name="comment" class="compose form-control" placeholder="Comment"/></textarea><br/>
      <div class="btn-toolbar">
        <button type="button" class="btn btn-default btn-sm monitored active pull-right" style="margin-left: 6px" onclick="jQuery(this).toggleClass('active')"><i class="fa fa-eye"></i></button>
        <button type="button" class="btn btn-default btn-sm locked btn-toggle pull-right" onclick="jQuery(this).toggleClass('active')"><i class="fa fa-lock"></i></button>
        <button type="button" class="btn btn-primary btn-sm closeme">Save</button>
      </div>
    </div>
  </div>

  
<div class="commentFooter modal-footer">
  <div class="pull-left">
    <button type="button" class="btn btn-default btn-sm previous"><i class="fa fa-arrow-left"></i></button>
    <button type="button" class="btn btn-default btn-sm next"><i class="fa fa-arrow-right"></i></button>
  </div>
  <% if (ws.context.user.canAdministerWiki && !ws.comments.Manager.readOnly) { %>
  <div class="pull-right">
    <button type="button" class="btn btn-default btn-sm remove">Remove</button>
  </div>
  <% } %>
</div>

</div>
</script>

<script type="text/template" id="comment-proxy-template">
<div class="comment-proxy">
  <span class="commentUser">
  <% if (userCreated) { %>
    <img class="userPicture" src="<%= userCreated.imageUrl %>" width="16" height="16">
  <% } else { %>
    <img class="userPicture" src="<%= ws.context.user.imageUrlPrefix %>sm.jpg" width="16" height="16">
  <% } %>
  </span>
  <span class="commentReplies"><%= 1 + _(replyPages).reduce(function(memo, page){ return memo + page.digests.length; }, 0) %></span>
</div>
</script>

<div class="ws-menu-bar WikiControls WikispacesContent WikispacesBs3">
  
    <h1 class="pageTitle"><a href="/Separating+the+Fields">Separating the Fields</a></h1>
      <div class="btn-group pull-right">
          <span class="btn btn-default disabled tipme" title="you do not have permission to edit this page"><i class="fa fa-pencil fa-fw"></i> Edit</span>          <a class="btn btn-default tipme" title="view 40 discussion posts" href="/Separating+the+Fields#discussion"><i class="fa fa-comments fa-fw"></i> 40</a>          <a class="btn btn-default tipme" title="view 34 revisions" href="/page/history/Separating+the+Fields"><i class="fa fa-clock-o fa-fw"></i> 34</a>          <a class="btn btn-default ws-btn-more dropdown-toggle tipme" title="more options" href="/page/menu/Separating+the+Fields"><i class="icon-height-only fa-fw"></i>&hellip;</a>        <ul class="ws-more-menu dropdown-menu dropdown-menu-right">
              <li class=" dropdown"><a class=" ws-tag-dropdown-toggle" href="/page/tags/Separating+the+Fields"><span class="pull-right">0</span> <i class="fa fa-tag fa-fw"></i> Tags</a>
          <div class="dropdown-menu dropdown-menu-right ws-tag-dropdown-menu">
          



<form action="#" name="WikiTagForm" class="WikiTagForm"><input type="hidden" name="wikispacesFormToken" value="0b04b96684b83eb6ddd80fbbed8c25ce995e5705"/><input type="hidden" name="wikispacesFormToken" value="0b04b96684b83eb6ddd80fbbed8c25ce995e5705"/>
  <div class="WikiTagList">
    <i class="fa fa-tag ws-action"></i>
        <ul class="list-unstyled">
          <li>No tags</li>
        </ul>
      </div>
  </form>      </div>
    </li>
              <li class="divider"></li>
            <li class=""><a class=" WikispacesDialogLink" href="https://colour-recovery.github.io/wiki/addmonitor?monitorLink=page%3ASeparating%20the%20Fields"><i class="fa fa-eye fa-fw"></i> Notify</a>
    </li>
        <li class=""><a class=" WikispacesDialogLink" href="/page/rss/Separating+the+Fields"><i class="fa fa-rss fa-fw"></i> RSS</a>
    </li>
        <li class=""><a class="" href="/page/links/Separating+the+Fields"><i class="fa fa-link fa-fw"></i> Backlinks</a>
    </li>
              <li class="divider"></li>
            <li class=""><a class="" href="/page/code/Separating+the+Fields"><i class="fa fa-code fa-fw"></i> Source</a>
    </li>
        <li class=""><a class="" href="/Separating+the+Fields?f=print"><i class="fa fa-print fa-fw"></i> Print</a>
    </li>
        <li class=""><a class="" href="/page/pdf/Separating+the+Fields"><i class="fa fa-cloud-download fa-fw"></i> Export (PDF)</a>
    </li>
      </ul>  </div>
  </div>




  <textarea class="form-control" id="autosaveContent" style="display:none;" rows="1" cols="1"></textarea>
  <div id="autosavePrompt" style="display:none;"></div>

<div class="commentContainer">
  <div class="commentSubject">
  <div class="wiki wikiPage" id="content_view">
  <br />
<br />
<br />
<br />
<u><strong>21st June 2008</strong></u><br />
<br />
I have attempted to utilise the vertical frequency at 288 c/aph to separate out the original fields.<br />
<br />
Since this frequency is locked to the original scan-line structure, but at half the rate, it should be possible to make use of it to separate out the original chroma fields.<br />
<br />
If you could extract the 288 c/aph signal cleanly across the frame, then you could enhance it's contrast and simply multiply it with the filtered chroma signal to extract one of the fields. Then use the inverse waveform to extract the other field.<br />
<br />
Since the chroma is not affected by aliasing, it should in principle be possible to reconstruct the original chroma fields exactly.<br />
Though this would not be the case with the luma, you could still do an approximate reconstruction with some type of interpolation method.<br />
<br />
Recolourising the two fields separately would obviously allow significant advantages for panning shots etc...<br />
<br />
In practice you would no doubt need to do some more sophisticated signal processing on the 288 c/aph waveform rather than simply enhancing it's contrast. It should be possible though to generate a clean vertical signal in the form of a deformed square-wave (or perhaps a deformed sinusoidal waveform would be better?)<br />
<br />
Here is my first (very crude) attempt at extracting a field:<br />
<br />
<!-- ws:start:WikiTextLocalImageRule:0:&lt;img src=&quot;/file/view/TOTP36_field_sep.jpg/34773429/656x501/TOTP36_field_sep.jpg&quot; alt=&quot;(c) BBC&quot; title=&quot;(c) BBC&quot; style=&quot;height: 501px; width: 656px;&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/TOTP36_field_sep.jpg/34773429/656x501/TOTP36_field_sep.jpg" alt="TOTP36_field_sep.jpg" title="TOTP36_field_sep.jpg" style="height: 501px; width: 656px;" /></td></tr><tr><td class="imageCaption">(c) BBC</td></tr></table><!-- ws:end:WikiTextLocalImageRule:0 --><br />
I have simply multiplied the unprocessed frame (luma and chroma) with the extracted 288 c/aph waveform several times over.<br />
<br />
I think you can see the single field 3.75 HD line periodicity starting to come out in the vertical chroma signal (at least in some regions of the frame).<br />
<br />
<br />
<u><strong>22nd June 2008<br />
<br />
Origin of the 288 c/aph signal</strong></u><br />
<br />
The signal at 288 c/aph is not as simple as it may first appear.<br />
<br />
It could be an inter-modulation product of the two vertical chroma signals caused by non-linearities in the film recorder.<br />
However if this were the case, you would expect it to be weak, and to always have a corresponding subtractive inter-modulation frequency at 144 c/aph.<br />
Instead we see a strong signal at 288 c/aph, usually with no corresponding signal at 144 c/aph (although occasionally a very weak signal appears).<br />
<br />
Thus I have concluded that the 288 c/aph frequency has a different origin, as follows:<br />
<br />
Since the spot wobble mechanism has the effect of squaring-off the vertical waveform, it introduces a strong Fourier component at 288 c/aph, as this is the basic building block frequency on which the square edges are constructed.<br />
I believe it's this frequency that we're seeing in the source spectrum.<br />
<br />
If this is the case then the phase will always be locked to the line-structure, regardless of differing chroma content between fields.<br />
Self-evidently, the only phase change possible would be a 180 degree shift.<br />
This could be a major snag, since I don't want to end up with a mish-mash of the two fields when I try separating them.<br />
<br />
I'm not sure what the probability of such a phase change is intra-frame. If it's low then it could be ignored; but otherwise some compensating mechanism would need to be applied.<br />
<br />
This is not the end of the story when it comes to the 288 c/aph frequency, since Andrew Steer discovered that it is also present in areas of the frame with no chroma.<br />
This signal obviously has a different origin, and I would tentatively suggest it could be due to a slight difference in exposure between the two fields. This would introduce a Fourier component at 288 c/aph, whose presence would be accentuated by the HD sampling, since this filters off most of the higher Fourier components or shifts them onto different aliasing frequencies.<br />
<br />
The presence of this luminance-derived signal is very useful, since it could potentially be used to do an approximate luma separation of the two fields. (N.B. The sub-Nyquist sampling has thrown away some of the information, so it would not be possible to do an exact separation.)<br />
<br />
<br />
<strong><u>24th June 2008</u></strong><br />
<br />
Today I have generated a waveform plot of a typical column section from the TOTP footage, 30 HD pixels in height:<br />
<!-- ws:start:WikiTextLocalImageRule:1:&lt;img src=&quot;/file/view/single_column_waveform.jpg/34802039/667x328/single_column_waveform.jpg&quot; alt=&quot;(C) BBC&quot; title=&quot;(C) BBC&quot; style=&quot;height: 328px; width: 667px;&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/single_column_waveform.jpg/34802039/667x328/single_column_waveform.jpg" alt="single_column_waveform.jpg" title="single_column_waveform.jpg" style="height: 328px; width: 667px;" /></td></tr><tr><td class="imageCaption">(C) BBC</td></tr></table><!-- ws:end:WikiTextLocalImageRule:1 --><br />
<br />
This column has uniform colour, and is taken from the BBC1 sign behind Jimmy Saville.<br />
<br />
The edges have become smoothed by the HD sampling; but you can see fairly clearly that the original signal would've had a series of plateau-levels with abrupt transitions inbetween. In other words a step-wave.<br />
<br />
There is simply no way to generate such a waveform without a strong component at 288 c/aph: so I am more convinced than ever that the 288 c/aph signal we see in the source material is mostly generated from the raster, and not an intermodulation of the two chroma signals.<br />
<br />
It's amplitude is ofcourse related to the saturation of the chroma signal, and hence the relative saturations between fields may influence it's phase. It still must remain firmly anchored to the scan-lines however: so the only rephasing possible is a 180 degree shift (at least where there is chroma).<br />
<br />
I'm not yet sure whether this 288 c/aph signal will maintain a horizontal frequency of zero throughout the frame, and this will need further study. Visual inspection so far reveals that it appears to have this property.<br />
<br />
It can also be seen from the waveform plot that there should be a fairly strong Fourier component at 144 c/aph, and evidence of this can be seen below:<br />
<!-- ws:start:WikiTextLocalImageRule:2:&lt;img src=&quot;/file/view/Intermodulation.jpg/34790121/659x738/Intermodulation.jpg&quot; alt=&quot;&quot; title=&quot;&quot; style=&quot;height: 738px; width: 659px;&quot; /&gt; --><img src="/file/view/Intermodulation.jpg/34790121/659x738/Intermodulation.jpg" alt="Intermodulation.jpg" title="Intermodulation.jpg" style="height: 738px; width: 659px;" /><!-- ws:end:WikiTextLocalImageRule:2 --><br />
<br />
This is a 144 c/aph vertical band-pass filter of the composite signal (rotated through 90 degrees for ease of filtering).<br />
The filtered signal appears in the upper left quadrant, and it seems to have a horizontal frequency of zero.<br />
<br />
If it were an intermodulation product between the chroma signals, it would have a horizontal frequency of 2*Fsc; so instead it must be a remnant of the scan-line structure.<br />
(It is &quot;contaminated&quot; by a slight chequerboard pattern, which could have originated from a very small chroma intermodulation component.)<br />
<br />
N.B. It seems I was wrong about the absence of a 144 c/aph signal, it's just too small to show up above the noise bed most of the time.<br />
<br />
<br />
<strong><u>30th June 2008</u></strong><br />
<br />
I have now analysed a new image from V.C. Mohan (shown below), in which he has attempted to correct the geometric distortion using slightly different parameters than before.<br />
<!-- ws:start:WikiTextLocalImageRule:3:&lt;img src=&quot;/file/view/TOTPDEPIN2.jpg/34864643/678x430/TOTPDEPIN2.jpg&quot; alt=&quot;&quot; title=&quot;&quot; style=&quot;height: 430px; width: 678px;&quot; /&gt; --><img src="/file/view/TOTPDEPIN2.jpg/34864643/678x430/TOTPDEPIN2.jpg" alt="TOTPDEPIN2.jpg" title="TOTPDEPIN2.jpg" style="height: 430px; width: 678px;" /><!-- ws:end:WikiTextLocalImageRule:3 --><br />
<br />
Here are the horizontal and vertical 1D frequency spectra summed over all lines/columns:<br />
<!-- ws:start:WikiTextLocalImageRule:4:&lt;img src=&quot;/file/view/TOTPDEPIN2_horiz_freq_2.jpg/34864647/511x177/TOTPDEPIN2_horiz_freq_2.jpg&quot; alt=&quot;Horizontal frequency spectrum (C) BBC&quot; title=&quot;Horizontal frequency spectrum (C) BBC&quot; style=&quot;height: 177px; width: 511px;&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/TOTPDEPIN2_horiz_freq_2.jpg/34864647/511x177/TOTPDEPIN2_horiz_freq_2.jpg" alt="TOTPDEPIN2_horiz_freq_2.jpg" title="TOTPDEPIN2_horiz_freq_2.jpg" style="height: 177px; width: 511px;" /></td></tr><tr><td class="imageCaption">Horizontal frequency spectrum (C) BBC</td></tr></table><!-- ws:end:WikiTextLocalImageRule:4 --><br />
<!-- ws:start:WikiTextLocalImageRule:5:&lt;img src=&quot;/file/view/TOTPDEPIN2_%28crop%29_vert_freq_3.jpg/34864665/510x195/TOTPDEPIN2_%28crop%29_vert_freq_3.jpg&quot; alt=&quot;Vertical frequency spectrum (C) BBC&quot; title=&quot;Vertical frequency spectrum (C) BBC&quot; style=&quot;height: 195px; width: 510px;&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/TOTPDEPIN2_%28crop%29_vert_freq_3.jpg/34864665/510x195/TOTPDEPIN2_%28crop%29_vert_freq_3.jpg" alt="TOTPDEPIN2_(crop)_vert_freq_3.jpg" title="TOTPDEPIN2_(crop)_vert_freq_3.jpg" style="height: 195px; width: 510px;" /></td></tr><tr><td class="imageCaption">Vertical frequency spectrum (C) BBC</td></tr></table><!-- ws:end:WikiTextLocalImageRule:5 --><br />
The horizontal correction appears very good, with the symmetry of the side-bands having almost been restored.<br />
The vertical correction however is still way off, with severely distorted side-bands at both 72 and 216 c/aph (outlined in red).<br />
<br />
My attempt at phase-sensitive recolourisation produced the following result:<br />
<!-- ws:start:WikiTextLocalImageRule:6:&lt;img src=&quot;/file/view/img129_with_TOTPDEPIN2_%28crop_1%29_%28col%29_SR14161000%2C_Fsc_4303619_%28crop%29.jpg/34864637/639x426/img129_with_TOTPDEPIN2_%28crop_1%29_%28col%29_SR14161000%2C_Fsc_4303619_%28crop%29.jpg&quot; alt=&quot;&quot; title=&quot;&quot; style=&quot;height: 426px; width: 639px;&quot; /&gt; --><img src="/file/view/img129_with_TOTPDEPIN2_%28crop_1%29_%28col%29_SR14161000%2C_Fsc_4303619_%28crop%29.jpg/34864637/639x426/img129_with_TOTPDEPIN2_%28crop_1%29_%28col%29_SR14161000%2C_Fsc_4303619_%28crop%29.jpg" alt="img129_with_TOTPDEPIN2_(crop_1)_(col)_SR14161000,_Fsc_4303619_(crop).jpg" title="img129_with_TOTPDEPIN2_(crop_1)_(col)_SR14161000,_Fsc_4303619_(crop).jpg" style="height: 426px; width: 639px;" /><!-- ws:end:WikiTextLocalImageRule:6 --><br />
<br />
This shows a wide horizontal band of good colour across Jimmy's face, thus confirming that the correction is working well horizontally.<br />
The curvature of the distortions tend to flatten out towards the left edge of the frame, in the same way that we have seen previously.<br />
Thus the vertical scan-line deflection is still not properly corrected.<br />
<br />
If a full geometric correction can be achieved, it should be possible to deinterlace the two fields at least in regards to the chroma signal.<br />
<br />
<br />
<u><strong>16th July 2008</strong></u><br />
<br />
Having played around a bit with Richard's software, I have come to the conclusion that a more sophisticated pre-distortion of the reference may improve it's performance, especially if it could be made adaptive to the global frequency content in the source.<br />
<br />
It may be more helpful to think of pre-distorting the source material rather than the reference (though it amounts to the same thing):<br />
By setting each frame's distortion parameters to keep the horizontal and vertical chroma spikes at approximately the same position in the frequency spectrum, this should produce a rough correction for EHT breathing.<br />
It should also produce more uniform slope angles in the chroma signal, and this would hopefully result in less cross-colour.<br />
<br />
To test this theory I have used the two distorted frames produced by V.C. Mohan, which take the test image closer to the original geometry, and produce a more uniform subcarrier frequency over the frame.<br />
<br />
To do a proper test I needed to move the left-side of frame away from Richard's area of pre-distorted reference: so I used the Helix YUV format instead of raw headerless YUV. The file header produced a horizontal picture phase shift, which accomplished what I wanted.<br />
<br />
Here are the colour-restored images from the original test frame, and Mohan's two attempts at correction:<br />
<!-- ws:start:WikiTextLocalImageRule:7:&lt;img src=&quot;/file/view/TOTP36_%28col%29.jpg/35040629/TOTP36_%28col%29.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="/file/view/TOTP36_%28col%29.jpg/35040629/TOTP36_%28col%29.jpg" alt="TOTP36_(col).jpg" title="TOTP36_(col).jpg" /><!-- ws:end:WikiTextLocalImageRule:7 --><br />
<!-- ws:start:WikiTextLocalImageRule:8:&lt;img src=&quot;/file/view/TOTPDEPIN_%28col%29.jpg/35040645/TOTPDEPIN_%28col%29.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="/file/view/TOTPDEPIN_%28col%29.jpg/35040645/TOTPDEPIN_%28col%29.jpg" alt="TOTPDEPIN_(col).jpg" title="TOTPDEPIN_(col).jpg" /><!-- ws:end:WikiTextLocalImageRule:8 --><br />
<!-- ws:start:WikiTextLocalImageRule:9:&lt;img src=&quot;/file/view/TOTPDEPIN2_%28col%29.jpg/35040657/TOTPDEPIN2_%28col%29.jpg&quot; alt=&quot;&quot; title=&quot;&quot; /&gt; --><img src="/file/view/TOTPDEPIN2_%28col%29.jpg/35040657/TOTPDEPIN2_%28col%29.jpg" alt="TOTPDEPIN2_(col).jpg" title="TOTPDEPIN2_(col).jpg" /><!-- ws:end:WikiTextLocalImageRule:9 --><br />
<br />
It can be seen that both Mohan's distorted frames correct the errors on the BBC1 sign very well.<br />
His 2nd distorted frame also seems to correct the errors in the right-hand margin, even though they lie within the area of pre-distorted reference.<br />
<br />
To understand what was going on here I had a look at the quadrant maps for each image:<br />
<!-- ws:start:WikiTextLocalImageRule:10:&lt;img src=&quot;/file/view/TOTP36_%28quad%29.jpg/35040677/TOTP36_%28quad%29.jpg&quot; alt=&quot;Original Image (C) BBC&quot; title=&quot;Original Image (C) BBC&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/TOTP36_%28quad%29.jpg/35040677/TOTP36_%28quad%29.jpg" alt="TOTP36_(quad).jpg" title="TOTP36_(quad).jpg" /></td></tr><tr><td class="imageCaption">Original Image (C) BBC</td></tr></table><!-- ws:end:WikiTextLocalImageRule:10 --><br />
<!-- ws:start:WikiTextLocalImageRule:11:&lt;img src=&quot;/file/view/TOTPDEPIN_%28quad%29.jpg/35040705/TOTPDEPIN_%28quad%29.jpg&quot; alt=&quot;Mohan's 1st Attempt (C) BBC&quot; title=&quot;Mohan's 1st Attempt (C) BBC&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/TOTPDEPIN_%28quad%29.jpg/35040705/TOTPDEPIN_%28quad%29.jpg" alt="TOTPDEPIN_(quad).jpg" title="TOTPDEPIN_(quad).jpg" /></td></tr><tr><td class="imageCaption">Mohan's 1st Attempt (C) BBC</td></tr></table><!-- ws:end:WikiTextLocalImageRule:11 --><br />
<br />
<!-- ws:start:WikiTextLocalImageRule:12:&lt;img src=&quot;/file/view/TOTPDEPIN2_%28quad%29.jpg/35040707/TOTPDEPIN2_%28quad%29.jpg&quot; alt=&quot;Mohan's 2nd Attempt (C) BBC&quot; title=&quot;Mohan's 2nd Attempt (C) BBC&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/TOTPDEPIN2_%28quad%29.jpg/35040707/TOTPDEPIN2_%28quad%29.jpg" alt="TOTPDEPIN2_(quad).jpg" title="TOTPDEPIN2_(quad).jpg" /></td></tr><tr><td class="imageCaption">Mohan's 2nd Attempt (C) BBC</td></tr></table><!-- ws:end:WikiTextLocalImageRule:12 --><br />
<br />
It can be seen that Mohan's frames provide a major improvement on the BBC1 sign, with a nice neat outline around the edge. This is especially true on his 2nd frame, which also has a neat outline around Jimmy Saville.<br />
<br />
To investigate further I had a look at the horizontal displacements in all three images:<br />
<!-- ws:start:WikiTextLocalImageRule:13:&lt;img src=&quot;/file/view/TOTP36_%28H%29.jpg/35040721/TOTP36_%28H%29.jpg&quot; alt=&quot;Original Image (C) BBC&quot; title=&quot;Original Image (C) BBC&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/TOTP36_%28H%29.jpg/35040721/TOTP36_%28H%29.jpg" alt="TOTP36_(H).jpg" title="TOTP36_(H).jpg" /></td></tr><tr><td class="imageCaption">Original Image (C) BBC</td></tr></table><!-- ws:end:WikiTextLocalImageRule:13 --><br />
<!-- ws:start:WikiTextLocalImageRule:14:&lt;img src=&quot;/file/view/TOTPDEPIN_%28H%29.jpg/35040795/TOTPDEPIN_%28H%29.jpg&quot; alt=&quot;Mohan's 1st Attempt (C) BBC&quot; title=&quot;Mohan's 1st Attempt (C) BBC&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/TOTPDEPIN_%28H%29.jpg/35040795/TOTPDEPIN_%28H%29.jpg" alt="TOTPDEPIN_(H).jpg" title="TOTPDEPIN_(H).jpg" /></td></tr><tr><td class="imageCaption">Mohan's 1st Attempt (C) BBC</td></tr></table><!-- ws:end:WikiTextLocalImageRule:14 --><br />
<!-- ws:start:WikiTextLocalImageRule:15:&lt;img src=&quot;/file/view/TOTPDEPIN2_%28H%29.jpg/35040747/TOTPDEPIN2_%28H%29.jpg&quot; alt=&quot;Mohan's 2nd Attempt (C) BBC&quot; title=&quot;Mohan's 2nd Attempt (C) BBC&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/TOTPDEPIN2_%28H%29.jpg/35040747/TOTPDEPIN2_%28H%29.jpg" alt="TOTPDEPIN2_(H).jpg" title="TOTPDEPIN2_(H).jpg" /></td></tr><tr><td class="imageCaption">Mohan's 2nd Attempt (C) BBC</td></tr></table><!-- ws:end:WikiTextLocalImageRule:15 --><br />
Here we see that Richard's software gives up entirely on the left-hand side of the BBC1 sign in the original frame; but in Mohan's 1st frame the geometry in that area has been almost completely corrected (apart from the upper left corner).<br />
<br />
In his 2nd frame Mohan has introduced new distortions to the BBC1 sign, but also slightly increased the area (of the sign) that the software is able to track. However the lower right-hand corner of frame has worsened, which explains why the errors disappeared in this region, since the software is simply assigning the quadrant to (-U, +V).<br />
<br />
It's difficult to draw any useful conclusions from the right-hand-side of frame anyway, since this lies within the region of pre-distorted reference.<br />
<br />
I don't know whether Mohan's distortion will prove to be better than Richard's; but it certainly brings the frame closer to it's original geometry: so in theory it should be easier for Richard's process to track the finer errors in geometry, once the course errors have been removed by the pre-distortion process.<br />
It would be interesting to test this further, and to that end it would be useful to have a menu option to switch off the pre-distortion of the reference. Different types of distortions could then be tested, including those based on more complex non-radial distortions.<br />
<br />
Further software improvements could involve a mechanism to compensate for the line-bunching effect I found in the JS Lights footage, which made left-leaning diagonals look like right-leaning ones. By measuring the local density of the vertical 288 c/aph signal, you could apply a suitable chroma phase correction.<br />
<br />
Also if I'm right about the source-derived 288 c/aph signal being firmly anchored to the line structure, then a comparison of the chroma-derived 288 c/aph waveform against the source-derived 288 c/aph waveform should allow the phase errors to be detected, and a suitable correction applied. This could solve the problem of frames where the two fields have very different chroma content, especially since this difference should increase the amplitude of the 288 c/aph signal in the source.<br />
<br />
<br />
<strong><u>18th July 2008</u></strong><br />
<br />
After further study of the geometry in the source material, I've concluded that there are two principal distortions layered on top of each other, both arising from non-linear scanning on the CRT:<br />
<br />
Distortion A arises from the effect of the CRT's scan-coils in shaping the EM field.<br />
<br />
Distortion B is generated by the image content itself, since the strength of the cathode ray will determine how much it is deflected by the field.<br />
<br />
Distortion A is axially symmetric (both vertically and horizontally), and takes the form of a so-called &quot;moustache distortion&quot;. This is a combination of barrel and pin-cushion distortions, and is found in some optical lensing systems.<br />
<br />
The centre of the frame has pin-cushion distortion, but the outer regions are closer to barrel distortion, due to the flattening of the scan-lines that I have commented on previously. This combination is what's known as moustache distortion.<br />
<br />
The fact that it's also found in optics should not be that surprising, since an EM field is essentially a cloud of virtual photons. So the shape of the scan-coil acts like an electronic lens, in the same way that a glass lens focusses a beam of light. The main difference is that light is composed of real photons not virtual ones; but this doesn't affect the outcome. (The cloud of virtual photons are in this case coupling to a fermionic Dirac field in the form of an electron beam; but the effect is essentially the same.)<br />
<br />
Distortion B will only have axial symmetry when the image content is symmetric: so most of the time it will skew the axial symmetry.<br />
Modelling this distortion is harder, but far from impossible, since the deflection will be directly proportional to the luminance on the CRT (though you may have to allow for gamma distortions in the commital to film).<br />
<br />
(If the CRT had a mechanism to modify the scan-coil driving voltages to take account of the current in the cathode ray, then this would complicate things further. Though I suspect there was no such mechanism in monitors of the era.)<br />
<br />
Mohan has been using a so-called fish-eye deformation to re-map the geometry, i.e. a barrel-type distortion used to reverse pin-cushion deformation produced by optical lenses.<br />
This works well in the centre of the frame; but not so well in the four corners.<br />
To illustrate this, here is the Y-displacement map from one of Mohan's frames after being run through Richard's software (in raw headerless form this time, so no picture phase shift is present):<br />
<!-- ws:start:WikiTextLocalImageRule:16:&lt;img src=&quot;/file/view/TOTPDEPIN_%28raw%29_%28V%29.jpg/35059723/TOTPDEPIN_%28raw%29_%28V%29.jpg&quot; alt=&quot;(C) BBC&quot; title=&quot;(C) BBC&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/TOTPDEPIN_%28raw%29_%28V%29.jpg/35059723/TOTPDEPIN_%28raw%29_%28V%29.jpg" alt="TOTPDEPIN_(raw)_(V).jpg" title="TOTPDEPIN_(raw)_(V).jpg" /></td></tr><tr><td class="imageCaption">(C) BBC</td></tr></table><!-- ws:end:WikiTextLocalImageRule:16 --><br />
<br />
Compare this with the Y-displacement map from the original test frame, and the difference is very clear:<br />
<!-- ws:start:WikiTextLocalImageRule:17:&lt;img src=&quot;/file/view/TOTP36_%28raw%29_%28V%29.jpg/52188409/TOTP36_%28raw%29_%28V%29.jpg&quot; alt=&quot;(C) BBC&quot; title=&quot;(C) BBC&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/TOTP36_%28raw%29_%28V%29.jpg/52188409/TOTP36_%28raw%29_%28V%29.jpg" alt="TOTP36_(raw)_(V).jpg" title="TOTP36_(raw)_(V).jpg" /></td></tr><tr><td class="imageCaption">(C) BBC</td></tr></table><!-- ws:end:WikiTextLocalImageRule:17 --><br />
<br />
I've yet to find some user-friendly software for reversing moustache distortion.<br />
Have tried Panorama Tools with the Hugin front-end GUI; but this is designed for photographic experts so I can't get my head round it!<br />
<br />
If this could be done it should correct distortion A completely, leaving distortion B to be dealt with by Richard's process.
  </div>

<div id="pageEditor" class="editorWrapper editorLayer">
  <iframe id="target_editor" name="target_editor" src="/s/blank.html" style="width:0px;height:0px;border:0"></iframe>
    <form action="/page/edit/Separating+the+Fields" method="post" class="editorForm" id="editorForm"><input type="hidden" name="wikispacesFormToken" value="70db94c5bd96903a91a7506ff0d24f3722658b7c"/><div class="movkp"><input type="text" class="form-control" name="wikispaces_user_id" value="user-1528197994"/></div><div class="wsh"><input type="text" class="form-control" name="goto" autocomplete = "off"/></div><div class="jovise"><input type="text" class="form-control" name="mode" autocomplete = "off"/></div><div class="mimw"><input type="text" class="form-control" name="version" autocomplete = "off"/></div><div class="mimw"><input type="text" class="form-control" name="pageComments" autocomplete = "off"/></div><div class="jovise"><input type="text" class="form-control" name="saveAndContinue" autocomplete = "off"/></div><div class="jowic"><input type="text" class="form-control" name="comment" autocomplete = "off"/></div><div class="wsh"><input type="text" class="form-control" name="commentsDisabled" autocomplete = "off"/></div><div class="wsh"><input type="text" class="form-control" name="contentPresent" autocomplete = "off"/></div><div class="jowic"><input type="text" class="form-control" name="editorCleanup" autocomplete = "off"/></div><div class="wsh"><input type="text" class="form-control" name="WikispacesEditorContent" autocomplete = "off"/></div><input type="hidden" name="wikispacesASFormToken" value="57f2eb708019c239d6124ff9eb463272367e00eb"/>
    <input type="hidden" title="goto" name="6651429d264d41e58d5d6959fe9320dd31dd2cd0" value=""/>
    <input type="hidden" title="mode" name="73b96101bfb7b83750866176f46a2d4032376433" autocomplete="off" value="visual"/>
    <input type="hidden" title="version" name="bd9c331d34cbca7febc12850ed59d00aca61cc92" autocomplete="off" value="28387957"/>
    <input type="hidden" title="pageComments" name="7c44fb674cda8375bde9d06140889d89cec365eb" autocomplete="off" value=""/>
    <input type="hidden" title="saveAndContinue" name="b484afcf4e714c7ea8027009e86e1559c29c2348" value="0"/>
    <input type="hidden" title="comment" name="35cde5ea4e6d1b2f1757f3f0759f6dc02513e235" value=""/>
    <input type="hidden" title="commentsDisabled" name="2c6557d44cf0449943364eb85df20fd29f02f143" autocomplete="off" value=""/>
    <input type="hidden" title="contentPresent" name="d3eba733737b5d657fd788b6b23b3343391fc2b1" autocomplete="off" value=""/>
    <input type="hidden" title="editorCleanup" name="d1e97147b6e67931b8b459470fd97390f42c9fec" autocomplete="off" value=""/>

    <textarea id="wsMainEditor" title="content" class="noContentHide" name="57c21ae3cc6e9a4aedb9483c36b798e8926872fa" style="width: 100%; position: absolute; top: -50000px; left: -50000px;" autocomplete="off"></textarea>

  <noscript>
    <h2>Javascript Required</h2>
    <p>You need to enable Javascript in your browser to edit pages.</p>
  </noscript>

  </form>
  
  
  <div id="plainTextEditor" style="position:relative;display:none" class="editorLayer" >
    <textarea id="textEditor" class="autogrow"></textarea>
    <p style="clear:both;" align="right"><a href="http://helpcenter.wikispaces.com/customer/portal/articles/1959131-wikitext">help on how to format text</a></p>
  </div>
</div>




  </div>
  <div class="commentColumn WikispacesStream"><div class="WikispacesContent WikispacesBs3"><div class="commentList"></div></div></div>
</div>

  




<script type="text/template" id="js-event-template">
  <small>
    <%- startDateShortFormat %>
    <a href="<%- ws.common.pathFor('event', 'view', id) %>" class="WikispacesDialogLink">
      <%- ws.common.truncate(title, 15) %>
    </a>
  </small>
</script>

<script type="text/template" id="js-reply-template">
  <div class="tc-timeline-comment media">

    <a class="pull-left userLink" href="<%- userCreated.url %>">
      <img src="<%- userCreated.imageUrl %>" width="30" height="30" class="author-avatar" alt="" />
    </a>
    <div class="media-body" data-id="<%= id %>">
      <% if (ws.context.user.canAdministerWiki) { %>
        <i class="tc-delete-comment fa fa-trash-o contextual-command destroy-message ws-tip" title="Delete reply"></i>
      <% } %>
      <div class="tc-box-name-date">
        <span class="tc-commenter"><a href="<%- userCreated.url %>"><%- userCreated.username %></a></span>
        <% if (smartDate == '__live__') { %>
        <abbr style="border-bottom-style: none;" class="timeago tc-comment-date" title="<%- (new Date(parseInt(dateCreated) * 1000)).toISOString() %>">
          <%- (new Date(parseInt(dateCreated) * 1000)).toDateString() %>
        </abbr>
        <% } else { %>
          <abbr style="border-bottom-style: none;" class="tc-comment-date"><%- smartDate %></abbr>
        <% } %>
      </div>
      <% if (body) { %>
      <p>
        <%= body %>
      </p>
      <% } %>
    </div>
  </div>
</script>

<script type="text/template" id="js-share-template">
  <div class="tc-timeline-block tc-<%= ws.stream.typeToBlockType(sharedType) %>-block" <%= (ws.stream.hideTimeline ? 'style="padding-left: 0px;"' : '') %>>

    <% if (!ws.stream.hideTimeline) { %>
      <div class="tc-timeline-icon">
        <i class="fa fa-<%= ws.stream.typeToIcon(sharedType) %>"></i>
      </div>
      <div class="tc-timeline-triangle-man"></div>
    <% } %>

    <div class="tc-timeline-box" data-id="<%= id %>">
      <div class="media">
        <a class="pull-left userLink" href="<%- userCreated.url %>">
          <img src="<%- userCreated.imageUrl %>" width="48" height="48" class="author-avatar media-object" alt="" />
        </a>

        <div class="media-body">

          <div class="tc-stream-dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
              <i class="fa fa-chevron-down"></i>
            </a>
            <ul class="dropdown-menu dropdown-menu-right" role="menu">
              <% if (ws.context.user.id) { %>
              <li>
                <a class="js-toggle-monitor" tabindex="-1" href="#">
                  <i class="fa-fw fa fa-eye"></i>
                  <span><%= monitored ? 'Start Monitoring' : 'Stop Monitoring' %></span>
                </a>
              </li>
              <% } %>

              <% if (ws.context.user.canAdministerWiki) { %>
              <li>
                <a class="js-toggle-lock" tabindex="-1" href="#">
                  <i class="fa-fw fa fa-lock"></i>
                  <span><%= locked ? 'Unlock Replies' : 'Lock Replies' %></span>
                </a>
              </li>
              <% if (sharedType == 'discussion' || sharedType == 'comment' || sharedType == 'event') { %>
              <li>
                <a class="js-destroy-share" tabindex="-1" href="#">
                  <i class="fa-fw fa fa-trash-o"></i>
                  Delete <%= ws.stream.typeToName(sharedType) %>
                </a>
              </li>
              <% } %>
              <% } %>
            </ul>
          </div>

          <div class="tc-timeline-box-header ws-reveal media-heading">
              <h3 class="tc-box-title">
              <% if (typeof adminLink !== 'undefined' && adminLink && ws.context.user.canAdministerWiki) { %>
                <a href="<%- adminLink %>"><%- title %></a>
              <% } else { %>
                <%- title %>
              <% } %>
              <% if (typeof startDate !== 'undefined' && startDate) { %> - <%= startDateShortFormat %> <%= ws.stream.getYearFromStartDate(startDate) %><% } %>
              </h3>
              <div class="tc-box-name-date">
                <% if (ws.context.instance.isTesClassroom) { %>
                  <%- userCreated.username %>
                <% } else { %>
                  <a class="author-name" href="<%- userCreated.url %>"><%- userCreated.username %></a>
                <% } %>
                <% if (typeof recipients !== 'undefined' && recipients) { %>
                  <i class="fa fa-angle-right"></i>
                  <% if (typeof recipientsLink !== 'undefined') { %>
                    <a href="<%- recipientsLink %>"><%- recipients %></a>
                  <% } else { %>
                    <span class="recipients"><%- recipients %></span>
                  <% } %>
                <% } %>
                <% if (smartDate == '__live__') { %>
                  <abbr style="border-bottom-style: none;" class="timeago tc-block-date" title="<%= (new Date(parseInt(dateCreated) * 1000)).toISOString() %>">
                    <%= (new Date(parseInt(dateCreated) * 1000)).toDateString() %>
                  </abbr>
                <% } else { %>
                  <abbr style="border-bottom-style: none;" class="tc-block-date"><%- smartDate %></abbr>
                <% } %>
              </div>
          </div>

          <div class="<%= sharedType == 'comment' && !orphaned && !ws.stream.noCollapse ? 'hidden ' : '' %>tc-block-content">
            <div class="clearfix">
              <% if (typeof rangeActions !== 'undefined') { %>
                <div class="tc-range-actions">
                  <% for(var i = 0; i < rangeActions.length; i++) { %>
                  <%= ws.stream.rangeActionTemplate(rangeActions[i]) %>
                  <% } %>
                </div>
              <% } %>
              <% if (description) { %>
                <p><%= description %></p>
              <% } %>
            </div>
          </div>

          <% if (replyPages.length > 0 && !(replyPages.length === 1 && replyPages[0].digests.length === 0)) { %>
            <div class="tc-timeline-comments">
            <% for (var i = 0; i < replyPages.length; i++) { %>
              <% if (i == 0 && replyPages[i].more) { %>
                <a href="#" class="tc-show-more" onclick="ws.stream.pageReplies(<%= id %>, <%= replyPages[i].page + 1 %>); return false">Show more replies (<%= replyPages[i].more %> hidden) </a>
              <% } else { %>
                <div></div>
              <% } %>
              <% for (var j = 0; j < replyPages[i].digests.length; j++) { %>
                <%= ws.stream.replyTemplate(replyPages[i].digests[j]) %>
              <% } %>
            <% } %>
            </div>
          <% } %>

          <% if ((ws.stream.userCanPostMessage && !locked) || ws.context.user.canAdministerWiki) { %>
          <div class="tc-add-comment media <%= ws.stream.noCollapse ? 'add-active' : ''%>">
            <img src="<%- ws.context.user.imageUrlPrefix %>lg.jpg" width="30" height="30" class="pull-left author-avatar" alt="" />
            <div class="media-body">
              <textarea name="reply" placeholder="Comment" class="form-control form-control-tc ws-reveal <%= !ws.stream.noCollapse ? 'ws-unrevealed' : ''%> reply" /></textarea>
              <button type="button" class="btn-tc btn-info-tc btn-sm-tc add-reply">Post</button>
            </div>
          </div>
          <% } %>
        </div>

      </div>
    </div>
  </div>
</script>

<script type="text/template" id="js-range-action-template">
  <div>
    <strong><%- name %></strong>
    <% if (typeof(diffUrl) !== 'undefined') { %>
      <a href="<%- diffUrl %>">
    <% } %>
    <%= new Date(dateCreated * 1000).toLocaleString() %>
    <% if (typeof(diffUrl) !== 'undefined') { %>
      </a>
    <% } %>
    <% if (typeof(rangeText) !== 'undefined') { %>
      <div>
        <span class="commentExtent">
        <% if (typeof(diffUrl) !== 'undefined') { %>
          <a href="<%- diffUrl %>">
        <% } %>
        <%= rangeText %>
        <% if (typeof(diffUrl) !== 'undefined') { %>
          </a>
        <% } %>
        </span>
      </div>
    <% } %>
  </div>
</script>

<script type="text/template" id="js-stream-end-template">
  <div class="tc-timeline-block tc-end-block">
    <div class="tc-timeline-icon" style="margin-top: -10px;" />
    <div class="tc-timeline-box" style="visibility: hidden;">
      <p class="tc-box-title"></p>
    </div>
  </div>
</script>

<a name="discussion"></a>
<div class="timeline WikispacesBs3 tc-timeline-embedded show-border">
  <div class="timeline-line"></div>
    <div id="js-share-list">
    <div class="spinner hidden"><i class="fa fa-spinner fa-spin"></i></div>
  </div>
</div></div></div><div id="sentinel" style="clear:both"></div>        </div>
      </main>
    </div>
  </div>
</div>

<footer class="ws-theme-footer" role="contentinfo">
  <div class="ws-theme-container">
    <div class="ws-theme-footer-inner">
      <div class="WikiFooterNav WikiElement">
<a href="http://helpcenter.wikispaces.com/" rel="nofollow" class="js-help-trigger">Help</a> &middot;
<a href="../www.wikispaces.com/about">About</a> &middot;
<a href="../www.wikispaces.com/content/pricing" rel="nofollow">Pricing</a> &middot;
<a href="../www.wikispaces.com/privacy" rel="nofollow">Privacy</a> &middot;
<a href="../www.wikispaces.com/terms" rel="nofollow">Terms</a> &middot;
<a href="../www.wikispaces.com/site/help?url=https%3A%2F%2Fcolour-recovery.wikispaces.com%2FSeparating%2520the%2520Fields%3FresponseToken%3D6aed8731ecd80dae97b2d3d852d42b56" rel="nofollow"><strong>Support</strong></a> &middot;
<a href="/space/subscribe/upgrade"><strong>Upgrade</strong></a>
</div>      <div class="WikiLicense WikiElement">Contributions to https://colour-recovery.github.io/ are licensed under a <a rel="license" href="http://www.creativecommons.org/licenses/by-sa/2.5">Creative Commons Attribution Share-Alike 2.5 License</a>. <a rel="license" href="http://www.creativecommons.org/licenses/by-sa/2.5"><img src="../ssl.wikicdn.com/i/creativecommons/by-sa_2.5_80x15.png" width="85" height="15" alt="Creative Commons Attribution Share-Alike 2.5 License"/></a><br />Portions not contributed by visitors are Copyright 2018 Tangient LLC<br /><a href="https://www.tes.com/us/?utm_source=wikispaces&utm_medium=link&utm_campaign=US-52-footer">TES: The largest network of teachers in the world</a></div>    </div>
  </div>
</footer>


<script type="text/template" id="dialog-template">
<div class="modal fade" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-times"></i></button>
        <h4 class="modal-title"><%= header %></h4>
      </div>
      <div class="modal-body">
        <%= body %>
      </div>
    </div>
  </div>
</div>
</script>


<div id="js-help-template" class="hidden">
  <div class="ws-help">
    <div class="js-help-controls WikispacesContent WikispacesBs3">
      <a href="../www.wikispaces.com/site/gettingstarted/off" class="btn btn-default hidden js-getting-started-off pull-right">Turn off "Getting Started"</a>
      <ol class="breadcrumb">
        <li class="js-special-breadcrumb active">
          <a href="http://helpcenter.wikispaces.com/" data-breadcrumb="0">Home</a>
        </li>
        <li class="js-ellipsis hidden js-special-breadcrumb">
          ...
        </li>
        <li class="js-spinner hidden js-special-breadcrumb"><i class="fa fa-spinner fa-spin"></i></li>
      </ol>
    </div>
    <div class="ws-help-content wiki">Loading...</div>
  </div>
</div>
</div>
<script src="../ssl.wikicdn.com/s/nogz/6q86j8zz-common.min.js" type="text/javascript"></script>
<script src="../ssl.wikicdn.com/s/nogz/70163536-editorc.min.js" type="text/javascript"></script>
<script src="../ssl.wikicdn.com/s/nogz/85k7018k-stream.min.js" type="text/javascript"></script>
<script src="../ssl.wikicdn.com/s/nogz/91k8z207-contentbar.min.js" type="text/javascript"></script>
<script src="../ssl.wikicdn.com/s/nogz/395j1vq7-component.stream-vo.min.js" type="text/javascript"></script>
<script type="text/javascript">
<!--
ws.namespace('ws.attributes');
ws.namespace('ws.stream');
ws.attributes.DISCUSSION_COUNT = 40;
ws.attributes.pageId = 4823691;
ws.attributes.version = 28387957;
ws.attributes.showEditor = true;
ws.attributes.editUrl = "https:\/\/colour-recovery.wikispaces.com\/page\/edit\/Separating+the+Fields?goto=https%3A%2F%2Fcolour-recovery.wikispaces.com%2FSeparating%2520the%2520Fields";
ws.attributes.userCanEdit = false;
ws.stream.userCanPostMessage = false;
ws.stream.hideTimeline = true;
ws.stream.shareSource = "https:\/\/colour-recovery.wikispaces.com\/page\/shares\/Separating+the+Fields";

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

jQuery(document).ready(function() {
  ws.common.addJsonNotices({"warning":[],"error":[],"info":[],"success":[]});
});

jQuery(document).ready(function() {
  ws.common.addNotice("<script type=\"text\/javascript\">function wsDismissBanner() { ws.common.removeNotice();  ws.cookie.set(\"wsFirstPartShutdown\", 1, {expires: 365 * 86400, domain: \".wikispaces.com\"}); return false;}$(\".ui-pnotify-closer\").remove();<\/script><i class=\"fa fa-times fa-fw ws-close\" onclick=\"wsDismissBanner();\"><\/i>It\u2019s time for us to say farewell\u2026 Classroom and Free Wikis are closing Soon!<br\/>Find out more about the full Wikispaces Site Closure <a href='http:\/\/blog.wikispaces.com' target='_top'>HERE<a\/>", "warning");
});

jQuery(document).ready(function($) {
  
  function tipPlacement() {
    return this.$element.closest('.ws-menu-bar .btn-group').is('.open') ? 'top' : 'bottom';
  }

  

  $('.ws-menu-bar').each(function() {
    var $menuBar = $(this);
    var $tagDropdown = $menuBar.find('.ws-tag-dropdown-menu');
    $menuBar.find('.tipme').tooltip({placement: tipPlacement, container: '.ws-menu-bar'});

    
    $menuBar.find('.ws-btn-more').click(ws.common.makeLinkClickFunction(function(e) {
      if ($(this).closest('.ws-menu-bar .btn-group').is('.open')) {
        ws.common.hideMorePageBar();
      } else {
        ws.common.showMorePageBar();
      }
    }));

    $menuBar.on('click', '.ws-tag-dropdown-toggle', ws.common.makeLinkClickFunction(function(e) {
      if ($(this).closest('.ws-menu-bar .dropdown').is('.open')) {
        ws.common.hideTagDropdown();
      } else {
        ws.common.showTagDropdown();
      }
    }));

    $(document.body).click(function(e) {
      var $target = $(e.target);
      if (!$target.closest('.ws-more-menu').closest('.ws-menu-bar').is($menuBar)
          || $target.closest('a').is('.WikispacesDialogLink')) {
        ws.common.hideMorePageBar();
      }
      if ($tagDropdown.length && !$target.closest('.ws-tag-dropdown-menu').is($tagDropdown)) {
        ws.common.hideTagDropdown();
      }
    });
    
  });
});


jQuery(document).ready(function($) {
  $('.ws-more-menu').on('click', 'a', function(e) {
    if ($(this).is('.disabled')) {
      e.preventDefault();
    }
  });
});


jQuery(document).ready(function() {
  ws.editor.canEdit = false;
  var editUrl = 'https://colour-recovery.github.io/page/edit/Separating+the+Fields?goto=https%3A%2F%2Fcolour-recovery.wikispaces.com%2FSeparating%2520the%2520Fields';

  jQuery('#js-edit-from-template').change(function() {
    window.location = ws.common.addUriParams(editUrl, [['template', jQuery(this).val()]]);
  });
});


jQuery(document).ready(function() {
  ws.editor.loadEditorLibs('../www.wikispaces.com/site/editorlibs/en/11kk95v9.js');
});


ws.editor.startEditor = function (moreCoreOptions, moreMainOptions) {
  ws.editor.canEdit = true;

  var coreOptions = {
    'content_css': ['../www.wikispaces.com/stylesheet/editori/217420326D.css']
  };

  // The stylesheet is passed in as a string, turn it into an array
  // Add bootstrap styles to the editor, if we are in a theme that has full screen bootstrap
  if (jQuery('body').is('.WikispacesBs3')) {
    coreOptions.content_css.push('../www.wikispaces.com//s/internal-bootstrap-body.css');
  }

  var mainOptions = {
    'wssave_cancel_url': '/Separating+the+Fields',
    'wsimage_upload_url': 'https://colour-recovery.github.io/file/multiupload',
    'wsimage_max_file_size_mb': '50',
    'wsimage_page_view_group': ''
  };

  ws.editor.loadEditor(jQuery.extend(coreOptions, moreCoreOptions), jQuery.extend(mainOptions, moreMainOptions));
};

  var wikispaces_page_version = '28387957';

  jQuery(document).ready(function() {
    ws.editor.enableButtons();
  });



--></script><!-- w23 213 wki:75:78(3) tot:213:213(1) dql:3:33(20) mem:2:31(83) mog:4:4(1) -->

</body>
</html>