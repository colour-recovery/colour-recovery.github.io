<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="search" href="https://colour-recovery.github.io/space/opensearch" type="application/opensearchdescription+xml" title="Wikispaces Search (Colour Recovery Working Group Wiki)" />
<link rel="alternate" type="application/x-wiki" title="Edit This Page" href="/page/edit/Undistorting+Image+Sequences" />
<link rel="alternate" title="Colour Recovery Working Group - All Changes" href="https://colour-recovery.github.io/wiki/xmla?v=rss_2_0" type="application/rss+xml" />
<link rel="alternate" title="colour-recovery : Undistorting Image Sequences - Discussion" href="https://colour-recovery.github.io/message/xml/Undistorting+Image+Sequences?v=rss_2_0" type="application/rss+xml" />
<link rel="alternate" title="colour-recovery : Undistorting Image Sequences - Edits" href="https://colour-recovery.github.io/page/xml/Undistorting+Image+Sequences?v=rss_2_0" type="application/rss+xml" />
<link rel="microsummary" href="/page/microsummary/Undistorting+Image+Sequences/edits"/>
<link rel="microsummary" href="/page/microsummary/Undistorting+Image+Sequences/messages"/>
<script type="text/javascript">
  
if (typeof ws === 'undefined') ws = {};
ws.context = {
  instance: {
    id: '1',
    url: 'wikispaces.com',
    isMain: true,
    supportsGoogleDocs: false,
    isTesClassroom: false,
  },
  user: {
    id: '',
    username: '',
    status: '',
    locale: 'en',
    imageUrlPrefix: '../ssl.wikicdn.com/i/user_none_',
    isTeacher: false,
    canAdministerWiki: false,
  },
  wiki: {
    id: '110862',
    name: 'colour-recovery',
    text: 'Colour Recovery Working Group',
    module: 'B',
    isClassroom: false,
    isTesClassroom: false
    ,defaultSpaceId: 110862
    ,isWwwWiki: false
  },
  project: {
    id: '110862',
    name: ''
  },
  space: {
    id: '110862',
    name: 'colour-recovery',
    isDefaultSpace: true,
    isDefaultTemplate: false
  },

  environment_name: 'prod',

  path: {
    object: 'page',
    method: 'view',
    page: 'Undistorting Image Sequences',
    id: ''
  },

  settings: {
    main_domain: 'wikispaces.com',
    session_url: 'https://session.wikispaces.com/1/',
    asset_url_prefix: '../ssl.wikicdn.com',
    beta_features: false,
    isMobileSite: false,
    isUploadCapable: true,
    can_discuss: false,
    has_gdocs: false,
    isDialog: false,
    pwin: ''
  },
  clockSkewMillis: 1528198255246 - ((window.performance && window.performance.timing.responseStart > 0) ? window.performance.timing.responseStart : (new Date()).getTime())
}


// legacy javascript API variables, use the above instead
var wikispaces_isUserLoggedIn = !!ws.context.user.id;
var wikispaces_isMain = ws.context.instance.isMain;
var wikispaces_username = ws.context.user.username;
var wikispaces_spaceName = ws.context.space.name;
var wikispaces_projectName = ws.context.project.name;
var wikispaces_wikiName = ws.context.wiki.name;
var wikispaces_wikiText = ws.context.wiki.text;
var wikispaces_isDefaultSpace = ws.context.space.isDefaultSpace;
var wikispaces_method = ws.context.path.method;
var wikispaces_object = ws.context.path.object;
var wikispaces_page = ws.context.path.page;
var wikispaces_id = ws.context.path.id;
var wikispaces_domain = ws.context.instance.url;
var wikispaces_isUserOrganizer = false;
var wikispaces_main_domain = ws.context.settings.asset_url_prefix;
var wikispaces_asset_url_prefix = ws.context.settings.asset_url_prefix;
var wikispaces_beta_features = ws.context.settings.beta_features;
var wikispaces_isMobileSite = ws.context.settings.isMobileSite;
var wikispaces_isUploadCapable = ws.context.settings.isUploadCapable;
var wikispaces_can_discuss = ws.context.settings.can_discuss;
var wikispaces_has_gdocs = ws.context.settings.has_gdocs;

</script><title>Colour Recovery Working Group - Undistorting Image Sequences</title>
<meta charset="utf-8" />
<link rel="apple-touch-icon" sizes="144x144" href="../ssl.wikicdn.com/_/z6371z4x/i/logo-144.png" />
<link rel="apple-touch-icon" sizes="114x114" href="../ssl.wikicdn.com/_/j5j77xz3/i/logo-114.png" />
<link rel="apple-touch-icon" sizes="72x72" href="../ssl.wikicdn.com/_/vq8j5432/i/logo-72.png" />
<link rel="apple-touch-icon" href="../ssl.wikicdn.com/_/38515190/i/logo-57.png" />
<link rel="shortcut icon" href="../ssl.wikicdn.com/_/55v9k02z/i/logo-16.png" />
<style type="text/css">
/*
Based on: AquaFluid, http://wpthemepark.com/
Description: WP Theme AquaFluid by Sadish
Version: 1.0
Author: Sadish Balasubramanian
*/

/* Standard theme styles */
*, *:before, *:after {
  -webkit-box-sizing: border-box;
     -moz-box-sizing: border-box;
          box-sizing: border-box;
}
body {
  font-family: arial, helvetica, sans-serif;
  font-size: 14px;
  line-height: 20px;
  margin: 0;
}
.ws-theme-header-inner,
.ws-theme-body-inner,
.ws-theme-footer-inner,
.ws-theme-content-inner,
.ws-theme-sidebar-inner {
  position: relative;
}
.ws-theme-header-inner:after,
.ws-theme-body-inner:after,
.ws-theme-footer-inner:after,
.ws-theme-content-inner:after,
.ws-theme-sidebar-inner:after,
.ws-theme-menu-inner:after {
  content: " ";
  visibility: hidden;
  display: block;
  height: 0;
  clear: both;
}
.ws-theme-content, .ws-theme-sidebar {
  overflow-x: auto;
}
.ws-theme-footer {
  text-align: right;
}
.ws-theme-footer a, .ws-theme-footer a:hover {
  text-decoration: none;
}
@media (min-width: 768px) {
  .ws-theme-container {
    width: 750px;
    margin-right: auto;
    margin-left: auto;
  }
  .ws-theme-content {
    width: 550px;
    min-height: 384px;
    float: right;
  }
  .ws-theme-sidebar {
    width: 200px;
    float: left;
  }
}
@media (min-width: 992px) {
  .ws-theme-container {
    width: 970px;
  }
  .ws-theme-content {
    width: 770px;
    min-height: 496px;
  }
}
@media (min-width: 1200px) {
  .ws-theme-container {
    width: 1170px;
  }
  .ws-theme-content {
    width: 970px;
    min-height: 600px;
  }
}
/* End standard theme styles */
</style>
<style type="text/css">
/* Theme-specific styles */
body {
  background-color: #CDE;
}

.ws-theme-container {
  margin: 0 5px;
}

.ws-theme-header .WikiSearch .WikiSearchInput,
.ws-theme-sidebar .WikiSearch .WikiSearchInput,
.ws-theme-footer .WikiSearch .WikiSearchInput {
  width: 100%;
}

.ws-theme-header,
.ws-theme-sidebar,
.ws-theme-footer {
  color: #000000;
}
.ws-theme-header a,
.ws-theme-sidebar a,
.ws-theme-footer a {
  color: #0000FF;
  text-decoration: none;
}
.ws-theme-header a:hover,
.ws-theme-sidebar a:hover,
.ws-theme-footer a:hover {
  text-decoration: underline;
}
.ws-theme-header img,
.ws-theme-sidebar img,
.ws-theme-footer img {
  border: none;
}

.ws-theme-header-inner,
.ws-theme-body-inner,
.ws-theme-footer-inner {
  border: #CCC 1px solid;
}

.ws-theme-header,
.ws-theme-sidebar {
  display: none;
}

.ws-theme-body {
  padding-top: 8px;
}
.ws-theme-body-inner {
  border-bottom: none;
  background-color: #FFF;
}

.ws-theme-content {
  overflow-x: visible;
}
.ws-theme-content-inner {
  padding: 13px 15px 26px;
}

.ws-theme-footer {
  font-size: 12px;
  text-align: center;
  padding-bottom: 8px;
}
.ws-theme-footer-inner {
  padding: 10px 15px;
  background: #FFF;
  border-top-color: #000;
}
.ws-theme-footer .WikiLicense img {
  vertical-align: text-bottom;
}

@media (min-width: 768px) {
  body {
    background: #FAFBFC url(../ssl.wikicdn.com/_/68jv1944/i/theme_aqua_blue.jpg) repeat-x top fixed;
  }

  .ws-theme-container {
    width: auto;
    margin: 0 8px;
  }

  .ws-theme-header,
  .ws-theme-sidebar {
    display: block;
  }

  .ws-theme-header {
    display: block;
    padding-top: 20px;
  }
  .ws-theme-header-inner {
    height: 125px;
    padding: 25px 20px;
    background: #483d8b url(../ssl.wikicdn.com/_/xq2j142v/i/theme_aqua_header.jpg) repeat-x bottom;
    border-bottom: none;
  }
  .ws-theme-header .ws-theme-logo {
    float: right;
  }

  .ws-theme-body {
    padding-top: 0;
  }
  .ws-theme-body-inner {
    border-top: none;
    background-color: #EEE;
  }
  .ws-theme-body-inner:before {
    content: " ";
    display: block;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 200px;
    background-color: #FFF;
    border-left: 1px solid #CCC;
  }

  .ws-theme-content {
    width: auto;
    margin-left: 200px;
    float: none;
  }
  .ws-theme-content-inner {
    float: left;
    width: 100%;
    padding: 13px 15px 26px;
  }

  .ws-theme-sidebar-inner {
    padding: 0 10px;
  }
  .ws-theme-sidebar .WikiActions {
    list-style-type: none;
    padding: 0;
    margin: 0;
  }
  .ws-theme-sidebar .WikiActions > li {
    padding: 2px;
  }
  .ws-theme-sidebar .WikiCustomNav ol {
    padding-left: 16px;
  }
  .ws-theme-sidebar .WikiCustomNav ol.includePageList {
    padding-left: 0;
  }
  .ws-theme-sidebar .WikispacesNavbar {
    margin: 0 -10px;
    padding: 0 10px;
  }
  .ws-theme-sidebar .ws-theme-nav-edit {
    color: #666;
    text-align: center;
  }
  .ws-theme-sidebar .ws-theme-nav-edit a {
    color: inherit;
  }

  .ws-theme-footer-inner {
    border-top-color: #CCC;
    background: #FFF url(../ssl.wikicdn.com/_/2z687q19/i/theme_aqua_top.gif) repeat-x top;
  }
}

/* End theme-specific styles */
</style>
<link rel="stylesheet" href="../www.wikispaces.com/stylesheet/viewi/217420326D.css" type="text/css" />
<link rel="stylesheet" href="../ssl.wikicdn.com/s/nogz/9jvvjv40-internal-bootstrap.css" type="text/css" />
<link rel="stylesheet" href="../ssl.wikicdn.com/s/nogz/vz033906-internal.css" type="text/css" />
<script src="../ssl.wikicdn.com/s/nogz/84014v41-top.min.js" type="text/javascript"></script>

<script type="text/javascript">
  var _gaq = _gaq || [];

  var wsGoogleAccount = 'UA-80504-1';
  _gaq.push(['_setAccount', wsGoogleAccount]);
  _gaq.push(['_gat._anonymizeIp']);
  _gaq.push(['_setDomainName', 'wikispaces.com']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_setCustomVar', 2, 'Authenticated', 'Guest', 2]);
  _gaq.push(['_trackPageview']);
</script></head>
<body><a href="#WikiContent" class="hidden sr-only sr-only-focusable">Skip to main content</a><div id="js-fixed-header-holder" class="fixed"><div class="WikispacesContent WikispacesBs3" role="banner">
      
    <div class="ws-main-top-nav visible-xs">
    <div class="navbar navbar-static-top" style="margin-bottom: 0;">
      <div class="container">
                <div class="navbar-header">
          <div class="visible-xs pull-left">
            <a href="/space/menu" class="WikispacesDialogLink btn navbar-btn">
              <i class="fa fa-bars"></i>
            </a>
          </div>
          <div class="visible-xs pull-right js-globalnav-popover-container">
                        <a href="../www.wikispaces.com/site/signin?goto=https%3A%2F%2Fcolour-recovery.wikispaces.com%2FUndistorting%2520Image%2520Sequences%3FresponseToken%3D898db6dd5c2ad5dd130109501555522d" class="btn navbar-btn ws-mobile-guest-username js-globalnav-popover-trigger">
              guest
            </a>
                        <div class="hidden js-globalnav-popover-content">
              <div class="WikispacesContent WikispacesBs3">
                <div class="WikiInternalHeaderNav noHide">
  <div class="WikiInternalHeaderNavMenu">
                          
                  <span class="WikiInternalHeaderNavMenuArea"><a href="../www.wikispaces.com/user/join?goto=https%3A%2F%2Fcolour-recovery.wikispaces.com%2Fspace%2Fjoin" rel="nofollow" class="WikispacesXDomainDialogLink">Join</a></span>

          <span class="divider">|</span>
        
        <span class="WikiInternalHeaderNavMenuArea"><a class="js-help-trigger" rel="nofollow" href="http://helpcenter.wikispaces.com/">Help</a></span>

        <span class="divider">|</span>
      
      <span class="WikiInternalHeaderNavMenuArea"><a href="../www.wikispaces.com/site/signin?goto=https%3A%2F%2Fcolour-recovery.wikispaces.com%2FUndistorting%2520Image%2520Sequences%3FresponseToken%3D898db6dd5c2ad5dd130109501555522d" rel="nofollow" class="WikispacesXDomainDialogLink">Sign In</a></span>
      </div>
</div>              </div>
            </div>
          </div>
          <div class="ws-navbar-middle-xs">
            <div class="navbar-brand" role="navigation">
              <a href="../www.wikispaces.com/" class="ws-logo"></a>
              <i class="fa fa-angle-right"></i>
              <a href="https://colour-recovery.github.io/">Colour Recovery Working Group</a>
                              <i class="fa fa-angle-right"></i> <a href="https://colour-recovery.github.io/home">Home</a>
              
            </div>
          </div>
                    <form action="/search/view" method="post" class="navbar-form ws-include-xs pull-left ws-navbar-search hidden-xs" role="search"><input type="hidden" name="wikispacesFormToken" value="6eff1c628f3c706c1fcdda564598d68ef373a524"/><input type="text" class="form-control search-query" name="q" value="" placeholder="Search" /> </form>
                  </div>
      </div>
    </div>
  </div>
      <div class="hidden-xs"><div class="WikiInternalHeaderNav WikiElement floating">
  <div class="WikiInternalHeaderNavMenu">
                                    <span class="WikiInternalHeaderNavMenuArea guestUserName">guest</span><span class="slideMarker divider">|</span>
        
                  <span class="WikiInternalHeaderNavMenuArea"><a href="../www.wikispaces.com/user/join?goto=https%3A%2F%2Fcolour-recovery.wikispaces.com%2Fspace%2Fjoin" rel="nofollow" class="WikispacesXDomainDialogLink">Join</a></span>

          <span class="divider">|</span>
        
        <span class="WikiInternalHeaderNavMenuArea"><a class="js-help-trigger" rel="nofollow" href="http://helpcenter.wikispaces.com/">Help</a></span>

        <span class="divider">|</span>
      
      <span class="WikiInternalHeaderNavMenuArea"><a href="../www.wikispaces.com/site/signin?goto=https%3A%2F%2Fcolour-recovery.wikispaces.com%2FUndistorting%2520Image%2520Sequences%3FresponseToken%3D898db6dd5c2ad5dd130109501555522d" rel="nofollow" class="WikispacesXDomainDialogLink">Sign In</a></span>
      </div>
</div></div>
  </div></div><div id="js-fixed-header-offset">
<header class="ws-theme-header" role="banner">
  <div class="ws-theme-container">
    <div class="ws-theme-header-inner">
      <div class="ws-theme-logo">
        <a href="https://colour-recovery.github.io/" class="WikiLogo WikiElement"><img src="../logo.jpg" alt="Colour Recovery Working Group" /></a>      </div>
    </div>
  </div>
</header>

<div class="ws-theme-body">
  <div class="ws-theme-container">
    <div class="ws-theme-body-inner">
      <nav class="ws-theme-sidebar" role="navigation">
        <div class="ws-theme-sidebar-inner">
          <div class="ws-theme-menu">
            <div class="ws-theme-menu-inner">
              <ul class="WikiActions WikiElement WikiControls">
    <li id="WikiActionHome"><div><span class="WikiActionSupplemental" style="float: right;"></span><a href="https://colour-recovery.github.io/"><i class="fa fa-home fa-fw"></i></a><a href="https://colour-recovery.github.io/">Wiki Home</a></div></li>
    <li id="WikiActionChanges"><div><span class="WikiActionSupplemental" style="float: right;"></span><a href="/wiki/changes"><i class="fa fa-clock-o fa-fw"></i></a><a href="/wiki/changes">Recent Changes</a></div></li>
    <li id="WikiActionPagesAndFiles"><div><span class="WikiActionSupplemental" style="float: right;"></span><a href="/space/content"><i class="fa fa-file-text-o fa-fw"></i></a><a href="/space/content">Pages and Files</a></div></li>
    <li id="WikiActionMembers"><div class="js-member-link"><span class="WikiActionSupplemental" style="float: right;"></span><a href="/wiki/members"><i class="fa fa-user fa-fw"></i></a><a href="/wiki/members">Members</a></div></li>
</ul>
              <form action="/search/view" method="post" class="WikiSearch WikiElement" role="search"><input type="text" class="form-control WikiSearchInput" name="q" value="" placeholder="Search" /> </form>              <div class="WikiCustomNav WikiElement wiki"><ul><li><h3><a class="wiki_link" href="/Home">Home</a></h3>
</li><li><a class="wiki_link_ext" href="http://colour-recovery.github.io/message/list/home" rel="nofollow">General Announcements</a></li><li><a class="wiki_link" href="/Members">Members</a></li><li><a class="wiki_link" href="/An%20examination%20of%20source%20material">An examination of source material</a></li><li><a class="wiki_link" href="/Background%20information">Background information</a></li><li><a class="wiki_link" href="/Tutorials">Tutorials</a></li><li><a class="wiki_link" href="/Utilities">Utilities</a></li><li><a class="wiki_link" href="/Previous%20work">Previous work</a></li><li><a class="wiki_link" href="/Current%20work">Current work</a></li><li><a class="wiki_link" href="/Future%20work">Future work</a></li></ul></div>              <div class="ws-theme-nav-edit">
                              </div>
            </div>
          </div>
        </div>
      </nav>
      <main class="ws-theme-content" role="main">
        <div class="ws-theme-content-inner">
          <div class="contentBox"><div class="innerContentBox" id="WikiContent">

<script type="text/template" id="comment-footer-template">

<div class="commentFooter modal-footer">
  <div class="pull-left">
    <button type="button" class="btn btn-default btn-sm previous"><i class="fa fa-arrow-left"></i></button>
    <button type="button" class="btn btn-default btn-sm next"><i class="fa fa-arrow-right"></i></button>
  </div>
  <% if (ws.context.user.canAdministerWiki && !ws.comments.Manager.readOnly) { %>
  <div class="pull-right">
    <button type="button" class="btn btn-default btn-sm remove">Remove</button>
  </div>
  <% } %>
</div>

</script>

<script type="text/template" id="comment-content-template">
<div class="ws-box commentView">
  <div class="comment-close">
    <button type="button" class="closeme close" aria-hidden="true"><i class="fa fa-times"></i></button>
  </div>
  <div class="commentHeader">
    <p class="ws-stream-meta command-context">
      <a class="userLink userLinkPicture" href="<%= userCreated.url %>"><img class="userPicture" src="<%= userCreated.imageUrl %>" width="16" height="16"></a>
      <a href="<%= userCreated.url %>"><%= userCreated.username %></a>
      <% if (smartDate == '__live__') { %>
      <abbr class="timeago" title="<%= (new Date(parseInt(dateCreated, 10) * 1000)).toISOString() %>">
        <%= dateCreated %>
      </abbr>
      <% } else { %>
        <%- smartDate %>
      <% } %>
      <% if (ws.context.user.canAdministerWiki && ws.comments.Manager.readOnly) { %>
        <i class="fa fa-trash-o contextual-command delete ws-tip" title="Delete Comment"></i>
      <% } %>
    </p>
  </div>

  <div class="commentBody">
    <div class="commentContent">
      <%= description %>
    </div>

      <% for(i = 0; i < replyPages.length; i++) { %>
        <% for(var j = 0; j < replyPages[i].digests.length; j++) { %>
      <div class="commentReply" data-id="<%= replyPages[i].digests[j].id %>">
        <p class="ws-stream-meta command-context">
          <a class="userLink userLinkPicture" href="<%= replyPages[i].digests[j].userCreated.url %>"><img class="userPicture" src="<%= replyPages[i].digests[j].userCreated.imageUrl %>" width="16" height="16"></a>
          <a href="<%= replyPages[i].digests[j].userCreated.url %>"><%= replyPages[i].digests[j].userCreated.username %></a>
          <% if (smartDate == '__live__') { %>
          <abbr class="timeago" title="<%= (new Date(parseInt(replyPages[i].digests[j].dateCreated, 10) * 1000)).toISOString() %>">
            <%= new Date(parseInt(replyPages[i].digests[j].dateCreated, 10) * 1000).toLocaleString() %>
          </abbr>
          <% } else { %>
            <%- smartDate %>
          <% } %>
          <% if (ws.context.user.canAdministerWiki) { %>
          <i class="fa fa-trash-o contextual-command delete-reply ws-tip" title="Delete Reply"></i>
          <% } %>
          </p>
        <div class="commentContent"><%= replyPages[i].digests[j].body %></div>
      </div>
        <% } %>
      <% } %>

      <form class="reply commentReply">
        <div class="form-group">
          <textarea name="reply" placeholder="Reply" class="form-control" /></textarea>
        </div>
        <div class="btn-toolbar">
          <button type="submit" class="btn btn-primary btn-sm" name="go" value="1">Post</button>

          <% if (ws.context.user.id) { %>
            <% if (monitored) { %>
            <button type="button" class="btn btn-default btn-sm pull-right toggle-monitor ws-tip active" title="You are monitoring replies."><i class="fa fa-eye"></i></button>
            <% } else { %>
            <button type="button" class="btn btn-default btn-sm pull-right toggle-monitor ws-tip" title="You are not monitoring replies."><i class="fa fa-eye"></i></button>
            <% } %>
          <% } %>
          <% if (ws.context.user.canAdministerWiki) { %>
            <% if (locked) { %>
            <button type="button" class="btn btn-default btn-sm pull-right toggle-lock ws-tip active" title="Replies are not allowed."><i class="fa fa-lock"></i></button>
            <% } else { %>
            <button type="button" class="btn btn-default btn-sm pull-right toggle-lock ws-tip" title="Replies are allowed."><i class="fa fa-lock"></i></button>
            <% } %>
          <% } %>

          <i class="fa fa-spinner fa-spin spinner pull-right hidden"></i>
        </div>
      </form>
   </div>

   
<div class="commentFooter modal-footer">
  <div class="pull-left">
    <button type="button" class="btn btn-default btn-sm previous"><i class="fa fa-arrow-left"></i></button>
    <button type="button" class="btn btn-default btn-sm next"><i class="fa fa-arrow-right"></i></button>
  </div>
  <% if (ws.context.user.canAdministerWiki && !ws.comments.Manager.readOnly) { %>
  <div class="pull-right">
    <button type="button" class="btn btn-default btn-sm remove">Remove</button>
  </div>
  <% } %>
</div>

</div>
</script>

<script type="text/template" id="comment-composer-template">
<div class="ws-box commentView">
  <div class="commentComposer">
    <div class="comment-close">
      &nbsp;<button type="button" class="close closeme" aria-hidden="true"><i class="fa fa-times"></i></button>
    </div>
    <div class="commentHeader">
      <p class="ws-stream-meta command-context">
        <img class="userPicture" src="<%= userCreated.imageUrl %>" width="16" height="16">
        <a href="#" onclick="return false;"><%= userCreated.username %></a>
      </p>
    </div>
    <div class="commentBody">
      <textarea name="comment" class="compose form-control" placeholder="Comment"/></textarea><br/>
      <div class="btn-toolbar">
        <button type="button" class="btn btn-default btn-sm monitored active pull-right" style="margin-left: 6px" onclick="jQuery(this).toggleClass('active')"><i class="fa fa-eye"></i></button>
        <button type="button" class="btn btn-default btn-sm locked btn-toggle pull-right" onclick="jQuery(this).toggleClass('active')"><i class="fa fa-lock"></i></button>
        <button type="button" class="btn btn-primary btn-sm closeme">Save</button>
      </div>
    </div>
  </div>

  
<div class="commentFooter modal-footer">
  <div class="pull-left">
    <button type="button" class="btn btn-default btn-sm previous"><i class="fa fa-arrow-left"></i></button>
    <button type="button" class="btn btn-default btn-sm next"><i class="fa fa-arrow-right"></i></button>
  </div>
  <% if (ws.context.user.canAdministerWiki && !ws.comments.Manager.readOnly) { %>
  <div class="pull-right">
    <button type="button" class="btn btn-default btn-sm remove">Remove</button>
  </div>
  <% } %>
</div>

</div>
</script>

<script type="text/template" id="comment-proxy-template">
<div class="comment-proxy">
  <span class="commentUser">
  <% if (userCreated) { %>
    <img class="userPicture" src="<%= userCreated.imageUrl %>" width="16" height="16">
  <% } else { %>
    <img class="userPicture" src="<%= ws.context.user.imageUrlPrefix %>sm.jpg" width="16" height="16">
  <% } %>
  </span>
  <span class="commentReplies"><%= 1 + _(replyPages).reduce(function(memo, page){ return memo + page.digests.length; }, 0) %></span>
</div>
</script>

<div class="ws-menu-bar WikiControls WikispacesContent WikispacesBs3">
  
    <h1 class="pageTitle"><a href="/Undistorting+Image+Sequences">Undistorting Image Sequences</a></h1>
      <div class="btn-group pull-right">
          <span class="btn btn-default disabled tipme" title="you do not have permission to edit this page"><i class="fa fa-pencil fa-fw"></i> Edit</span>          <a class="btn btn-default tipme" title="no discussion posts" href="/Undistorting+Image+Sequences#discussion"><i class="fa fa-comments fa-fw"></i> 0</a>          <a class="btn btn-default tipme" title="view 31 revisions" href="/page/history/Undistorting+Image+Sequences"><i class="fa fa-clock-o fa-fw"></i> 31</a>          <a class="btn btn-default ws-btn-more dropdown-toggle tipme" title="more options" href="/page/menu/Undistorting+Image+Sequences"><i class="icon-height-only fa-fw"></i>&hellip;</a>        <ul class="ws-more-menu dropdown-menu dropdown-menu-right">
              <li class=" dropdown"><a class=" ws-tag-dropdown-toggle" href="/page/tags/Undistorting+Image+Sequences"><span class="pull-right">0</span> <i class="fa fa-tag fa-fw"></i> Tags</a>
          <div class="dropdown-menu dropdown-menu-right ws-tag-dropdown-menu">
          



<form action="#" name="WikiTagForm" class="WikiTagForm"><input type="hidden" name="wikispacesFormToken" value="09ca472a27a86bd47071f74f433881797086672b"/><input type="hidden" name="wikispacesFormToken" value="09ca472a27a86bd47071f74f433881797086672b"/>
  <div class="WikiTagList">
    <i class="fa fa-tag ws-action"></i>
        <ul class="list-unstyled">
          <li>No tags</li>
        </ul>
      </div>
  </form>      </div>
    </li>
              <li class="divider"></li>
            <li class=""><a class=" WikispacesDialogLink" href="https://colour-recovery.github.io/wiki/addmonitor?monitorLink=page%3AUndistorting%20Image%20Sequences"><i class="fa fa-eye fa-fw"></i> Notify</a>
    </li>
        <li class=""><a class=" WikispacesDialogLink" href="/page/rss/Undistorting+Image+Sequences"><i class="fa fa-rss fa-fw"></i> RSS</a>
    </li>
        <li class=""><a class="" href="/page/links/Undistorting+Image+Sequences"><i class="fa fa-link fa-fw"></i> Backlinks</a>
    </li>
              <li class="divider"></li>
            <li class=""><a class="" href="/page/code/Undistorting+Image+Sequences"><i class="fa fa-code fa-fw"></i> Source</a>
    </li>
        <li class=""><a class="" href="/Undistorting+Image+Sequences?f=print"><i class="fa fa-print fa-fw"></i> Print</a>
    </li>
        <li class=""><a class="" href="/page/pdf/Undistorting+Image+Sequences"><i class="fa fa-cloud-download fa-fw"></i> Export (PDF)</a>
    </li>
      </ul>  </div>
  </div>




  <textarea class="form-control" id="autosaveContent" style="display:none;" rows="1" cols="1"></textarea>
  <div id="autosavePrompt" style="display:none;"></div>

<div class="commentContainer">
  <div class="commentSubject">
  <div class="wiki wikiPage" id="content_view">
  <u><strong>25th May 2009</strong></u><br />
<br />
This page explains how to undistort image stacks (i.e. video sequences as oppose to test frames).<br />
<br />
FIlm stabilisation should first be applied to remove film-gate bounce and weave.<br />
I have used the following AviSynth script to achieve this:<br />
<br />
<br />
loadplugin(&quot;rawsource.dll&quot;)<br />
RawSource(&quot;G:\totp_ch03.y&quot;, 1920, 1080, &quot;Y8&quot;)<br />
ConvertToYV12()<br />
Stab()<br />
function Stab (clip clp, int &quot;range&quot;, int &quot;dxmax&quot;, int &quot;dymax&quot;) {<br />
range = default(range, 1)<br />
dxmax = default(dxmax, 4)<br />
dymax = default(dymax, 4)<br />
temp = clp.TemporalSoften(7,255,255,25,2)<br />
inter = Interleave(temp.Repair(clp.TemporalSoften(1,255,255,25,2)),clp)<br />
mdata = DePanEstimate(inter,range=range,trust=0,dxmax=dxmax,dymax=dymax)<br />
DePan(inter,data=mdata,offset=-1)<br />
SelectEvery(2,0) }<br />
<br />
<br />
(Where G:\totp_ch03.y is the source clip.)<br />
<br />
The clips must then be separated into an image sequence.<br />
I use Virtual Dub for this purpose, and create a bmp sequence.<br />
<br />
The elastic B-Spline undistort transform is then generated from one of these frames using BUnwarpJ. (See my previous page for a detailed description of how to do this.) The transform is contained in a file, which I will call elastic.txt<br />
<br />
Next I use ImageJ to run the following macro:<br />
<br />
<br />
dir = getDirectory(&quot;Choose input directory &quot;);<br />
diro = getDirectory(&quot;Choose output directory &quot;);<br />
for (i = 0; i &lt; 1025; i++)<br />
{<br />
call(&quot;bUnwarpJ_.elasticTransformImageMacro&quot;, dir+i+&quot;.bmp&quot;, dir+i +&quot;.bmp&quot;, dir+&quot;elastic.txt&quot;, diro+i+&quot;.bmp&quot;);<br />
}<br />
<br />
<br />
The undistorted image sequence ends up in whichever output directory I selected, and it can then be reassembled into a video sequence.<br />
<br />
<u><strong>Processing times</strong></u><br />
<br />
On my PC it takes a disappointing 25 seconds to process each frame using the above macro.<br />
However my CPU is an outdated 2GHz AMD Athlon 2400+, whereas the code has been optimised for multi-core processors: so it should run much faster on a Dual Core machine.<br />
<br />
Also for some purposes you may not need process the film in HD resolution.<br />
E.g. If you wish to overlay colour from a domestic VT source onto the b/w FR, then you might as well down-convert the film to SD prior to undistort processing, as this should reduce processing time by approximately a factor of five!<br />
<br />
<strong><u>Methods for generating the undistort transform</u></strong><br />
<br />
This can be produced by one of two methods:<br />
<br />
1) A chroma-derived method using Richard Russell's CR software.<br />
<br />
2) A luma-derived method using existing VT material cross-matched with the FR.<br />
<br />
The first method can result in artefacts such as ringing at the top-of-frame, and tearing on the left and right frame boundaries.<br />
These are caused by errors in CR quadrant assignment, which in turn lead to errors in geometry. They can also be caused by large areas of missing geometry information, thus leading to interpolation errors. They can be avoided by careful choice of source frame.<br />
<br />
The second method avoids these problems entirely; but it takes much longer to generate the elastic transform file.<br />
<br />
<strong><u>Description of the luma-derived method</u></strong><br />
<br />
The source and target files are loaded into ImageJ (i.e. a frame from the FR, and the corresponding frame from the VT).<br />
The BUnwarpJ plugin is then loaded, and you must ensure that the VT frame is selected in the &quot;Target Image&quot; dropdown.<br />
<br />
&quot;Mono&quot; is selected in the &quot;Registration Mode&quot; dropdown, then the &quot;Final Deformation&quot; and &quot;Stop Threshold&quot; settings can be tweaked to adjust the accuracy of the undistort you wish to achieve.<br />
<br />
Click &quot;OK&quot; to start deriving the elastic transform.<br />
Diagnostic windows will then open, one of which shows a wireframe representation of the cross-matching between the two images.<br />
When it's done, it will ask you what filename you wish to save the elastic transform under.<br />
<br />
It can take up to an hour to generate the transform on my PC, depending on which settings I've chosen.<br />
However for some purposes it may be possible to use the same transform across an entire episode. E.g. If you wish to overlay colour from a domestic VT, then you don't require an ultra-high level of accuracy.<br />
<br />
<strong><u>Recap of the chroma-derived method</u></strong><br />
<br />
This uses Richard's CR software coupled with my Undist1 and Undist2 QBASIC programs.<br />
Undist1 contains an extra block of code to remove the gross distortion in the right and left margins of the film frames (present in all film recordings).<br />
Undist2 does not contain this code: therefore you should apply Undist1 first to remove most of the distortion, followed by Undist2 to remove any residual distortion. (N.B. Once you've applied Undist1 to the image, you must ofcourse remember to change the reference files from urefdist.bin/vrefdist.bin to uref-1.bin/vref-1.bin before generating a new csv file to process with Undist2.)<br />
<br />
I have discovered that a two-pass process, using Undist1 with a B-Spline Interval of 960, followed by Undist2 with B-Spline of 1920, removes nearly all the distortion.<br />
<br />
To apply this undistort efficiently across multiple frames, you need to combine the elastic.txt files from both passes into a single elastic transform (otherwise you'd have to apply two successive undistort transforms to every frame).<br />
You can't combine them directly, since they have different B-Spline Intervals, therefore you need to combine the raw transform files instead using the &quot;Compose Raw Transformations&quot; option in BUnwarpJ's I/O menu.<br />
The resulting raw file is then converted to an elastic file using &quot;Convert Transformation To Elastic&quot;.<br />
<br />
I have experimented with various different B-Spline values for this combined transform, and found the best one to be 1079.<br />
(N.B. The horizontal distortion is improved most with a value of 1920; but this doesn't work so well for the vertical. So 1079 is probably the best compromise.)<br />
<br />
<strong><u>How many frames can be processed with the same elastic transform?</u></strong><br />
<br />
This depends for what purpose you wish to use the undistorted footage:<br />
<br />
1) For overlay of colour from a domestic VT source: you may get away with using the same transform across an entire episode. Certainly you shouldn't need to recalculate more often than once per camera-shot change.<br />
<br />
2) For deinterlacing FR's: providing film stabilisation is applied first, I have found the vertical geometry to be quite stable, over several hundred frames at least.<br />
<br />
3) For conventional PAL decoding: you'll probably need to derive a new transform for every film frame. This is not practical at present; though it may be in a few years time.<br />
It would require, Colour Recovery, BUnwarpJ and Undist to be integrated in some way, perhaps as plugins for AviSynth. That way you could you could experiment with different multi-pass combinations, with new undistort transforms being generated automatically for each frame.<br />
<br />
<strong><u>Diagnostic Images:</u></strong><br />
<br />
The following images show the original distortion in one of the TOTP frames, followed by the distortion after 1st-pass processing with Undist1, then 2nd-pass processing with Undist2:<br />
<!-- ws:start:WikiTextLocalImageRule:0:&lt;img src=&quot;/file/view/665_%28H%29.jpg/75335869/665_%28H%29.jpg&quot; alt=&quot;Original horiz distortion&quot; title=&quot;Original horiz distortion&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/665_%28H%29.jpg/75335869/665_%28H%29.jpg" alt="665_(H).jpg" title="665_(H).jpg" /></td></tr><tr><td class="imageCaption">Original horiz distortion</td></tr></table><!-- ws:end:WikiTextLocalImageRule:0 --><br />
<!-- ws:start:WikiTextLocalImageRule:1:&lt;img src=&quot;/file/view/665-1%28H%29.jpg/75335921/665-1%28H%29.jpg&quot; alt=&quot;Horiz distortion after 1st pass (with Undist1)&quot; title=&quot;Horiz distortion after 1st pass (with Undist1)&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/665-1%28H%29.jpg/75335921/665-1%28H%29.jpg" alt="665-1(H).jpg" title="665-1(H).jpg" /></td></tr><tr><td class="imageCaption">Horiz distortion after 1st pass (with Undist1)</td></tr></table><!-- ws:end:WikiTextLocalImageRule:1 --><br />
<!-- ws:start:WikiTextLocalImageRule:2:&lt;img src=&quot;/file/view/665-2%28i%3D960%2C1920%29_%28H%29.jpg/75335957/665-2%28i%3D960%2C1920%29_%28H%29.jpg&quot; alt=&quot;Horiz distortion after 2nd pass (with Undist2)&quot; title=&quot;Horiz distortion after 2nd pass (with Undist2)&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/665-2%28i%3D960%2C1920%29_%28H%29.jpg/75335957/665-2%28i%3D960%2C1920%29_%28H%29.jpg" alt="665-2(i=960,1920)_(H).jpg" title="665-2(i=960,1920)_(H).jpg" /></td></tr><tr><td class="imageCaption">Horiz distortion after 2nd pass (with Undist2)</td></tr></table><!-- ws:end:WikiTextLocalImageRule:2 --><br />
<!-- ws:start:WikiTextLocalImageRule:3:&lt;img src=&quot;/file/view/665_%28V%29.jpg/75336465/665_%28V%29.jpg&quot; alt=&quot;Original vert distortion&quot; title=&quot;Original vert distortion&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/665_%28V%29.jpg/75336465/665_%28V%29.jpg" alt="665_(V).jpg" title="665_(V).jpg" /></td></tr><tr><td class="imageCaption">Original vert distortion</td></tr></table><!-- ws:end:WikiTextLocalImageRule:3 --><br />
<!-- ws:start:WikiTextLocalImageRule:4:&lt;img src=&quot;/file/view/665-1%28V%29.jpg/75336487/665-1%28V%29.jpg&quot; alt=&quot;Vert distortion after 1st pass (with Undist1)&quot; title=&quot;Vert distortion after 1st pass (with Undist1)&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/665-1%28V%29.jpg/75336487/665-1%28V%29.jpg" alt="665-1(V).jpg" title="665-1(V).jpg" /></td></tr><tr><td class="imageCaption">Vert distortion after 1st pass (with Undist1)</td></tr></table><!-- ws:end:WikiTextLocalImageRule:4 --><br />
<!-- ws:start:WikiTextLocalImageRule:5:&lt;img src=&quot;/file/view/665-2%28i%3D960%2C1920%29_%28V%29.jpg/75336517/665-2%28i%3D960%2C1920%29_%28V%29.jpg&quot; alt=&quot;Vert distortion after 2nd pass (with Undist2)&quot; title=&quot;Vert distortion after 2nd pass (with Undist2)&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/665-2%28i%3D960%2C1920%29_%28V%29.jpg/75336517/665-2%28i%3D960%2C1920%29_%28V%29.jpg" alt="665-2(i=960,1920)_(V).jpg" title="665-2(i=960,1920)_(V).jpg" /></td></tr><tr><td class="imageCaption">Vert distortion after 2nd pass (with Undist2)</td></tr></table><!-- ws:end:WikiTextLocalImageRule:5 --><br />
<br />
<br />
Now let's look at the results of a combined undistort, and compare B-Spline interval settings of 1079 and 1920:<br />
<!-- ws:start:WikiTextLocalImageRule:6:&lt;img src=&quot;/file/view/665-1%262%281079%29%28H%29.jpg/75337629/665-1%262%281079%29%28H%29.jpg&quot; alt=&quot;Horiz distortion following combined undistort with B-Spline Interval of 1079&quot; title=&quot;Horiz distortion following combined undistort with B-Spline Interval of 1079&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/665-1%262%281079%29%28H%29.jpg/75337629/665-1%262%281079%29%28H%29.jpg" alt="665-1&amp;2(1079)(H).jpg" title="665-1&amp;2(1079)(H).jpg" /></td></tr><tr><td class="imageCaption">Horiz distortion following combined undistort with B-Spline Interval of 1079</td></tr></table><!-- ws:end:WikiTextLocalImageRule:6 --><br />
<!-- ws:start:WikiTextLocalImageRule:7:&lt;img src=&quot;/file/view/665-1%262%281920%29%28H%29.jpg/75337667/665-1%262%281920%29%28H%29.jpg&quot; alt=&quot;Horiz distortion following combined undistort with B-Spline Interval of 1920&quot; title=&quot;Horiz distortion following combined undistort with B-Spline Interval of 1920&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/665-1%262%281920%29%28H%29.jpg/75337667/665-1%262%281920%29%28H%29.jpg" alt="665-1&amp;2(1920)(H).jpg" title="665-1&amp;2(1920)(H).jpg" /></td></tr><tr><td class="imageCaption">Horiz distortion following combined undistort with B-Spline Interval of 1920</td></tr></table><!-- ws:end:WikiTextLocalImageRule:7 --><br />
<!-- ws:start:WikiTextLocalImageRule:8:&lt;img src=&quot;/file/view/665-1%262%281079%29%28V%29.jpg/75337723/665-1%262%281079%29%28V%29.jpg&quot; alt=&quot;Vert distortion following combined undistort with B-Spline Interval of 1079&quot; title=&quot;Vert distortion following combined undistort with B-Spline Interval of 1079&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/665-1%262%281079%29%28V%29.jpg/75337723/665-1%262%281079%29%28V%29.jpg" alt="665-1&amp;2(1079)(V).jpg" title="665-1&amp;2(1079)(V).jpg" /></td></tr><tr><td class="imageCaption">Vert distortion following combined undistort with B-Spline Interval of 1079</td></tr></table><!-- ws:end:WikiTextLocalImageRule:8 --><br />
<!-- ws:start:WikiTextLocalImageRule:9:&lt;img src=&quot;/file/view/665-1%262%281920%29%28V%29.jpg/75337757/665-1%262%281920%29%28V%29.jpg&quot; alt=&quot;Vert distortion following combined undistort with B-Spline Interval of 1920&quot; title=&quot;Vert distortion following combined undistort with B-Spline Interval of 1920&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/665-1%262%281920%29%28V%29.jpg/75337757/665-1%262%281920%29%28V%29.jpg" alt="665-1&amp;2(1920)(V).jpg" title="665-1&amp;2(1920)(V).jpg" /></td></tr><tr><td class="imageCaption">Vert distortion following combined undistort with B-Spline Interval of 1920</td></tr></table><!-- ws:end:WikiTextLocalImageRule:9 --><br />
<br />
You can see that 1079 gives the best overall result; though 1920 is best for the horizontal correction.<br />
I've experimented with lots of different values for the interval; but the others gave much worse results. (Simply increasing the interval by 1 can lead to a surprisingly large change in the diagnostics.)<br />
It seems values close to the horizontal or vertical frame resolution give the best results for those particular directions.<br />
<br />
<br />
Finally let's look at how well a single undistort performs when carried over multiple frames.<br />
This undistort transform was derived from Frame 665, and has been applied to Frames 666, 680, 700 and 1024:<br />
<!-- ws:start:WikiTextLocalImageRule:10:&lt;img src=&quot;/file/view/666-2%28H%29.jpg/75339735/666-2%28H%29.jpg&quot; alt=&quot;Frame 666 horiz&quot; title=&quot;Frame 666 horiz&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/666-2%28H%29.jpg/75339735/666-2%28H%29.jpg" alt="666-2(H).jpg" title="666-2(H).jpg" /></td></tr><tr><td class="imageCaption">Frame 666 horiz</td></tr></table><!-- ws:end:WikiTextLocalImageRule:10 --><br />
<!-- ws:start:WikiTextLocalImageRule:11:&lt;img src=&quot;/file/view/680-2%28H%29.jpg/75339759/680-2%28H%29.jpg&quot; alt=&quot;Frame 680 horiz&quot; title=&quot;Frame 680 horiz&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/680-2%28H%29.jpg/75339759/680-2%28H%29.jpg" alt="680-2(H).jpg" title="680-2(H).jpg" /></td></tr><tr><td class="imageCaption">Frame 680 horiz</td></tr></table><!-- ws:end:WikiTextLocalImageRule:11 --><br />
<!-- ws:start:WikiTextLocalImageRule:12:&lt;img src=&quot;/file/view/700-2%28H%29.jpg/75339771/700-2%28H%29.jpg&quot; alt=&quot;Frame 700 horiz&quot; title=&quot;Frame 700 horiz&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/700-2%28H%29.jpg/75339771/700-2%28H%29.jpg" alt="700-2(H).jpg" title="700-2(H).jpg" /></td></tr><tr><td class="imageCaption">Frame 700 horiz</td></tr></table><!-- ws:end:WikiTextLocalImageRule:12 --><br />
<!-- ws:start:WikiTextLocalImageRule:13:&lt;img src=&quot;/file/view/1024-2%28H%29.jpg/75339793/1024-2%28H%29.jpg&quot; alt=&quot;Frame 1024 horiz&quot; title=&quot;Frame 1024 horiz&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/1024-2%28H%29.jpg/75339793/1024-2%28H%29.jpg" alt="1024-2(H).jpg" title="1024-2(H).jpg" /></td></tr><tr><td class="imageCaption">Frame 1024 horiz</td></tr></table><!-- ws:end:WikiTextLocalImageRule:13 --><!-- ws:start:WikiTextLocalImageRule:14:&lt;img src=&quot;/file/view/666-2%28V%29.jpg/75339831/666-2%28V%29.jpg&quot; alt=&quot;Frame 666 vert&quot; title=&quot;Frame 666 vert&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/666-2%28V%29.jpg/75339831/666-2%28V%29.jpg" alt="666-2(V).jpg" title="666-2(V).jpg" /></td></tr><tr><td class="imageCaption">Frame 666 vert</td></tr></table><!-- ws:end:WikiTextLocalImageRule:14 --><br />
<!-- ws:start:WikiTextLocalImageRule:15:&lt;img src=&quot;/file/view/680-2%28V%29.jpg/75339851/680-2%28V%29.jpg&quot; alt=&quot;Frame 680 vert&quot; title=&quot;Frame 680 vert&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/680-2%28V%29.jpg/75339851/680-2%28V%29.jpg" alt="680-2(V).jpg" title="680-2(V).jpg" /></td></tr><tr><td class="imageCaption">Frame 680 vert</td></tr></table><!-- ws:end:WikiTextLocalImageRule:15 --><br />
<!-- ws:start:WikiTextLocalImageRule:16:&lt;img src=&quot;/file/view/700-2%28V%29.jpg/75339875/700-2%28V%29.jpg&quot; alt=&quot;Frame 700 vert&quot; title=&quot;Frame 700 vert&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/700-2%28V%29.jpg/75339875/700-2%28V%29.jpg" alt="700-2(V).jpg" title="700-2(V).jpg" /></td></tr><tr><td class="imageCaption">Frame 700 vert</td></tr></table><!-- ws:end:WikiTextLocalImageRule:16 --><br />
<!-- ws:start:WikiTextLocalImageRule:17:&lt;img src=&quot;/file/view/1024-2%28V%29.jpg/75339913/1024-2%28V%29.jpg&quot; alt=&quot;Frame 1024 vert&quot; title=&quot;Frame 1024 vert&quot; /&gt; --><table class="captionBox"><tr><td class="captionedImage"><img src="/file/view/1024-2%28V%29.jpg/75339913/1024-2%28V%29.jpg" alt="1024-2(V).jpg" title="1024-2(V).jpg" /></td></tr><tr><td class="imageCaption">Frame 1024 vert</td></tr></table><!-- ws:end:WikiTextLocalImageRule:17 --><br />
<br />
You can see that the horizontal distortion drifts a lot more than the vertical; but the undistorted frames are still a lot closer to the correct geometry than they were originally.<br />
<br />
<br />
<u><strong>10th August 2009</strong></u><br />
<br />
I have recently been experimenting with matching film recordings to corresponding domestic VT footage: so that colour from the VT can be accurately overlaid onto the monochrome film.<br />
To my surprise I've discovered that it is feasible to calculate a new undistort transform for every film frame.<br />
This is achieved with the following ImageJ macro:<br />
<br />
<br />
dirf = getDirectory(&quot;Choose FR directory &quot;);<br />
dirv = getDirectory(&quot;Choose VT directory &quot;);<br />
diro = getDirectory(&quot;Choose output directory &quot;);<br />
for (i = 0; i &lt; 1025; i++)<br />
{<br />
open(dirv+i+&quot;.bmp&quot;);<br />
open(dirf+i+&quot;.bmp&quot;);<br />
run(&quot;bUnwarpJ&quot;, &quot;registration=Mono image_subsample_factor=0 initial_deformation=[Very Coarse] final_deformation=[Very Fine] divergence_weight=0 curl_weight=0 landmark_weight=0 image_weight=1 consistency_weight=10 stop_threshold=0.5&quot;);<br />
save(diro+i+&quot;.bmp&quot;);<br />
close();<br />
close();<br />
close();<br />
}<br />
<br />
<br />
Before applying this macro, it is necessary to split the FR and VT files into image sequences, and the VT images must be upscaled to 1920X1080 to match the FR.<br />
<br />
It takes about 90-100 seconds to process each frame on my PC; but would be considerably faster on a dual-core machine. Thus it is practical to put this to work on a full-length TV show (especially if you process each episode in parallel on a separate PC).<br />
On my machine it would take about 1,000 hours to process a 25 minute episode (with titles removed).<br />
<br />
The process is fully automated, and can be left running indefinitely, provided all the source frames are contained within the same folder and consecutively numbered. If you wanted to put each chunk of the film recording into a separate directory, then the macro would have to be slightly modified, otherwise you would need manual intervention at the beginning of each chunk.<br />
(It may be necessary to close down firewall and anti-virus software, as I found these were causing ImageJ to crash after several minutes running the macro.)<br />
<br />
Reducing the stop_threshold value will increase the accuracy of the undistort; though it also increases processing time.<br />
Changing the final_deformation value to [Ultra Fine] will also increase accuracy.<br />
It's doubtful either of these tweaks would be necessary, as I believe my settings are accurate enough for purpose.<br />
<br />
The reason I've over-estimated the processing time in the past, is because Virtual Dub was producing 24-bit RGB images from the raw film recording chunks.<br />
However since the images are monochrome, you only need 8-bit greyscale files, which have three times less information to process.<br />
<br />
<br />
Another processing option is to derive an undistort transform once every 25 frames, and use this to process the intervening frames.<br />
The macro for this is as follows:<br />
<br />
<br />
dirf = getDirectory(&quot;Choose FR directory &quot;);<br />
dirv = getDirectory(&quot;Choose VT directory &quot;);<br />
diro = getDirectory(&quot;Choose output directory &quot;);<br />
dirt = getDirectory(&quot;Select directory containing ImageJ &quot;);<br />
for (j = 0; j &lt; 41; j++)<br />
{<br />
n = 25 * j;<br />
open(dirv+n+&quot;.bmp&quot;);<br />
open(dirf+n+&quot;.bmp&quot;);<br />
run(&quot;bUnwarpJ&quot;, &quot;registration=Mono image_subsample_factor=0 initial_deformation=[Very Coarse] final_deformation=[Very Fine] divergence_weight=0 curl_weight=0 landmark_weight=0 image_weight=1 stop_threshold=0.5 save_transformations&quot;);<br />
save(diro+n+&quot;.bmp&quot;);<br />
close();<br />
close();<br />
close();<br />
<br />
open(dirv+n+&quot;.bmp&quot;);<br />
open(dirf+n+&quot;.bmp&quot;);<br />
for (k = 1; k &lt; 25; k++)<br />
{<br />
i = k + (25 * j);<br />
call(&quot;bUnwarpJ_.elasticTransformImageMacro&quot;, dirf+i+&quot;.bmp&quot;, dirf+i+&quot;.bmp&quot;, dirt+n+&quot;-1_direct_transf.txt&quot;, diro+i+&quot;.bmp&quot;);<br />
}<br />
<br />
close();<br />
close();<br />
}<br />
<br />
<br />
<br />
Unfortunately this macro only works with 24-bit image files at the moment, due to limitations in the BUnwarpJ plugin. However it still provides a faster processing time overall.<br />
I'm looking into ways to get round the plugin limitations.<br />
<br />
A final option is to split the footage into separate scenes using automatic scene detection, and derive one transform for each scene.<br />
This could be accomplished by minor changes to the above macro.
  </div>

<div id="pageEditor" class="editorWrapper editorLayer">
  <iframe id="target_editor" name="target_editor" src="/s/blank.html" style="width:0px;height:0px;border:0"></iframe>
    <form action="/page/edit/Undistorting+Image+Sequences" method="post" class="editorForm" id="editorForm"><input type="hidden" name="wikispacesFormToken" value="46bbe4995d6b487856c521ed7cab39e60fb8c0c8"/><div class="wsh"><input type="text" class="form-control" name="wikispaces_user_id" value="user-1528198255"/></div><div class="mimw"><input type="text" class="form-control" name="goto" autocomplete = "off"/></div><div class="movkp"><input type="text" class="form-control" name="mode" autocomplete = "off"/></div><div class="movkp"><input type="text" class="form-control" name="version" autocomplete = "off"/></div><div class="movkp"><input type="text" class="form-control" name="pageComments" autocomplete = "off"/></div><div class="wsh"><input type="text" class="form-control" name="saveAndContinue" autocomplete = "off"/></div><div class="jowic"><input type="text" class="form-control" name="comment" autocomplete = "off"/></div><div class="movkp"><input type="text" class="form-control" name="commentsDisabled" autocomplete = "off"/></div><div class="wsh"><input type="text" class="form-control" name="contentPresent" autocomplete = "off"/></div><div class="jowic"><input type="text" class="form-control" name="editorCleanup" autocomplete = "off"/></div><div class="jovise"><input type="text" class="form-control" name="WikispacesEditorContent" autocomplete = "off"/></div><input type="hidden" name="wikispacesASFormToken" value="b9be191876dee543261c0d5e28cc13b3d8689982"/>
    <input type="hidden" title="goto" name="fe4d19964058c0805a3259eb88efc7e4802a12de" value=""/>
    <input type="hidden" title="mode" name="13ef9965cd1db8a843dc54ce01fe5b94dc3514df" autocomplete="off" value="visual"/>
    <input type="hidden" title="version" name="2405d1ba8f5551552ecea435f5ff2371791430b4" autocomplete="off" value="83762043"/>
    <input type="hidden" title="pageComments" name="74e26b106bc0c303c323a70cfcdec60579d3c0c9" autocomplete="off" value=""/>
    <input type="hidden" title="saveAndContinue" name="6fab80135b9687a01c86b2f3df8db9578ffa7209" value="0"/>
    <input type="hidden" title="comment" name="238eb036d9df101f135b92136cc292d01bd987e4" value=""/>
    <input type="hidden" title="commentsDisabled" name="b37b7c891b2ccde91b562d7e456f385e7505b608" autocomplete="off" value=""/>
    <input type="hidden" title="contentPresent" name="5ace9c58f8e6ba09d9f40ea7d7875c159bd29b5c" autocomplete="off" value=""/>
    <input type="hidden" title="editorCleanup" name="4619c228231485d59b5592c92681c34c0fb04379" autocomplete="off" value=""/>

    <textarea id="wsMainEditor" title="content" class="noContentHide" name="1925e8b54c29d6ccb4bb6586af5434c02b7041f1" style="width: 100%; position: absolute; top: -50000px; left: -50000px;" autocomplete="off"></textarea>

  <noscript>
    <h2>Javascript Required</h2>
    <p>You need to enable Javascript in your browser to edit pages.</p>
  </noscript>

  </form>
  
  
  <div id="plainTextEditor" style="position:relative;display:none" class="editorLayer" >
    <textarea id="textEditor" class="autogrow"></textarea>
    <p style="clear:both;" align="right"><a href="http://helpcenter.wikispaces.com/customer/portal/articles/1959131-wikitext">help on how to format text</a></p>
  </div>
</div>




  </div>
  <div class="commentColumn WikispacesStream"><div class="WikispacesContent WikispacesBs3"><div class="commentList"></div></div></div>
</div>

  




<script type="text/template" id="js-event-template">
  <small>
    <%- startDateShortFormat %>
    <a href="<%- ws.common.pathFor('event', 'view', id) %>" class="WikispacesDialogLink">
      <%- ws.common.truncate(title, 15) %>
    </a>
  </small>
</script>

<script type="text/template" id="js-reply-template">
  <div class="tc-timeline-comment media">

    <a class="pull-left userLink" href="<%- userCreated.url %>">
      <img src="<%- userCreated.imageUrl %>" width="30" height="30" class="author-avatar" alt="" />
    </a>
    <div class="media-body" data-id="<%= id %>">
      <% if (ws.context.user.canAdministerWiki) { %>
        <i class="tc-delete-comment fa fa-trash-o contextual-command destroy-message ws-tip" title="Delete reply"></i>
      <% } %>
      <div class="tc-box-name-date">
        <span class="tc-commenter"><a href="<%- userCreated.url %>"><%- userCreated.username %></a></span>
        <% if (smartDate == '__live__') { %>
        <abbr style="border-bottom-style: none;" class="timeago tc-comment-date" title="<%- (new Date(parseInt(dateCreated) * 1000)).toISOString() %>">
          <%- (new Date(parseInt(dateCreated) * 1000)).toDateString() %>
        </abbr>
        <% } else { %>
          <abbr style="border-bottom-style: none;" class="tc-comment-date"><%- smartDate %></abbr>
        <% } %>
      </div>
      <% if (body) { %>
      <p>
        <%= body %>
      </p>
      <% } %>
    </div>
  </div>
</script>

<script type="text/template" id="js-share-template">
  <div class="tc-timeline-block tc-<%= ws.stream.typeToBlockType(sharedType) %>-block" <%= (ws.stream.hideTimeline ? 'style="padding-left: 0px;"' : '') %>>

    <% if (!ws.stream.hideTimeline) { %>
      <div class="tc-timeline-icon">
        <i class="fa fa-<%= ws.stream.typeToIcon(sharedType) %>"></i>
      </div>
      <div class="tc-timeline-triangle-man"></div>
    <% } %>

    <div class="tc-timeline-box" data-id="<%= id %>">
      <div class="media">
        <a class="pull-left userLink" href="<%- userCreated.url %>">
          <img src="<%- userCreated.imageUrl %>" width="48" height="48" class="author-avatar media-object" alt="" />
        </a>

        <div class="media-body">

          <div class="tc-stream-dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
              <i class="fa fa-chevron-down"></i>
            </a>
            <ul class="dropdown-menu dropdown-menu-right" role="menu">
              <% if (ws.context.user.id) { %>
              <li>
                <a class="js-toggle-monitor" tabindex="-1" href="#">
                  <i class="fa-fw fa fa-eye"></i>
                  <span><%= monitored ? 'Start Monitoring' : 'Stop Monitoring' %></span>
                </a>
              </li>
              <% } %>

              <% if (ws.context.user.canAdministerWiki) { %>
              <li>
                <a class="js-toggle-lock" tabindex="-1" href="#">
                  <i class="fa-fw fa fa-lock"></i>
                  <span><%= locked ? 'Unlock Replies' : 'Lock Replies' %></span>
                </a>
              </li>
              <% if (sharedType == 'discussion' || sharedType == 'comment' || sharedType == 'event') { %>
              <li>
                <a class="js-destroy-share" tabindex="-1" href="#">
                  <i class="fa-fw fa fa-trash-o"></i>
                  Delete <%= ws.stream.typeToName(sharedType) %>
                </a>
              </li>
              <% } %>
              <% } %>
            </ul>
          </div>

          <div class="tc-timeline-box-header ws-reveal media-heading">
              <h3 class="tc-box-title">
              <% if (typeof adminLink !== 'undefined' && adminLink && ws.context.user.canAdministerWiki) { %>
                <a href="<%- adminLink %>"><%- title %></a>
              <% } else { %>
                <%- title %>
              <% } %>
              <% if (typeof startDate !== 'undefined' && startDate) { %> - <%= startDateShortFormat %> <%= ws.stream.getYearFromStartDate(startDate) %><% } %>
              </h3>
              <div class="tc-box-name-date">
                <% if (ws.context.instance.isTesClassroom) { %>
                  <%- userCreated.username %>
                <% } else { %>
                  <a class="author-name" href="<%- userCreated.url %>"><%- userCreated.username %></a>
                <% } %>
                <% if (typeof recipients !== 'undefined' && recipients) { %>
                  <i class="fa fa-angle-right"></i>
                  <% if (typeof recipientsLink !== 'undefined') { %>
                    <a href="<%- recipientsLink %>"><%- recipients %></a>
                  <% } else { %>
                    <span class="recipients"><%- recipients %></span>
                  <% } %>
                <% } %>
                <% if (smartDate == '__live__') { %>
                  <abbr style="border-bottom-style: none;" class="timeago tc-block-date" title="<%= (new Date(parseInt(dateCreated) * 1000)).toISOString() %>">
                    <%= (new Date(parseInt(dateCreated) * 1000)).toDateString() %>
                  </abbr>
                <% } else { %>
                  <abbr style="border-bottom-style: none;" class="tc-block-date"><%- smartDate %></abbr>
                <% } %>
              </div>
          </div>

          <div class="<%= sharedType == 'comment' && !orphaned && !ws.stream.noCollapse ? 'hidden ' : '' %>tc-block-content">
            <div class="clearfix">
              <% if (typeof rangeActions !== 'undefined') { %>
                <div class="tc-range-actions">
                  <% for(var i = 0; i < rangeActions.length; i++) { %>
                  <%= ws.stream.rangeActionTemplate(rangeActions[i]) %>
                  <% } %>
                </div>
              <% } %>
              <% if (description) { %>
                <p><%= description %></p>
              <% } %>
            </div>
          </div>

          <% if (replyPages.length > 0 && !(replyPages.length === 1 && replyPages[0].digests.length === 0)) { %>
            <div class="tc-timeline-comments">
            <% for (var i = 0; i < replyPages.length; i++) { %>
              <% if (i == 0 && replyPages[i].more) { %>
                <a href="#" class="tc-show-more" onclick="ws.stream.pageReplies(<%= id %>, <%= replyPages[i].page + 1 %>); return false">Show more replies (<%= replyPages[i].more %> hidden) </a>
              <% } else { %>
                <div></div>
              <% } %>
              <% for (var j = 0; j < replyPages[i].digests.length; j++) { %>
                <%= ws.stream.replyTemplate(replyPages[i].digests[j]) %>
              <% } %>
            <% } %>
            </div>
          <% } %>

          <% if ((ws.stream.userCanPostMessage && !locked) || ws.context.user.canAdministerWiki) { %>
          <div class="tc-add-comment media <%= ws.stream.noCollapse ? 'add-active' : ''%>">
            <img src="<%- ws.context.user.imageUrlPrefix %>lg.jpg" width="30" height="30" class="pull-left author-avatar" alt="" />
            <div class="media-body">
              <textarea name="reply" placeholder="Comment" class="form-control form-control-tc ws-reveal <%= !ws.stream.noCollapse ? 'ws-unrevealed' : ''%> reply" /></textarea>
              <button type="button" class="btn-tc btn-info-tc btn-sm-tc add-reply">Post</button>
            </div>
          </div>
          <% } %>
        </div>

      </div>
    </div>
  </div>
</script>

<script type="text/template" id="js-range-action-template">
  <div>
    <strong><%- name %></strong>
    <% if (typeof(diffUrl) !== 'undefined') { %>
      <a href="<%- diffUrl %>">
    <% } %>
    <%= new Date(dateCreated * 1000).toLocaleString() %>
    <% if (typeof(diffUrl) !== 'undefined') { %>
      </a>
    <% } %>
    <% if (typeof(rangeText) !== 'undefined') { %>
      <div>
        <span class="commentExtent">
        <% if (typeof(diffUrl) !== 'undefined') { %>
          <a href="<%- diffUrl %>">
        <% } %>
        <%= rangeText %>
        <% if (typeof(diffUrl) !== 'undefined') { %>
          </a>
        <% } %>
        </span>
      </div>
    <% } %>
  </div>
</script>

<script type="text/template" id="js-stream-end-template">
  <div class="tc-timeline-block tc-end-block">
    <div class="tc-timeline-icon" style="margin-top: -10px;" />
    <div class="tc-timeline-box" style="visibility: hidden;">
      <p class="tc-box-title"></p>
    </div>
  </div>
</script>

<a name="discussion"></a>
<div class="timeline WikispacesBs3 tc-timeline-embedded show-border">
  <div class="timeline-line"></div>
    <div id="js-share-list">
    <div class="spinner hidden"><i class="fa fa-spinner fa-spin"></i></div>
  </div>
</div></div></div><div id="sentinel" style="clear:both"></div>        </div>
      </main>
    </div>
  </div>
</div>

<footer class="ws-theme-footer" role="contentinfo">
  <div class="ws-theme-container">
    <div class="ws-theme-footer-inner">
      <div class="WikiFooterNav WikiElement">
<a href="http://helpcenter.wikispaces.com/" rel="nofollow" class="js-help-trigger">Help</a> &middot;
<a href="../www.wikispaces.com/about">About</a> &middot;
<a href="../www.wikispaces.com/content/pricing" rel="nofollow">Pricing</a> &middot;
<a href="../www.wikispaces.com/privacy" rel="nofollow">Privacy</a> &middot;
<a href="../www.wikispaces.com/terms" rel="nofollow">Terms</a> &middot;
<a href="../www.wikispaces.com/site/help?url=https%3A%2F%2Fcolour-recovery.wikispaces.com%2FUndistorting%2520Image%2520Sequences%3FresponseToken%3D898db6dd5c2ad5dd130109501555522d" rel="nofollow"><strong>Support</strong></a> &middot;
<a href="/space/subscribe/upgrade"><strong>Upgrade</strong></a>
</div>      <div class="WikiLicense WikiElement">Contributions to https://colour-recovery.github.io/ are licensed under a <a rel="license" href="http://www.creativecommons.org/licenses/by-sa/2.5">Creative Commons Attribution Share-Alike 2.5 License</a>. <a rel="license" href="http://www.creativecommons.org/licenses/by-sa/2.5"><img src="../ssl.wikicdn.com/i/creativecommons/by-sa_2.5_80x15.png" width="85" height="15" alt="Creative Commons Attribution Share-Alike 2.5 License"/></a><br />Portions not contributed by visitors are Copyright 2018 Tangient LLC<br /><a href="https://www.tes.com/us/?utm_source=wikispaces&utm_medium=link&utm_campaign=US-52-footer">TES: The largest network of teachers in the world</a></div>    </div>
  </div>
</footer>


<script type="text/template" id="dialog-template">
<div class="modal fade" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-times"></i></button>
        <h4 class="modal-title"><%= header %></h4>
      </div>
      <div class="modal-body">
        <%= body %>
      </div>
    </div>
  </div>
</div>
</script>


<div id="js-help-template" class="hidden">
  <div class="ws-help">
    <div class="js-help-controls WikispacesContent WikispacesBs3">
      <a href="../www.wikispaces.com/site/gettingstarted/off" class="btn btn-default hidden js-getting-started-off pull-right">Turn off "Getting Started"</a>
      <ol class="breadcrumb">
        <li class="js-special-breadcrumb active">
          <a href="http://helpcenter.wikispaces.com/" data-breadcrumb="0">Home</a>
        </li>
        <li class="js-ellipsis hidden js-special-breadcrumb">
          ...
        </li>
        <li class="js-spinner hidden js-special-breadcrumb"><i class="fa fa-spinner fa-spin"></i></li>
      </ol>
    </div>
    <div class="ws-help-content wiki">Loading...</div>
  </div>
</div>
</div>
<script src="../ssl.wikicdn.com/s/nogz/6q86j8zz-common.min.js" type="text/javascript"></script>
<script src="../ssl.wikicdn.com/s/nogz/70163536-editorc.min.js" type="text/javascript"></script>
<script src="../ssl.wikicdn.com/s/nogz/85k7018k-stream.min.js" type="text/javascript"></script>
<script src="../ssl.wikicdn.com/s/nogz/91k8z207-contentbar.min.js" type="text/javascript"></script>
<script src="../ssl.wikicdn.com/s/nogz/395j1vq7-component.stream-vo.min.js" type="text/javascript"></script>
<script type="text/javascript">
<!--
ws.namespace('ws.attributes');
ws.namespace('ws.stream');
ws.attributes.DISCUSSION_COUNT = 0;
ws.attributes.pageId = 21467379;
ws.attributes.version = 83762043;
ws.attributes.showEditor = true;
ws.attributes.editUrl = "https:\/\/colour-recovery.wikispaces.com\/page\/edit\/Undistorting+Image+Sequences?goto=https%3A%2F%2Fcolour-recovery.wikispaces.com%2FUndistorting%2520Image%2520Sequences";
ws.attributes.userCanEdit = false;
ws.stream.userCanPostMessage = false;
ws.stream.hideTimeline = true;
ws.stream.shareSource = "https:\/\/colour-recovery.wikispaces.com\/page\/shares\/Undistorting+Image+Sequences";

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

jQuery(document).ready(function() {
  ws.common.addJsonNotices({"warning":[],"error":[],"info":[],"success":[]});
});

jQuery(document).ready(function() {
  ws.common.addNotice("<script type=\"text\/javascript\">function wsDismissBanner() { ws.common.removeNotice();  ws.cookie.set(\"wsFirstPartShutdown\", 1, {expires: 365 * 86400, domain: \".wikispaces.com\"}); return false;}$(\".ui-pnotify-closer\").remove();<\/script><i class=\"fa fa-times fa-fw ws-close\" onclick=\"wsDismissBanner();\"><\/i>It\u2019s time for us to say farewell\u2026 Classroom and Free Wikis are closing Soon!<br\/>Find out more about the full Wikispaces Site Closure <a href='http:\/\/blog.wikispaces.com' target='_top'>HERE<a\/>", "warning");
});

jQuery(document).ready(function($) {
  
  function tipPlacement() {
    return this.$element.closest('.ws-menu-bar .btn-group').is('.open') ? 'top' : 'bottom';
  }

  

  $('.ws-menu-bar').each(function() {
    var $menuBar = $(this);
    var $tagDropdown = $menuBar.find('.ws-tag-dropdown-menu');
    $menuBar.find('.tipme').tooltip({placement: tipPlacement, container: '.ws-menu-bar'});

    
    $menuBar.find('.ws-btn-more').click(ws.common.makeLinkClickFunction(function(e) {
      if ($(this).closest('.ws-menu-bar .btn-group').is('.open')) {
        ws.common.hideMorePageBar();
      } else {
        ws.common.showMorePageBar();
      }
    }));

    $menuBar.on('click', '.ws-tag-dropdown-toggle', ws.common.makeLinkClickFunction(function(e) {
      if ($(this).closest('.ws-menu-bar .dropdown').is('.open')) {
        ws.common.hideTagDropdown();
      } else {
        ws.common.showTagDropdown();
      }
    }));

    $(document.body).click(function(e) {
      var $target = $(e.target);
      if (!$target.closest('.ws-more-menu').closest('.ws-menu-bar').is($menuBar)
          || $target.closest('a').is('.WikispacesDialogLink')) {
        ws.common.hideMorePageBar();
      }
      if ($tagDropdown.length && !$target.closest('.ws-tag-dropdown-menu').is($tagDropdown)) {
        ws.common.hideTagDropdown();
      }
    });
    
  });
});


jQuery(document).ready(function($) {
  $('.ws-more-menu').on('click', 'a', function(e) {
    if ($(this).is('.disabled')) {
      e.preventDefault();
    }
  });
});


jQuery(document).ready(function() {
  ws.editor.canEdit = false;
  var editUrl = 'https://colour-recovery.github.io/page/edit/Undistorting+Image+Sequences?goto=https%3A%2F%2Fcolour-recovery.wikispaces.com%2FUndistorting%2520Image%2520Sequences';

  jQuery('#js-edit-from-template').change(function() {
    window.location = ws.common.addUriParams(editUrl, [['template', jQuery(this).val()]]);
  });
});


jQuery(document).ready(function() {
  ws.editor.loadEditorLibs('../www.wikispaces.com/site/editorlibs/en/11kk95v9.js');
});


ws.editor.startEditor = function (moreCoreOptions, moreMainOptions) {
  ws.editor.canEdit = true;

  var coreOptions = {
    'content_css': ['../www.wikispaces.com/stylesheet/editori/217420326D.css']
  };

  // The stylesheet is passed in as a string, turn it into an array
  // Add bootstrap styles to the editor, if we are in a theme that has full screen bootstrap
  if (jQuery('body').is('.WikispacesBs3')) {
    coreOptions.content_css.push('../www.wikispaces.com//s/internal-bootstrap-body.css');
  }

  var mainOptions = {
    'wssave_cancel_url': '/Undistorting+Image+Sequences',
    'wsimage_upload_url': 'https://colour-recovery.github.io/file/multiupload',
    'wsimage_max_file_size_mb': '50',
    'wsimage_page_view_group': ''
  };

  ws.editor.loadEditor(jQuery.extend(coreOptions, moreCoreOptions), jQuery.extend(mainOptions, moreMainOptions));
};

  var wikispaces_page_version = '83762043';

  jQuery(document).ready(function() {
    ws.editor.enableButtons();
  });



--></script><!-- w22 157 wki:33:36(3) tot:157:157(1) mem:2:25(69) dql:2:9(6) mog:4:4(1) -->

</body>
</html>